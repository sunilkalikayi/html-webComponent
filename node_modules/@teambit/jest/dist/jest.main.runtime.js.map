{"version":3,"names":["WORKER_NAME","JestMain","constructor","jestWorker","logger","createTester","jestConfig","jestModulePath","require","resolve","opts","JestTester","JestAspect","id","provider","worker","loggerAspect","createLogger","declareWorker","MainRuntime","WorkerAspect","LoggerAspect","addRuntime"],"sources":["jest.main.runtime.ts"],"sourcesContent":["import { MainRuntime } from '@teambit/cli';\nimport { LoggerAspect, LoggerMain, Logger } from '@teambit/logger';\nimport { WorkerAspect, WorkerMain, HarmonyWorker } from '@teambit/worker';\nimport { JestAspect } from './jest.aspect';\nimport { JestTester, JestTesterOptions } from './jest.tester';\nimport type { JestWorker } from './jest.worker';\n\nexport const WORKER_NAME = 'jest';\n\nexport class JestMain {\n  constructor(private jestWorker: HarmonyWorker<JestWorker>, private logger: Logger) {}\n\n  createTester(jestConfig: any, jestModulePath = require.resolve('jest'), opts?: JestTesterOptions) {\n    return new JestTester(JestAspect.id, jestConfig, jestModulePath, this.jestWorker, this.logger, opts);\n  }\n\n  static runtime = MainRuntime;\n  static dependencies = [WorkerAspect, LoggerAspect];\n\n  static async provider([worker, loggerAspect]: [WorkerMain, LoggerMain]) {\n    const logger = loggerAspect.createLogger(JestAspect.id);\n    const jestWorker = await worker.declareWorker<JestWorker>(WORKER_NAME, require.resolve('./jest.worker'));\n    return new JestMain(jestWorker, logger);\n  }\n}\n\nJestAspect.addRuntime(JestMain);\n"],"mappings":";;;;;;;;;;;;;;;;AAAA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AACA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AACA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AACA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AACA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AAGO,MAAMA,WAAW,GAAG,MAAM;AAAC;AAE3B,MAAMC,QAAQ,CAAC;EACpBC,WAAW,CAASC,UAAqC,EAAUC,MAAc,EAAE;IAAA,KAA/DD,UAAqC,GAArCA,UAAqC;IAAA,KAAUC,MAAc,GAAdA,MAAc;EAAG;EAEpFC,YAAY,CAACC,UAAe,EAAEC,cAAc,GAAGC,OAAO,CAACC,OAAO,CAAC,MAAM,CAAC,EAAEC,IAAwB,EAAE;IAChG,OAAO,KAAIC,mBAAU,EAACC,kBAAU,CAACC,EAAE,EAAEP,UAAU,EAAEC,cAAc,EAAE,IAAI,CAACJ,UAAU,EAAE,IAAI,CAACC,MAAM,EAAEM,IAAI,CAAC;EACtG;EAKA,aAAaI,QAAQ,CAAC,CAACC,MAAM,EAAEC,YAAY,CAA2B,EAAE;IACtE,MAAMZ,MAAM,GAAGY,YAAY,CAACC,YAAY,CAACL,kBAAU,CAACC,EAAE,CAAC;IACvD,MAAMV,UAAU,GAAG,MAAMY,MAAM,CAACG,aAAa,CAAalB,WAAW,EAAEQ,OAAO,CAACC,OAAO,CAAC,eAAe,CAAC,CAAC;IACxG,OAAO,IAAIR,QAAQ,CAACE,UAAU,EAAEC,MAAM,CAAC;EACzC;AACF;AAAC;AAAA,gCAfYH,QAAQ,aAOFkB,kBAAW;AAAA,gCAPjBlB,QAAQ,kBAQG,CAACmB,sBAAY,EAAEC,sBAAY,CAAC;AASpDT,kBAAU,CAACU,UAAU,CAACrB,QAAQ,CAAC"}