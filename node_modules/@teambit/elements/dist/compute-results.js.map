{"version":3,"names":["computeResults","context","results","outDirName","storageResolver","result","componentsResults","components","map","component","startTime","endTime","errors","err","message","warning","warnings","artifacts","getArtifactDef","name","globPatterns"],"sources":["compute-results.ts"],"sourcesContent":["import { ArtifactDefinition, ArtifactStorageResolver, ComponentResult } from '@teambit/builder';\nimport { BundlerContext, BundlerResult } from '@teambit/bundler';\n\nexport async function computeResults(\n  context: BundlerContext,\n  results: BundlerResult[],\n  outDirName: string,\n  storageResolver?: ArtifactStorageResolver\n) {\n  const result = results[0];\n\n  const componentsResults: ComponentResult[] = result.components.map((component) => {\n    return {\n      component,\n      startTime: result.startTime,\n      endTime: result.endTime,\n      errors: result.errors.map((err) => (typeof err === 'string' ? err : err.message)),\n      warning: result.warnings,\n    };\n  });\n\n  const artifacts = getArtifactDef(outDirName, storageResolver);\n\n  return {\n    componentsResults,\n    artifacts,\n  };\n}\n\nfunction getArtifactDef(outDirName: string, storageResolver?: ArtifactStorageResolver): ArtifactDefinition[] {\n  return [\n    {\n      name: 'elements',\n      globPatterns: [`${outDirName}/public/**`],\n      storageResolver,\n    },\n  ];\n}\n"],"mappings":";;;;;;;AAGO,eAAeA,cAAc,CAClCC,OAAuB,EACvBC,OAAwB,EACxBC,UAAkB,EAClBC,eAAyC,EACzC;EACA,MAAMC,MAAM,GAAGH,OAAO,CAAC,CAAC,CAAC;EAEzB,MAAMI,iBAAoC,GAAGD,MAAM,CAACE,UAAU,CAACC,GAAG,CAAEC,SAAS,IAAK;IAChF,OAAO;MACLA,SAAS;MACTC,SAAS,EAAEL,MAAM,CAACK,SAAS;MAC3BC,OAAO,EAAEN,MAAM,CAACM,OAAO;MACvBC,MAAM,EAAEP,MAAM,CAACO,MAAM,CAACJ,GAAG,CAAEK,GAAG,IAAM,OAAOA,GAAG,KAAK,QAAQ,GAAGA,GAAG,GAAGA,GAAG,CAACC,OAAQ,CAAC;MACjFC,OAAO,EAAEV,MAAM,CAACW;IAClB,CAAC;EACH,CAAC,CAAC;EAEF,MAAMC,SAAS,GAAGC,cAAc,CAACf,UAAU,EAAEC,eAAe,CAAC;EAE7D,OAAO;IACLE,iBAAiB;IACjBW;EACF,CAAC;AACH;AAEA,SAASC,cAAc,CAACf,UAAkB,EAAEC,eAAyC,EAAwB;EAC3G,OAAO,CACL;IACEe,IAAI,EAAE,UAAU;IAChBC,YAAY,EAAE,CAAE,GAAEjB,UAAW,YAAW,CAAC;IACzCC;EACF,CAAC,CACF;AACH"}