{"version":3,"names":["nodeEndpoint","nep","listeners","WeakMap","postMessage","bind","addEventListener","_","eh","l","data","handleEvent","on","set","removeEventListener","get","off","delete","start"],"sources":["node-endpoint.ts"],"sourcesContent":["function nodeEndpoint(nep) {\n  const listeners = new WeakMap();\n  return {\n    postMessage: nep.postMessage.bind(nep),\n    addEventListener: (_, eh) => {\n      const l = (data) => {\n        if ('handleEvent' in eh) {\n          eh.handleEvent({ data });\n        } else {\n          eh({ data });\n        }\n      };\n      nep.on('message', l);\n      listeners.set(eh, l);\n    },\n    removeEventListener: (_, eh) => {\n      const l = listeners.get(eh);\n      if (!l) {\n        return;\n      }\n      nep.off('message', l);\n      listeners.delete(eh);\n    },\n    start: nep.start && nep.start.bind(nep),\n  };\n}\n\nexport default nodeEndpoint;\n"],"mappings":";;;;;;;AAAA,SAASA,YAAY,CAACC,GAAG,EAAE;EACzB,MAAMC,SAAS,GAAG,IAAIC,OAAO,EAAE;EAC/B,OAAO;IACLC,WAAW,EAAEH,GAAG,CAACG,WAAW,CAACC,IAAI,CAACJ,GAAG,CAAC;IACtCK,gBAAgB,EAAE,CAACC,CAAC,EAAEC,EAAE,KAAK;MAC3B,MAAMC,CAAC,GAAIC,IAAI,IAAK;QAClB,IAAI,aAAa,IAAIF,EAAE,EAAE;UACvBA,EAAE,CAACG,WAAW,CAAC;YAAED;UAAK,CAAC,CAAC;QAC1B,CAAC,MAAM;UACLF,EAAE,CAAC;YAAEE;UAAK,CAAC,CAAC;QACd;MACF,CAAC;MACDT,GAAG,CAACW,EAAE,CAAC,SAAS,EAAEH,CAAC,CAAC;MACpBP,SAAS,CAACW,GAAG,CAACL,EAAE,EAAEC,CAAC,CAAC;IACtB,CAAC;IACDK,mBAAmB,EAAE,CAACP,CAAC,EAAEC,EAAE,KAAK;MAC9B,MAAMC,CAAC,GAAGP,SAAS,CAACa,GAAG,CAACP,EAAE,CAAC;MAC3B,IAAI,CAACC,CAAC,EAAE;QACN;MACF;MACAR,GAAG,CAACe,GAAG,CAAC,SAAS,EAAEP,CAAC,CAAC;MACrBP,SAAS,CAACe,MAAM,CAACT,EAAE,CAAC;IACtB,CAAC;IACDU,KAAK,EAAEjB,GAAG,CAACiB,KAAK,IAAIjB,GAAG,CAACiB,KAAK,CAACb,IAAI,CAACJ,GAAG;EACxC,CAAC;AACH;AAAC,eAEcD,YAAY;AAAA"}