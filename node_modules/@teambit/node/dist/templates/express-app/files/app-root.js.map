{"version":3,"names":["appRoot","context","relativePath","name","content"],"sources":["app-root.ts"],"sourcesContent":["import { ComponentContext } from '@teambit/generator';\n\nexport function appRoot(context: ComponentContext) {\n  return {\n    relativePath: `${context.name}.app-root.ts`,\n    content: `import Application from 'express';\nimport {getPort} from './get-port';\nimport {getMockRoute} from './mock-route';\n\nexport const expressApp = async () => {\n  const app = Application();\n  const port = await getPort();\n  registerRoutes(app);\n  app.listen(port, () => {\n    console.log(\\`${context.name} app listening on port \\${port}\\`);\n  });\n};\n\nfunction registerRoutes(app: Application.Application) {\n  const mockRoute = getMockRoute();\n  const routes = [mockRoute];\n  routes.forEach(route => {\n    app[route.method](route.route, route.middlewares);\n  })\n}\n\nexpressApp().catch(err => {\n  console.log('error from express', err);\n  process.exit(1);\n});\n`,\n  };\n}\n"],"mappings":";;;;;;AAEO,SAASA,OAAO,CAACC,OAAyB,EAAE;EACjD,OAAO;IACLC,YAAY,EAAG,GAAED,OAAO,CAACE,IAAK,cAAa;IAC3CC,OAAO,EAAG;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoBH,OAAO,CAACE,IAAK;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACE,CAAC;AACH"}