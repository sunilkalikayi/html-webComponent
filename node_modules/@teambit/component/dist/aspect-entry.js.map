{"version":3,"names":["AspectEntry","constructor","id","legacyEntry","legacy","isLegacy","config","__legacy","data","isRemoved","val","transform","newData","newEntry","clone","serialize","toString","icon"],"sources":["aspect-entry.ts"],"sourcesContent":["/**\n * avoid importing any (non-type) legacy code here. otherwise, PreviewTask will throw cryptic errors\n */\n\nimport type { ExtensionDataEntry } from '@teambit/legacy/dist/consumer/config/extension-data';\nimport { ComponentID } from '@teambit/component-id';\nimport { RawComponentMetadata } from './component-interface';\n\nexport type Serializable = {\n  toString(): string;\n};\n\nexport type SerializableMap = {\n  [key: string]: Serializable;\n};\n\nexport type AspectData = {\n  [key: string]: any;\n};\n\nexport type ResolveComponentIdFunc = (id: string) => Promise<ComponentID>;\nexport class AspectEntry {\n  constructor(public id: ComponentID, private legacyEntry: ExtensionDataEntry) {}\n\n  get legacy() {\n    return this.legacyEntry;\n  }\n\n  get isLegacy(): boolean {\n    if (this.config?.__legacy) return true;\n    return false;\n  }\n\n  get config() {\n    return this.legacy.config;\n  }\n\n  set config(config) {\n    this.legacy.config = config;\n  }\n\n  get data(): { [key: string]: any } {\n    return this.legacy.data;\n  }\n\n  get isRemoved(): boolean {\n    return this.legacy.isRemoved;\n  }\n\n  // eslint-disable-next-line @typescript-eslint/adjacent-overload-signatures\n  set data(val: { [key: string]: any }) {\n    this.legacy.data = val;\n  }\n\n  transform(newData: SerializableMap): AspectEntry {\n    const newEntry = this.clone();\n    newEntry.data = newData;\n    return new AspectEntry(this.id, newEntry.legacy);\n  }\n\n  clone(): AspectEntry {\n    return new AspectEntry(this.id, this.legacyEntry.clone());\n  }\n\n  serialize(): RawComponentMetadata {\n    return {\n      id: this.id.toString(),\n      config: this.config,\n      data: this.data,\n      icon: 'https://static.bit.dev/extensions-icons/default.svg', // TODO @gilad - once you connect the icon here please use this url as the default icon\n    };\n  }\n}\n"],"mappings":";;;;;;AAAA;AACA;AACA;;AAmBO,MAAMA,WAAW,CAAC;EACvBC,WAAW,CAAQC,EAAe,EAAUC,WAA+B,EAAE;IAAA,KAA1DD,EAAe,GAAfA,EAAe;IAAA,KAAUC,WAA+B,GAA/BA,WAA+B;EAAG;EAE9E,IAAIC,MAAM,GAAG;IACX,OAAO,IAAI,CAACD,WAAW;EACzB;EAEA,IAAIE,QAAQ,GAAY;IAAA;IACtB,oBAAI,IAAI,CAACC,MAAM,yCAAX,aAAaC,QAAQ,EAAE,OAAO,IAAI;IACtC,OAAO,KAAK;EACd;EAEA,IAAID,MAAM,GAAG;IACX,OAAO,IAAI,CAACF,MAAM,CAACE,MAAM;EAC3B;EAEA,IAAIA,MAAM,CAACA,MAAM,EAAE;IACjB,IAAI,CAACF,MAAM,CAACE,MAAM,GAAGA,MAAM;EAC7B;EAEA,IAAIE,IAAI,GAA2B;IACjC,OAAO,IAAI,CAACJ,MAAM,CAACI,IAAI;EACzB;EAEA,IAAIC,SAAS,GAAY;IACvB,OAAO,IAAI,CAACL,MAAM,CAACK,SAAS;EAC9B;;EAEA;EACA,IAAID,IAAI,CAACE,GAA2B,EAAE;IACpC,IAAI,CAACN,MAAM,CAACI,IAAI,GAAGE,GAAG;EACxB;EAEAC,SAAS,CAACC,OAAwB,EAAe;IAC/C,MAAMC,QAAQ,GAAG,IAAI,CAACC,KAAK,EAAE;IAC7BD,QAAQ,CAACL,IAAI,GAAGI,OAAO;IACvB,OAAO,IAAIZ,WAAW,CAAC,IAAI,CAACE,EAAE,EAAEW,QAAQ,CAACT,MAAM,CAAC;EAClD;EAEAU,KAAK,GAAgB;IACnB,OAAO,IAAId,WAAW,CAAC,IAAI,CAACE,EAAE,EAAE,IAAI,CAACC,WAAW,CAACW,KAAK,EAAE,CAAC;EAC3D;EAEAC,SAAS,GAAyB;IAChC,OAAO;MACLb,EAAE,EAAE,IAAI,CAACA,EAAE,CAACc,QAAQ,EAAE;MACtBV,MAAM,EAAE,IAAI,CAACA,MAAM;MACnBE,IAAI,EAAE,IAAI,CAACA,IAAI;MACfS,IAAI,EAAE,qDAAqD,CAAE;IAC/D,CAAC;EACH;AACF;AAAC"}