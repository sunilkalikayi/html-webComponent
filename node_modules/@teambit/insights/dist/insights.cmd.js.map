{"version":3,"names":["InsightsCmd","constructor","insights","report","names","options","list","results","json","JSON","stringify","runInsights","renderData","template","listInsights","elements","map","result","chalk","cyan","bold","message","renderedData","join"],"sources":["insights.cmd.ts"],"sourcesContent":["import chalk from 'chalk';\nimport { Command, CommandOptions } from '@teambit/cli';\nimport { InsightResult } from './insight';\nimport { InsightsMain } from './insights.main.runtime';\n\nexport default class InsightsCmd implements Command {\n  name = 'insights [names...]';\n  description = 'Insights on component graph';\n  group = 'development';\n  private = true;\n  options = [\n    ['l', 'list', 'list all insights'],\n    ['j', 'json', 'return the insights in json format'],\n  ] as CommandOptions;\n  constructor(private insights: InsightsMain) {}\n\n  async report([names]: [string[]], options: { list: boolean }): Promise<string> {\n    if (options.list) {\n      const results = await this.json([names], options);\n      return JSON.stringify(results, null, 2);\n    }\n    const results = await this.insights.runInsights(names, { renderData: true });\n    return template(results);\n  }\n\n  async json([names]: [string[]], { list }: { list: boolean }) {\n    if (list) {\n      const results = this.insights.listInsights();\n      return results;\n    }\n    return this.insights.runInsights(names, { renderData: false });\n  }\n}\n\nfunction template(results: InsightResult[]): string {\n  const elements = results\n    .map((result) => {\n      return `\\n${chalk.cyan.bold(result.message)}\n  ${result.renderedData}`;\n    })\n    .join('\\n');\n  return elements;\n}\n"],"mappings":";;;;;;;;;;;;;;;;AAAA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AAKe,MAAMA,WAAW,CAAoB;EASlDC,WAAW,CAASC,QAAsB,EAAE;IAAA,KAAxBA,QAAsB,GAAtBA,QAAsB;IAAA,8CARnC,qBAAqB;IAAA,qDACd,6BAA6B;IAAA,+CACnC,aAAa;IAAA,iDACX,IAAI;IAAA,iDACJ,CACR,CAAC,GAAG,EAAE,MAAM,EAAE,mBAAmB,CAAC,EAClC,CAAC,GAAG,EAAE,MAAM,EAAE,oCAAoC,CAAC,CACpD;EAC4C;EAE7C,MAAMC,MAAM,CAAC,CAACC,KAAK,CAAa,EAAEC,OAA0B,EAAmB;IAC7E,IAAIA,OAAO,CAACC,IAAI,EAAE;MAChB,MAAMC,OAAO,GAAG,MAAM,IAAI,CAACC,IAAI,CAAC,CAACJ,KAAK,CAAC,EAAEC,OAAO,CAAC;MACjD,OAAOI,IAAI,CAACC,SAAS,CAACH,OAAO,EAAE,IAAI,EAAE,CAAC,CAAC;IACzC;IACA,MAAMA,OAAO,GAAG,MAAM,IAAI,CAACL,QAAQ,CAACS,WAAW,CAACP,KAAK,EAAE;MAAEQ,UAAU,EAAE;IAAK,CAAC,CAAC;IAC5E,OAAOC,QAAQ,CAACN,OAAO,CAAC;EAC1B;EAEA,MAAMC,IAAI,CAAC,CAACJ,KAAK,CAAa,EAAE;IAAEE;EAAwB,CAAC,EAAE;IAC3D,IAAIA,IAAI,EAAE;MACR,MAAMC,OAAO,GAAG,IAAI,CAACL,QAAQ,CAACY,YAAY,EAAE;MAC5C,OAAOP,OAAO;IAChB;IACA,OAAO,IAAI,CAACL,QAAQ,CAACS,WAAW,CAACP,KAAK,EAAE;MAAEQ,UAAU,EAAE;IAAM,CAAC,CAAC;EAChE;AACF;AAAC;AAED,SAASC,QAAQ,CAACN,OAAwB,EAAU;EAClD,MAAMQ,QAAQ,GAAGR,OAAO,CACrBS,GAAG,CAAEC,MAAM,IAAK;IACf,OAAQ,KAAIC,gBAAK,CAACC,IAAI,CAACC,IAAI,CAACH,MAAM,CAACI,OAAO,CAAE;AAClD,IAAIJ,MAAM,CAACK,YAAa,EAAC;EACrB,CAAC,CAAC,CACDC,IAAI,CAAC,IAAI,CAAC;EACb,OAAOR,QAAQ;AACjB"}