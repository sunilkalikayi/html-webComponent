{"version":3,"names":["CompilerService","render","env","descriptor","getDescriptor","id","displayName","version","config","highlight","language","ignoreIllegals","getCompiler","undefined","compiler","icon","displayConfig"],"sources":["compiler.service.tsx"],"sourcesContent":["import React from 'react';\nimport { Text, Newline } from 'ink';\nimport { EnvService, EnvDefinition } from '@teambit/envs';\nimport highlight from 'cli-highlight';\n\nexport type CompilerDescriptor = {\n  id: string;\n  icon?: string;\n  config?: string;\n};\n\nexport class CompilerService implements EnvService<{}, CompilerDescriptor> {\n  name = 'Compile';\n\n  render(env: EnvDefinition) {\n    const descriptor = this.getDescriptor(env);\n\n    return (\n      <Text key={descriptor?.id}>\n        <Text color=\"cyan\">configured compiler: </Text>\n        <Text>\n          {descriptor?.id} ({descriptor?.displayName} @ {descriptor?.version})\n        </Text>\n        <Newline />\n        <Text color=\"cyan\">compiler config:</Text>\n        <Newline />\n        <Text>\n          {descriptor?.config && highlight(descriptor?.config, { language: 'javascript', ignoreIllegals: true })}\n        </Text>\n        <Newline />\n      </Text>\n    );\n  }\n\n  getDescriptor(env: EnvDefinition) {\n    if (!env.env.getCompiler) return undefined;\n    const compiler = env.env.getCompiler();\n\n    return {\n      id: compiler.id,\n      icon: compiler.icon,\n      config: compiler.displayConfig ? compiler.displayConfig() : undefined,\n      version: compiler.version ? compiler.version() : '?',\n      displayName: compiler.displayName ? compiler.displayName : '?',\n    };\n  }\n}\n"],"mappings":";;;;;;;;;;;;;;AAAA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AACA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AAEA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AAQO,MAAMA,eAAe,CAA+C;EAAA;IAAA,8CAClE,SAAS;EAAA;EAEhBC,MAAM,CAACC,GAAkB,EAAE;IACzB,MAAMC,UAAU,GAAG,IAAI,CAACC,aAAa,CAACF,GAAG,CAAC;IAE1C,oBACE,+BAAC,WAAI;MAAC,GAAG,EAAEC,UAAU,aAAVA,UAAU,uBAAVA,UAAU,CAAEE;IAAG,gBACxB,+BAAC,WAAI;MAAC,KAAK,EAAC;IAAM,2BAA6B,eAC/C,+BAAC,WAAI,QACFF,UAAU,aAAVA,UAAU,uBAAVA,UAAU,CAAEE,EAAE,QAAIF,UAAU,aAAVA,UAAU,uBAAVA,UAAU,CAAEG,WAAW,SAAKH,UAAU,aAAVA,UAAU,uBAAVA,UAAU,CAAEI,OAAO,MAC7D,eACP,+BAAC,cAAO,OAAG,eACX,+BAAC,WAAI;MAAC,KAAK,EAAC;IAAM,sBAAwB,eAC1C,+BAAC,cAAO,OAAG,eACX,+BAAC,WAAI,QACF,CAAAJ,UAAU,aAAVA,UAAU,uBAAVA,UAAU,CAAEK,MAAM,KAAI,IAAAC,uBAAS,EAACN,UAAU,aAAVA,UAAU,uBAAVA,UAAU,CAAEK,MAAM,EAAE;MAAEE,QAAQ,EAAE,YAAY;MAAEC,cAAc,EAAE;IAAK,CAAC,CAAC,CACjG,eACP,+BAAC,cAAO,OAAG,CACN;EAEX;EAEAP,aAAa,CAACF,GAAkB,EAAE;IAChC,IAAI,CAACA,GAAG,CAACA,GAAG,CAACU,WAAW,EAAE,OAAOC,SAAS;IAC1C,MAAMC,QAAQ,GAAGZ,GAAG,CAACA,GAAG,CAACU,WAAW,EAAE;IAEtC,OAAO;MACLP,EAAE,EAAES,QAAQ,CAACT,EAAE;MACfU,IAAI,EAAED,QAAQ,CAACC,IAAI;MACnBP,MAAM,EAAEM,QAAQ,CAACE,aAAa,GAAGF,QAAQ,CAACE,aAAa,EAAE,GAAGH,SAAS;MACrEN,OAAO,EAAEO,QAAQ,CAACP,OAAO,GAAGO,QAAQ,CAACP,OAAO,EAAE,GAAG,GAAG;MACpDD,WAAW,EAAEQ,QAAQ,CAACR,WAAW,GAAGQ,QAAQ,CAACR,WAAW,GAAG;IAC7D,CAAC;EACH;AACF;AAAC"}