{"version":3,"names":["classElementToSchema","node","context","kind","SyntaxKind","Constructor","constructor","PropertyDeclaration","propertyDeclaration","MethodDeclaration","methodDeclaration","GetAccessor","getAccessor","SetAccessor","setAccessor","IndexSignature","indexSignature","ClassStaticBlockDeclaration","SemicolonClassElement","Error","args","getParams","parameters","ConstructorSchema","getLocation","name","getText","info","getQuickInfo","displaySig","body","displayString","typeStr","parseTypeFromQuickInfo","type","resolveType","isOptional","Boolean","questionToken","doc","jsDocToDocSchema","VariableLikeSchema","toFunctionLikeSchema"],"sources":["class-element-to-schema.ts"],"sourcesContent":["import {\n  ClassElement,\n  ConstructorDeclaration,\n  GetAccessorDeclaration,\n  IndexSignatureDeclaration,\n  MethodDeclaration,\n  PropertyDeclaration,\n  SetAccessorDeclaration,\n  SyntaxKind,\n} from 'typescript';\nimport { ConstructorSchema, SchemaNode, VariableLikeSchema } from '@teambit/semantics.entities.semantic-schema';\nimport { SchemaExtractorContext } from '../../schema-extractor-context';\nimport { getParams } from './get-params';\nimport { getAccessor, indexSignature, setAccessor } from './type-element-to-schema';\nimport { parseTypeFromQuickInfo } from './parse-type-from-quick-info';\nimport { toFunctionLikeSchema } from './to-function-like-schema';\nimport { jsDocToDocSchema } from './jsdoc-to-doc-schema';\n\nexport async function classElementToSchema(\n  node: ClassElement,\n  context: SchemaExtractorContext\n): Promise<SchemaNode | null> {\n  switch (node.kind) {\n    case SyntaxKind.Constructor:\n      return constructor(node as ConstructorDeclaration, context);\n    case SyntaxKind.PropertyDeclaration:\n      return propertyDeclaration(node as PropertyDeclaration, context);\n    case SyntaxKind.MethodDeclaration:\n      return methodDeclaration(node as MethodDeclaration, context);\n    case SyntaxKind.GetAccessor:\n      return getAccessor(node as GetAccessorDeclaration, context);\n    case SyntaxKind.SetAccessor:\n      return setAccessor(node as SetAccessorDeclaration, context);\n    case SyntaxKind.IndexSignature:\n      return indexSignature(node as IndexSignatureDeclaration, context);\n    case SyntaxKind.ClassStaticBlockDeclaration: // not sure what is it, but the name sounds like not something we need\n    case SyntaxKind.SemicolonClassElement: // seems to be just a semicolon\n      return null;\n    default:\n      // should never be here unless typescript added new class elements\n      throw new Error(`unrecognized ClassElement type. got ${node.kind}`);\n  }\n}\n\nasync function constructor(node: ConstructorDeclaration, context: SchemaExtractorContext) {\n  const args = await getParams(node.parameters, context);\n  return new ConstructorSchema(context.getLocation(node), args);\n}\n\nasync function propertyDeclaration(node: PropertyDeclaration, context: SchemaExtractorContext) {\n  const name = node.name.getText();\n  const info = await context.getQuickInfo(node.name);\n  const displaySig = info?.body?.displayString;\n  const typeStr = parseTypeFromQuickInfo(info);\n  const type = await context.resolveType(node, typeStr);\n  const isOptional = Boolean(node.questionToken);\n  const doc = await jsDocToDocSchema(node, context);\n  return new VariableLikeSchema(context.getLocation(node), name, displaySig || '', type, isOptional, doc);\n}\n\nasync function methodDeclaration(node: MethodDeclaration, context: SchemaExtractorContext) {\n  return toFunctionLikeSchema(node, context);\n}\n"],"mappings":";;;;;;;AAAA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AAUA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AAEA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AACA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AACA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AACA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AACA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AAEO,eAAeA,oBAAoB,CACxCC,IAAkB,EAClBC,OAA+B,EACH;EAC5B,QAAQD,IAAI,CAACE,IAAI;IACf,KAAKC,wBAAU,CAACC,WAAW;MACzB,OAAOC,WAAW,CAACL,IAAI,EAA4BC,OAAO,CAAC;IAC7D,KAAKE,wBAAU,CAACG,mBAAmB;MACjC,OAAOC,mBAAmB,CAACP,IAAI,EAAyBC,OAAO,CAAC;IAClE,KAAKE,wBAAU,CAACK,iBAAiB;MAC/B,OAAOC,iBAAiB,CAACT,IAAI,EAAuBC,OAAO,CAAC;IAC9D,KAAKE,wBAAU,CAACO,WAAW;MACzB,OAAO,IAAAC,kCAAW,EAACX,IAAI,EAA4BC,OAAO,CAAC;IAC7D,KAAKE,wBAAU,CAACS,WAAW;MACzB,OAAO,IAAAC,kCAAW,EAACb,IAAI,EAA4BC,OAAO,CAAC;IAC7D,KAAKE,wBAAU,CAACW,cAAc;MAC5B,OAAO,IAAAC,qCAAc,EAACf,IAAI,EAA+BC,OAAO,CAAC;IACnE,KAAKE,wBAAU,CAACa,2BAA2B,CAAC,CAAC;IAC7C,KAAKb,wBAAU,CAACc,qBAAqB;MAAE;MACrC,OAAO,IAAI;IACb;MACE;MACA,MAAM,IAAIC,KAAK,CAAE,uCAAsClB,IAAI,CAACE,IAAK,EAAC,CAAC;EAAC;AAE1E;AAEA,eAAeG,WAAW,CAACL,IAA4B,EAAEC,OAA+B,EAAE;EACxF,MAAMkB,IAAI,GAAG,MAAM,IAAAC,sBAAS,EAACpB,IAAI,CAACqB,UAAU,EAAEpB,OAAO,CAAC;EACtD,OAAO,KAAIqB,sCAAiB,EAACrB,OAAO,CAACsB,WAAW,CAACvB,IAAI,CAAC,EAAEmB,IAAI,CAAC;AAC/D;AAEA,eAAeZ,mBAAmB,CAACP,IAAyB,EAAEC,OAA+B,EAAE;EAAA;EAC7F,MAAMuB,IAAI,GAAGxB,IAAI,CAACwB,IAAI,CAACC,OAAO,EAAE;EAChC,MAAMC,IAAI,GAAG,MAAMzB,OAAO,CAAC0B,YAAY,CAAC3B,IAAI,CAACwB,IAAI,CAAC;EAClD,MAAMI,UAAU,GAAGF,IAAI,aAAJA,IAAI,qCAAJA,IAAI,CAAEG,IAAI,+CAAV,WAAYC,aAAa;EAC5C,MAAMC,OAAO,GAAG,IAAAC,gDAAsB,EAACN,IAAI,CAAC;EAC5C,MAAMO,IAAI,GAAG,MAAMhC,OAAO,CAACiC,WAAW,CAAClC,IAAI,EAAE+B,OAAO,CAAC;EACrD,MAAMI,UAAU,GAAGC,OAAO,CAACpC,IAAI,CAACqC,aAAa,CAAC;EAC9C,MAAMC,GAAG,GAAG,MAAM,IAAAC,oCAAgB,EAACvC,IAAI,EAAEC,OAAO,CAAC;EACjD,OAAO,KAAIuC,uCAAkB,EAACvC,OAAO,CAACsB,WAAW,CAACvB,IAAI,CAAC,EAAEwB,IAAI,EAAEI,UAAU,IAAI,EAAE,EAAEK,IAAI,EAAEE,UAAU,EAAEG,GAAG,CAAC;AACzG;AAEA,eAAe7B,iBAAiB,CAACT,IAAuB,EAAEC,OAA+B,EAAE;EACzF,OAAO,IAAAwC,4CAAoB,EAACzC,IAAI,EAAEC,OAAO,CAAC;AAC5C"}