{"version":3,"names":["typeElementToSchema","node","context","kind","SyntaxKind","MethodSignature","toFunctionLikeSchema","ConstructSignature","CallSignature","callSignature","PropertySignature","propertySignature","IndexSignature","indexSignature","GetAccessor","getAccessor","SetAccessor","setAccessor","Error","name","getText","info","isComputedPropertyName","undefined","getQuickInfo","displaySig","body","displayString","typeStr","parseTypeFromQuickInfo","type","resolveType","isOptional","Boolean","questionToken","doc","jsDocToDocSchema","VariableLikeSchema","getLocation","params","getParams","parameters","typeNodeToSchema","IndexSignatureSchema","GetAccessorSchema","getQuickInfoDisplayString","SetAccessorSchema"],"sources":["type-element-to-schema.ts"],"sourcesContent":["import ts, {\n  SyntaxKind,\n  TypeElement,\n  MethodSignature,\n  isComputedPropertyName,\n  IndexSignatureDeclaration,\n  GetAccessorDeclaration,\n  SetAccessorDeclaration,\n  ConstructSignatureDeclaration,\n  CallSignatureDeclaration,\n} from 'typescript';\nimport {\n  GetAccessorSchema,\n  IndexSignatureSchema,\n  SchemaNode,\n  SetAccessorSchema,\n  VariableLikeSchema,\n} from '@teambit/semantics.entities.semantic-schema';\nimport { toFunctionLikeSchema } from './to-function-like-schema';\nimport { SchemaExtractorContext } from '../../schema-extractor-context';\nimport { parseTypeFromQuickInfo } from './parse-type-from-quick-info';\nimport { typeNodeToSchema } from './type-node-to-schema';\nimport { getParams } from './get-params';\nimport { jsDocToDocSchema } from './jsdoc-to-doc-schema';\n\nexport async function typeElementToSchema(node: TypeElement, context: SchemaExtractorContext): Promise<SchemaNode> {\n  switch (node.kind) {\n    case SyntaxKind.MethodSignature:\n      return toFunctionLikeSchema(node as MethodSignature, context);\n    case SyntaxKind.ConstructSignature:\n      return toFunctionLikeSchema(node as ConstructSignatureDeclaration, context, 'new');\n    case SyntaxKind.CallSignature:\n      return callSignature(node as CallSignatureDeclaration, context);\n    case SyntaxKind.PropertySignature:\n      return propertySignature(node as ts.PropertySignature, context);\n    case SyntaxKind.IndexSignature:\n      return indexSignature(node as IndexSignatureDeclaration, context);\n    case SyntaxKind.GetAccessor:\n      return getAccessor(node as GetAccessorDeclaration, context);\n    case SyntaxKind.SetAccessor:\n      return setAccessor(node as SetAccessorDeclaration, context);\n    default:\n      throw new Error(`typeElementToSchema expect type-element node. got ${node.kind}`);\n  }\n}\n\nasync function propertySignature(node: ts.PropertySignature, context: SchemaExtractorContext) {\n  const name = node.name.getText();\n  const info = isComputedPropertyName(node.name) ? undefined : await context.getQuickInfo(node.name);\n  const displaySig = info?.body?.displayString || '';\n  const typeStr = parseTypeFromQuickInfo(info);\n  const type = await context.resolveType(node, typeStr);\n  const isOptional = Boolean(node.questionToken);\n  const doc = await jsDocToDocSchema(node, context);\n  return new VariableLikeSchema(context.getLocation(node), name, displaySig, type, isOptional, doc);\n}\n\nexport async function indexSignature(node: IndexSignatureDeclaration, context: SchemaExtractorContext) {\n  const params = await getParams(node.parameters, context);\n  const type = await typeNodeToSchema(node.type, context);\n  return new IndexSignatureSchema(context.getLocation(node), params, type);\n}\n\nexport async function getAccessor(node: GetAccessorDeclaration, context: SchemaExtractorContext) {\n  const info = await context.getQuickInfo(node.name);\n  const displaySig = info?.body?.displayString || '';\n  const typeStr = parseTypeFromQuickInfo(info);\n  const type = await context.resolveType(node, typeStr);\n  return new GetAccessorSchema(context.getLocation(node), node.name.getText(), type, displaySig);\n}\n\nexport async function setAccessor(node: SetAccessorDeclaration, context: SchemaExtractorContext) {\n  const params = await getParams(node.parameters, context);\n  const displaySig = await context.getQuickInfoDisplayString(node.name);\n  return new SetAccessorSchema(context.getLocation(node), node.name.getText(), params[0], displaySig);\n}\n\nasync function callSignature(node: CallSignatureDeclaration, context: SchemaExtractorContext) {\n  return toFunctionLikeSchema(node, context);\n}\n"],"mappings":"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"}