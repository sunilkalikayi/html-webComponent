import { ResolveModulesConfig } from '@teambit/legacy/dist/consumer/component/dependencies/files-dependency-builder/types/dependency-tree-type';
import { AbstractVinyl } from '@teambit/legacy/dist/consumer/component/sources';
import { ExtensionDataList, ILegacyWorkspaceConfig } from '@teambit/legacy/dist/consumer/config';
import LegacyWorkspaceConfig, { WorkspaceConfigProps as LegacyWorkspaceConfigProps } from '@teambit/legacy/dist/consumer/config/workspace-config';
import { PathOsBased, PathOsBasedAbsolute } from '@teambit/legacy/dist/utils/path';
import { CommentJSONValue } from 'comment-json';
import { SetExtensionOptions } from './config.main.runtime';
import { HostConfig } from './types';
export declare type LegacyInitProps = {
    standAlone?: boolean;
};
export declare type WorkspaceConfigFileProps = {
    $schema?: string;
    $schemaVersion?: string;
} & ExtensionsDefs;
export declare type ComponentScopeDirMapEntry = {
    defaultScope?: string;
    directory: string;
};
export declare type ComponentScopeDirMap = Array<ComponentScopeDirMapEntry>;
export declare type WorkspaceExtensionProps = {
    defaultOwner?: string;
    defaultScope?: string;
    defaultDirectory?: string;
    components?: ComponentScopeDirMap;
};
export declare type PackageManagerClients = 'npm' | 'yarn' | undefined;
export interface DependencyResolverExtensionProps {
    packageManager: PackageManagerClients;
    strictPeerDependencies?: boolean;
    extraArgs?: string[];
    packageManagerProcessOptions?: any;
    useWorkspaces?: boolean;
    manageWorkspaces?: boolean;
}
export declare type WorkspaceSettingsNewProps = {
    'teambit.workspace/workspace': WorkspaceExtensionProps;
    'teambit.dependencies/dependency-resolver': DependencyResolverExtensionProps;
};
export declare type WorkspaceLegacyProps = {
    dependenciesDirectory?: string;
    bindingPrefix?: string;
    resolveModules?: ResolveModulesConfig;
    saveDependenciesAsComponents?: boolean;
};
export declare type ExtensionsDefs = WorkspaceSettingsNewProps;
export declare class WorkspaceConfig implements HostConfig {
    private data?;
    private legacyConfig?;
    raw?: any;
    _path?: string;
    _extensions: ExtensionDataList;
    _legacyProps?: WorkspaceLegacyProps;
    isLegacy: boolean;
    constructor(data?: WorkspaceConfigFileProps | undefined, legacyConfig?: LegacyWorkspaceConfig | undefined);
    get path(): PathOsBased;
    set path(configPath: PathOsBased);
    get extensions(): ExtensionDataList;
    private loadExtensions;
    extension(extensionId: string, ignoreVersion: boolean): any;
    setExtension(extensionId: string, config: Record<string, any>, options: SetExtensionOptions): any;
    renameExtensionInRaw(oldExtId: string, newExtId: string): boolean;
    /**
     * Create an instance of the WorkspaceConfig by an instance of the legacy config
     *
     * @static
     * @param {*} legacyConfig
     * @returns
     * @memberof WorkspaceConfig
     */
    static fromLegacyConfig(legacyConfig: any): WorkspaceConfig;
    /**
     * Create an instance of the WorkspaceConfig by data
     *
     * @static
     * @param {WorkspaceConfigFileProps} data
     * @returns
     * @memberof WorkspaceConfig
     */
    static fromObject(data: WorkspaceConfigFileProps): WorkspaceConfig;
    /**
     * Create an instance of the WorkspaceConfig by the workspace config template and override values
     *
     * @static
     * @param {WorkspaceConfigFileProps} data values to override in the default template
     * @returns
     * @memberof WorkspaceConfig
     */
    static create(props: WorkspaceConfigFileProps, dirPath?: PathOsBasedAbsolute): Promise<WorkspaceConfig>;
    /**
     * Ensure the given directory has a workspace config
     * Load if existing and create new if not
     *
     * @static
     * @param {PathOsBasedAbsolute} dirPath
     * @param {WorkspaceConfigFileProps} [workspaceConfigProps={} as any]
     * @returns {Promise<WorkspaceConfig>}
     * @memberof WorkspaceConfig
     */
    static ensure(dirPath: PathOsBasedAbsolute, workspaceConfigProps?: WorkspaceConfigFileProps): Promise<WorkspaceConfig>;
    /**
     * A function that register to the legacy ensure function in order to transform old props structure
     * to the new one
     * @param dirPath
     * @param standAlone
     * @param legacyWorkspaceConfigProps
     */
    static onLegacyEnsure(dirPath: PathOsBasedAbsolute, standAlone: boolean, legacyWorkspaceConfigProps?: LegacyWorkspaceConfigProps): Promise<WorkspaceConfig>;
    static reset(dirPath: PathOsBasedAbsolute, resetHard: boolean): Promise<void>;
    /**
     * Get the path of the bit.jsonc file by a containing folder
     *
     * @static
     * @param {PathOsBased} dirPath containing dir of the bit.jsonc file
     * @returns {PathOsBased}
     * @memberof WorkspaceConfig
     */
    static composeWorkspaceJsoncPath(dirPath: PathOsBased): PathOsBased;
    static pathHasWorkspaceJsonc(dirPath: PathOsBased): Promise<boolean>;
    /**
     * Check if the given dir has workspace config (new or legacy)
     * @param dirPath
     */
    static isExist(dirPath: PathOsBased): Promise<boolean | undefined>;
    /**
     * Load the workspace configuration if it's exist
     *
     * @static
     * @param {PathOsBased} dirPath
     * @returns {(Promise<WorkspaceConfig | undefined>)}
     * @memberof WorkspaceConfig
     */
    static loadIfExist(dirPath: PathOsBased): Promise<WorkspaceConfig | undefined>;
    static _loadFromWorkspaceJsonc(workspaceJsoncPath: PathOsBased): Promise<WorkspaceConfig>;
    write({ dir }?: {
        dir?: PathOsBasedAbsolute;
    }): Promise<void>;
    toVinyl(workspaceDir: PathOsBasedAbsolute): Promise<AbstractVinyl[] | undefined>;
    _legacyPlainObject(): {
        [prop: string]: any;
    } | undefined;
    toLegacy(): ILegacyWorkspaceConfig;
}
export declare function transformLegacyPropsToExtensions(legacyConfig: LegacyWorkspaceConfig | LegacyWorkspaceConfigProps): ExtensionsDefs;
export declare function getWorkspaceConfigTemplateParsed(): Promise<CommentJSONValue>;
export declare function stringifyWorkspaceConfig(workspaceConfig: CommentJSONValue): string;
