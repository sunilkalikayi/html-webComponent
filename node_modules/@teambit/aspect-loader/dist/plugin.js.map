{"version":3,"names":["Plugin","constructor","def","path","supportsRuntime","runtime","runtimes","includes","register","sourceAspect","object","require","_instance","default"],"sources":["plugin.ts"],"sourcesContent":["import { Aspect } from '@teambit/harmony';\nimport { PluginDefinition } from './plugin-definition';\n\nexport class Plugin {\n  constructor(readonly def: PluginDefinition, readonly path: string) {}\n\n  // consider adding a more abstract type here to allow users to ask for dependencies.\n  private _instance: undefined | unknown;\n\n  /**\n   * determines whether the plugin supports a certain runtime.\n   */\n  supportsRuntime(runtime: string) {\n    return this.def.runtimes.includes(runtime);\n  }\n\n  register(sourceAspect: Aspect) {\n    const object = this.require();\n    this.def.register<unknown>(object, sourceAspect);\n  }\n\n  require() {\n    // eslint-disable-next-line global-require, import/no-dynamic-require\n    this._instance = require(this.path).default;\n    return this._instance;\n  }\n}\n"],"mappings":";;;;;;;;;;;;;;AAGO,MAAMA,MAAM,CAAC;EAClBC,WAAW,CAAUC,GAAqB,EAAWC,IAAY,EAAE;IAAA,KAA9CD,GAAqB,GAArBA,GAAqB;IAAA,KAAWC,IAAY,GAAZA,IAAY;IAAA;EAAG;;EAEpE;;EAGA;AACF;AACA;EACEC,eAAe,CAACC,OAAe,EAAE;IAC/B,OAAO,IAAI,CAACH,GAAG,CAACI,QAAQ,CAACC,QAAQ,CAACF,OAAO,CAAC;EAC5C;EAEAG,QAAQ,CAACC,YAAoB,EAAE;IAC7B,MAAMC,MAAM,GAAG,IAAI,CAACC,OAAO,EAAE;IAC7B,IAAI,CAACT,GAAG,CAACM,QAAQ,CAAUE,MAAM,EAAED,YAAY,CAAC;EAClD;EAEAE,OAAO,GAAG;IACR;IACA,IAAI,CAACC,SAAS,GAAGD,OAAO,CAAC,IAAI,CAACR,IAAI,CAAC,CAACU,OAAO;IAC3C,OAAO,IAAI,CAACD,SAAS;EACvB;AACF;AAAC"}