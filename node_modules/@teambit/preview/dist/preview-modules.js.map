{"version":3,"names":["PreviewModules","Map","Set","set","id","preview","onSet","forEach","callback","loadComponentPreviews","compId","previews","Object","entries","previewName","moduleFile","get","componentMap","PREVIEW_MODULES","linkModules","previewModule"],"sources":["preview-modules.tsx"],"sourcesContent":["import type { PreviewModule, ModuleFile } from './types/preview-module';\n\ntype ModuleId = string;\n\nexport class PreviewModules extends Map<ModuleId, PreviewModule> {\n  onSet = new Set<() => void>();\n\n  override set(id: ModuleId, preview: PreviewModule) {\n    super.set(id, preview);\n    this.onSet.forEach((callback) => callback());\n    return this;\n  }\n\n  loadComponentPreviews(compId: string, previews: Record<string, ModuleFile[]>) {\n    Object.entries(previews).forEach(([previewName, moduleFile]) => {\n      const preview = this.get(previewName);\n      if (!preview) return; // TODO - ok for now\n\n      preview.componentMap[compId] = moduleFile;\n    });\n  }\n}\n\nexport const PREVIEW_MODULES = new PreviewModules();\n\nexport function linkModules(previewName: string, previewModule: PreviewModule) {\n  PREVIEW_MODULES.set(previewName, previewModule);\n}\n"],"mappings":";;;;;;;;;;;;;;;;AAIO,MAAMA,cAAc,SAASC,GAAG,CAA0B;EAAA;IAAA;IAAA,+CACvD,IAAIC,GAAG,EAAc;EAAA;EAEpBC,GAAG,CAACC,EAAY,EAAEC,OAAsB,EAAE;IACjD,KAAK,CAACF,GAAG,CAACC,EAAE,EAAEC,OAAO,CAAC;IACtB,IAAI,CAACC,KAAK,CAACC,OAAO,CAAEC,QAAQ,IAAKA,QAAQ,EAAE,CAAC;IAC5C,OAAO,IAAI;EACb;EAEAC,qBAAqB,CAACC,MAAc,EAAEC,QAAsC,EAAE;IAC5EC,MAAM,CAACC,OAAO,CAACF,QAAQ,CAAC,CAACJ,OAAO,CAAC,CAAC,CAACO,WAAW,EAAEC,UAAU,CAAC,KAAK;MAC9D,MAAMV,OAAO,GAAG,IAAI,CAACW,GAAG,CAACF,WAAW,CAAC;MACrC,IAAI,CAACT,OAAO,EAAE,OAAO,CAAC;;MAEtBA,OAAO,CAACY,YAAY,CAACP,MAAM,CAAC,GAAGK,UAAU;IAC3C,CAAC,CAAC;EACJ;AACF;AAAC;AAEM,MAAMG,eAAe,GAAG,IAAIlB,cAAc,EAAE;AAAC;AAE7C,SAASmB,WAAW,CAACL,WAAmB,EAAEM,aAA4B,EAAE;EAC7EF,eAAe,CAACf,GAAG,CAACW,WAAW,EAAEM,aAAa,CAAC;AACjD"}