{"version":3,"names":["generateComponentLink","modules","links","map","prefix","paths","name","entries","path","idx","toWindowsCompatiblePath","linkName","importStr","join","exportsString","entry","exportsMetadataString","filter","mod","metadata","JSON","stringify"],"sources":["generate-component-link.ts"],"sourcesContent":["import { toWindowsCompatiblePath } from '@teambit/toolbox.path.to-windows-compatible-path';\n\nexport type ModuleVar = {\n  prefix: string;\n  paths: string[];\n  metadata?: unknown;\n};\n\nexport function generateComponentLink(modules: ModuleVar[]): string {\n  const links = modules.map(({ prefix, paths }) => ({\n    name: prefix,\n    entries: paths.map((path, idx) => ({\n      path: toWindowsCompatiblePath(path),\n      linkName: `${prefix}_${idx}`,\n    })),\n  }));\n\n  // import per preview file\n  const importStr: string = links\n    .map(({ entries }) => entries.map(({ path, linkName }) => `import * as ${linkName} from '${path}'`).join(';\\n'))\n    .join(';\\n');\n\n  // export files group per preview\n  const exportsString: string = links\n    .map(({ name, entries }) => `export const ${name} = [${entries.map((entry) => entry.linkName).join(', ')}]`)\n    .join(';\\n');\n\n  const exportsMetadataString: string = modules\n    .filter((mod) => mod.metadata)\n    .map((mod) => `export const ${mod.prefix}_metadata = ${JSON.stringify(mod.metadata)}`)\n    .join(';\\n');\n\n  return `${importStr};\n\n${exportsString};\n\n${exportsMetadataString};\n`;\n}\n"],"mappings":";;;;;;;AAAA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AAQO,SAASA,qBAAqB,CAACC,OAAoB,EAAU;EAClE,MAAMC,KAAK,GAAGD,OAAO,CAACE,GAAG,CAAC,CAAC;IAAEC,MAAM;IAAEC;EAAM,CAAC,MAAM;IAChDC,IAAI,EAAEF,MAAM;IACZG,OAAO,EAAEF,KAAK,CAACF,GAAG,CAAC,CAACK,IAAI,EAAEC,GAAG,MAAM;MACjCD,IAAI,EAAE,IAAAE,sCAAuB,EAACF,IAAI,CAAC;MACnCG,QAAQ,EAAG,GAAEP,MAAO,IAAGK,GAAI;IAC7B,CAAC,CAAC;EACJ,CAAC,CAAC,CAAC;;EAEH;EACA,MAAMG,SAAiB,GAAGV,KAAK,CAC5BC,GAAG,CAAC,CAAC;IAAEI;EAAQ,CAAC,KAAKA,OAAO,CAACJ,GAAG,CAAC,CAAC;IAAEK,IAAI;IAAEG;EAAS,CAAC,KAAM,eAAcA,QAAS,UAASH,IAAK,GAAE,CAAC,CAACK,IAAI,CAAC,KAAK,CAAC,CAAC,CAC/GA,IAAI,CAAC,KAAK,CAAC;;EAEd;EACA,MAAMC,aAAqB,GAAGZ,KAAK,CAChCC,GAAG,CAAC,CAAC;IAAEG,IAAI;IAAEC;EAAQ,CAAC,KAAM,gBAAeD,IAAK,OAAMC,OAAO,CAACJ,GAAG,CAAEY,KAAK,IAAKA,KAAK,CAACJ,QAAQ,CAAC,CAACE,IAAI,CAAC,IAAI,CAAE,GAAE,CAAC,CAC3GA,IAAI,CAAC,KAAK,CAAC;EAEd,MAAMG,qBAA6B,GAAGf,OAAO,CAC1CgB,MAAM,CAAEC,GAAG,IAAKA,GAAG,CAACC,QAAQ,CAAC,CAC7BhB,GAAG,CAAEe,GAAG,IAAM,gBAAeA,GAAG,CAACd,MAAO,eAAcgB,IAAI,CAACC,SAAS,CAACH,GAAG,CAACC,QAAQ,CAAE,EAAC,CAAC,CACrFN,IAAI,CAAC,KAAK,CAAC;EAEd,OAAQ,GAAED,SAAU;AACtB;AACA,EAAEE,aAAc;AAChB;AACA,EAAEE,qBAAsB;AACxB,CAAC;AACD"}