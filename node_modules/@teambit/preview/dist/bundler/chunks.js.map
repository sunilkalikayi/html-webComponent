{"version":3,"names":["CHUNK_NAMES","previewRoot","peers","generateTemplateEntries","options","previewChunks","previewModules","forEach","name","entry","include","dependOn","import","previewRootPath"],"sources":["chunks.ts"],"sourcesContent":["import type { BundlerEntryMap } from '@teambit/bundler';\n\n// TODO - we can remove the need to depenedOn preview-root, if we output chunks as \"jsonp\".\n//\n// for example:\n//  config.entry.someJsonpChunk = {\n//    import: \"./xxx\",\n//    library: { type: \"jsonp\", name: \"foobar\" }\n//  }\n// will result in this output:\n//  foobar(() => { ...; return MODULE })\n\nexport const CHUNK_NAMES = {\n  previewRoot: 'preview-root',\n  peers: 'peers',\n};\n\ntype TemplateEntryOptions = {\n  previewRootPath: string;\n  peers: string | string[];\n  previewModules: {\n    name: string;\n    entry: string;\n    /** other preview modules to includes */\n    include?: string[];\n  }[];\n};\n\nexport function generateTemplateEntries(options: TemplateEntryOptions): BundlerEntryMap {\n  const previewChunks = {};\n  options.previewModules.forEach(({ name, entry, include = [] }) => {\n    previewChunks[name] = {\n      dependOn: [CHUNK_NAMES.peers, CHUNK_NAMES.previewRoot, ...include],\n      import: entry,\n    };\n  });\n\n  return {\n    [CHUNK_NAMES.peers]: options.peers,\n    [CHUNK_NAMES.previewRoot]: {\n      dependOn: [CHUNK_NAMES.peers],\n      import: options.previewRootPath,\n    },\n    ...previewChunks,\n  };\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEO,MAAMA,WAAW,GAAG;EACzBC,WAAW,EAAE,cAAc;EAC3BC,KAAK,EAAE;AACT,CAAC;AAAC;AAaK,SAASC,uBAAuB,CAACC,OAA6B,EAAmB;EACtF,MAAMC,aAAa,GAAG,CAAC,CAAC;EACxBD,OAAO,CAACE,cAAc,CAACC,OAAO,CAAC,CAAC;IAAEC,IAAI;IAAEC,KAAK;IAAEC,OAAO,GAAG;EAAG,CAAC,KAAK;IAChEL,aAAa,CAACG,IAAI,CAAC,GAAG;MACpBG,QAAQ,EAAE,CAACX,WAAW,CAACE,KAAK,EAAEF,WAAW,CAACC,WAAW,EAAE,GAAGS,OAAO,CAAC;MAClEE,MAAM,EAAEH;IACV,CAAC;EACH,CAAC,CAAC;EAEF;IACE,CAACT,WAAW,CAACE,KAAK,GAAGE,OAAO,CAACF,KAAK;IAClC,CAACF,WAAW,CAACC,WAAW,GAAG;MACzBU,QAAQ,EAAE,CAACX,WAAW,CAACE,KAAK,CAAC;MAC7BU,MAAM,EAAER,OAAO,CAACS;IAClB;EAAC,GACER,aAAa;AAEpB"}