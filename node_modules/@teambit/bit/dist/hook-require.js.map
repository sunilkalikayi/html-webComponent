{"version":3,"names":["hookRequire","module","constructor","prototype","require","id","Error","endsWith","_load","firstErr","code","pkgJson","path","join","main","err"],"sources":["hook-require.ts"],"sourcesContent":["import path from 'path';\n\nexport function hookRequire() {\n  module.constructor.prototype.require = function (id: string) {\n    if (typeof id !== 'string') throw new Error('hookRequire - id must be a string');\n    if (!id) throw new Error('hookRequire - missing id');\n\n    // TODO: this should be refactored away to be handled by the dev.\n    if (id.endsWith('.scss') || id.endsWith('.css') || id.endsWith('.less') || id === 'reset-css') {\n      return {};\n    }\n\n    // This is a workaround for the issue described here: https://github.com/nodejs/node/issues/44663\n    try {\n      return this.constructor._load(id, this);\n    } catch (firstErr: any) {\n      if (firstErr.code !== 'MODULE_NOT_FOUND') {\n        throw firstErr;\n      }\n      try {\n        const pkgJson = this.constructor._load(path.join(id, 'package.json'), this);\n        if (!pkgJson.main || pkgJson.main === 'index.js') throw firstErr;\n        return this.constructor._load(path.join(id, pkgJson.main), this);\n      } catch (err) {\n        throw firstErr;\n      }\n    }\n  };\n}\n\nhookRequire();\n"],"mappings":";;;;;;;AAAA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AAEO,SAASA,WAAW,GAAG;EAC5BC,MAAM,CAACC,WAAW,CAACC,SAAS,CAACC,OAAO,GAAG,UAAUC,EAAU,EAAE;IAC3D,IAAI,OAAOA,EAAE,KAAK,QAAQ,EAAE,MAAM,IAAIC,KAAK,CAAC,mCAAmC,CAAC;IAChF,IAAI,CAACD,EAAE,EAAE,MAAM,IAAIC,KAAK,CAAC,0BAA0B,CAAC;;IAEpD;IACA,IAAID,EAAE,CAACE,QAAQ,CAAC,OAAO,CAAC,IAAIF,EAAE,CAACE,QAAQ,CAAC,MAAM,CAAC,IAAIF,EAAE,CAACE,QAAQ,CAAC,OAAO,CAAC,IAAIF,EAAE,KAAK,WAAW,EAAE;MAC7F,OAAO,CAAC,CAAC;IACX;;IAEA;IACA,IAAI;MACF,OAAO,IAAI,CAACH,WAAW,CAACM,KAAK,CAACH,EAAE,EAAE,IAAI,CAAC;IACzC,CAAC,CAAC,OAAOI,QAAa,EAAE;MACtB,IAAIA,QAAQ,CAACC,IAAI,KAAK,kBAAkB,EAAE;QACxC,MAAMD,QAAQ;MAChB;MACA,IAAI;QACF,MAAME,OAAO,GAAG,IAAI,CAACT,WAAW,CAACM,KAAK,CAACI,eAAI,CAACC,IAAI,CAACR,EAAE,EAAE,cAAc,CAAC,EAAE,IAAI,CAAC;QAC3E,IAAI,CAACM,OAAO,CAACG,IAAI,IAAIH,OAAO,CAACG,IAAI,KAAK,UAAU,EAAE,MAAML,QAAQ;QAChE,OAAO,IAAI,CAACP,WAAW,CAACM,KAAK,CAACI,eAAI,CAACC,IAAI,CAACR,EAAE,EAAEM,OAAO,CAACG,IAAI,CAAC,EAAE,IAAI,CAAC;MAClE,CAAC,CAAC,OAAOC,GAAG,EAAE;QACZ,MAAMN,QAAQ;MAChB;IACF;EACF,CAAC;AACH;AAEAT,WAAW,EAAE"}