import { SlotRegistry } from '@teambit/harmony';
import { Logger, LoggerMain } from '@teambit/logger';
import { Express } from 'express';
import { Route } from './types';
import { MiddlewareManifest } from './middleware-manifest';
export declare type ExpressConfig = {
    port: number;
    namespace: string;
    loggerIgnorePath: string[];
};
export declare type MiddlewareSlot = SlotRegistry<MiddlewareManifest[]>;
export declare type RouteSlot = SlotRegistry<Route[]>;
export declare class ExpressMain {
    /**
     * extension config
     */
    readonly config: ExpressConfig;
    /**
     * slot for registering graphql modules
     */
    private moduleSlot;
    /**
     * logger extension.
     */
    readonly logger: Logger;
    readonly middlewareSlot: MiddlewareSlot;
    static runtime: import("@teambit/harmony").RuntimeDefinition;
    constructor(
    /**
     * extension config
     */
    config: ExpressConfig, 
    /**
     * slot for registering graphql modules
     */
    moduleSlot: RouteSlot, 
    /**
     * logger extension.
     */
    logger: Logger, middlewareSlot: MiddlewareSlot);
    /**
     * start a express server.
     */
    listen(port?: number): Promise<void>;
    /**
     * register a new express routes.
     * route will be added as `/api/${route}`
     */
    register(routes: Route[]): this;
    /**
     * register a new middleware into express.
     */
    registerMiddleware(middlewares: MiddlewareManifest[]): this;
    private createRootRoutes;
    createApp(expressApp?: Express, options?: {
        disableBodyParser: true;
    }): Express;
    private createRoutes;
    private verbValidation;
    private catchErrorsMiddlewares;
    private bodyParser;
    static slots: (((registerFn: () => string) => SlotRegistry<Route[]>) | ((registerFn: () => string) => SlotRegistry<MiddlewareManifest[]>))[];
    static dependencies: import("@teambit/harmony").Aspect[];
    static defaultConfig: {
        port: number;
        namespace: string;
        loggerIgnorePath: string[];
    };
    static provider([loggerFactory]: [LoggerMain], config: ExpressConfig, [routeSlot, middlewareSlot]: [RouteSlot, MiddlewareSlot]): Promise<ExpressMain>;
}
