"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
require("core-js/modules/es.promise.js");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.linkAllToNodeModules = linkAllToNodeModules;
function _isEmpty2() {
  const data = _interopRequireDefault(require("ramda/src/isEmpty"));
  _isEmpty2 = function () {
    return data;
  };
  return data;
}
function _bitId() {
  const data = require("../bit-id");
  _bitId = function () {
    return data;
  };
  return data;
}
function _nodeModulesLinker() {
  const data = _interopRequireDefault(require("./node-modules-linker"));
  _nodeModulesLinker = function () {
    return data;
  };
  return data;
}
async function linkAllToNodeModules(consumer, bitIds = []) {
  const componentsIds = bitIds.length ? _bitId().BitIds.fromArray(bitIds) : consumer.bitMap.getAllIdsAvailableOnLane();
  if ((0, _isEmpty2().default)(componentsIds)) return [];
  const {
    components
  } = await consumer.loadComponents(componentsIds);
  const nodeModuleLinker = new (_nodeModulesLinker().default)(components, consumer, consumer.bitMap);
  return nodeModuleLinker.link();
}