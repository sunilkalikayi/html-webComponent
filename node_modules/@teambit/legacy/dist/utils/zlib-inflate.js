"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
require("core-js/modules/es.promise.js");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = inflate;
function _util() {
  const data = require("util");
  _util = function () {
    return data;
  };
  return data;
}
function _zlib() {
  const data = _interopRequireDefault(require("zlib"));
  _zlib = function () {
    return data;
  };
  return data;
}
async function inflate(buffer, filePath) {
  const inflateP = (0, _util().promisify)(_zlib().default.inflate);
  try {
    return await inflateP(buffer);
  } catch (err) {
    const filePathStr = filePath ? ` of "${filePath}"` : '';
    throw new Error(`fatal: zlib.inflate${filePathStr} has failed with an error: "${err.message}"
try running bit import --all-history to fix the corrupted objects`);
  }
}