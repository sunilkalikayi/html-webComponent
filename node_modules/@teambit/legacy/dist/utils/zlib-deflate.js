"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
require("core-js/modules/es.promise.js");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = deflate;
function _util() {
  const data = require("util");
  _util = function () {
    return data;
  };
  return data;
}
function _zlib() {
  const data = _interopRequireDefault(require("zlib"));
  _zlib = function () {
    return data;
  };
  return data;
}
async function deflate(buffer, filePath) {
  const deflateP = (0, _util().promisify)(_zlib().default.deflate);
  try {
    return await deflateP(buffer);
  } catch (err) {
    const filePathStr = filePath ? ` of "${filePath}"` : '';
    throw new Error(`fatal: zlib.deflate${filePathStr} has failed with an error: "${err.message}"`);
  }
}