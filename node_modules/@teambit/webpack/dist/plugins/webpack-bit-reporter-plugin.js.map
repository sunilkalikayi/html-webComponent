{"version":3,"names":["PLUGIN_NAME","WebpackBitReporterPlugin","constructor","options","pubsub","devServerID","apply","compiler","hooks","compile","tap","event","WebpackCompilationStartedEvent","Date","now","pub","WebpackAspect","id","done","stats","WebpackCompilationDoneEvent"],"sources":["webpack-bit-reporter-plugin.ts"],"sourcesContent":["import type { Compiler, Stats } from 'webpack';\nimport { WebpackCompilationDoneEvent, WebpackCompilationStartedEvent } from '../events';\nimport { WebpackAspect } from '../webpack.aspect';\n\nconst PLUGIN_NAME = 'webpack-compiler-started-plugin';\n\n/**\n * Monitors Webpack's compilation, and updates progress to Bit\n */\nexport class WebpackBitReporterPlugin {\n  // TODO: add plugin type from webpack and implement it\n  pubsub: any;\n  devServerID: string;\n\n  constructor({ options }) {\n    this.pubsub = options.pubsub;\n    this.devServerID = options.devServerID;\n  }\n\n  apply(compiler: Compiler) {\n    // \"Called before a new compilation is created.\"\n    compiler.hooks.compile.tap(PLUGIN_NAME, () => {\n      const event = new WebpackCompilationStartedEvent(Date.now(), { devServerID: this.devServerID });\n      this.pubsub.pub(WebpackAspect.id, event);\n    });\n\n    // \"Executed when the compilation has completed.\"\n    compiler.hooks.done.tap(PLUGIN_NAME, (stats: Stats) => {\n      const event = new WebpackCompilationDoneEvent(Date.now(), stats, this.devServerID);\n      this.pubsub.pub(WebpackAspect.id, event);\n    });\n  }\n}\n"],"mappings":";;;;;;;;;;;;;;AACA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AACA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AAEA,MAAMA,WAAW,GAAG,iCAAiC;;AAErD;AACA;AACA;AACO,MAAMC,wBAAwB,CAAC;EACpC;;EAIAC,WAAW,CAAC;IAAEC;EAAQ,CAAC,EAAE;IAAA;IAAA;IACvB,IAAI,CAACC,MAAM,GAAGD,OAAO,CAACC,MAAM;IAC5B,IAAI,CAACC,WAAW,GAAGF,OAAO,CAACE,WAAW;EACxC;EAEAC,KAAK,CAACC,QAAkB,EAAE;IACxB;IACAA,QAAQ,CAACC,KAAK,CAACC,OAAO,CAACC,GAAG,CAACV,WAAW,EAAE,MAAM;MAC5C,MAAMW,KAAK,GAAG,KAAIC,wCAA8B,EAACC,IAAI,CAACC,GAAG,EAAE,EAAE;QAAET,WAAW,EAAE,IAAI,CAACA;MAAY,CAAC,CAAC;MAC/F,IAAI,CAACD,MAAM,CAACW,GAAG,CAACC,wBAAa,CAACC,EAAE,EAAEN,KAAK,CAAC;IAC1C,CAAC,CAAC;;IAEF;IACAJ,QAAQ,CAACC,KAAK,CAACU,IAAI,CAACR,GAAG,CAACV,WAAW,EAAGmB,KAAY,IAAK;MACrD,MAAMR,KAAK,GAAG,KAAIS,qCAA2B,EAACP,IAAI,CAACC,GAAG,EAAE,EAAEK,KAAK,EAAE,IAAI,CAACd,WAAW,CAAC;MAClF,IAAI,CAACD,MAAM,CAACW,GAAG,CAACC,wBAAa,CAACC,EAAE,EAAEN,KAAK,CAAC;IAC1C,CAAC,CAAC;EACJ;AACF;AAAC"}