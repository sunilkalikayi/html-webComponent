{"version":3,"names":["UserAgentUI","provider","uiUi","userAgentUi","registerRenderHooks","serverInit","browser","userAgent","UAParser","headers","browserInit","window","navigator","reactContext","UserAgentReactContext","UIAspect","UIRuntime","children","renderCtx","UserAgentAspect","addRuntime"],"sources":["user-agent.ui.runtime.tsx"],"sourcesContent":["import { UIAspect, UIRuntime, UiUI } from '@teambit/ui';\nimport React, { ReactNode } from 'react';\nimport UAParser from 'ua-parser-js';\nimport { UserAgentProvider } from '@teambit/ui-foundation.ui.hooks.use-user-agent';\nimport { UserAgentAspect } from './user-agent.aspect';\n\ntype UserAgentRenderCtx = {\n  userAgent?: UAParser;\n};\n\n/**\n * user agent aspect\n */\nexport class UserAgentUI {\n  static slots = [];\n\n  static dependencies = [UIAspect];\n\n  static runtime = UIRuntime;\n\n  static async provider([uiUi]: [UiUI]) {\n    const userAgentUi = new UserAgentUI();\n\n    uiUi.registerRenderHooks<UserAgentRenderCtx, undefined>({\n      serverInit: ({ browser }) => {\n        const userAgent = new UAParser(browser.headers['user-agent']);\n        return {\n          userAgent,\n        };\n      },\n      browserInit: () => {\n        return {\n          userAgent: new UAParser(window.navigator.userAgent),\n        };\n      },\n      reactContext: UserAgentReactContext,\n    });\n\n    return userAgentUi;\n  }\n}\n\nfunction UserAgentReactContext({ children, renderCtx }: { children: ReactNode; renderCtx?: UserAgentRenderCtx }) {\n  return <UserAgentProvider value={renderCtx?.userAgent}>{children}</UserAgentProvider>;\n}\n\nUserAgentAspect.addRuntime(UserAgentUI);\n"],"mappings":";;;;;;;;;;;;;;;;AAAA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AACA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AACA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AACA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AACA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AAMA;AACA;AACA;AACO,MAAMA,WAAW,CAAC;EAOvB,aAAaC,QAAQ,CAAC,CAACC,IAAI,CAAS,EAAE;IACpC,MAAMC,WAAW,GAAG,IAAIH,WAAW,EAAE;IAErCE,IAAI,CAACE,mBAAmB,CAAgC;MACtDC,UAAU,EAAE,CAAC;QAAEC;MAAQ,CAAC,KAAK;QAC3B,MAAMC,SAAS,GAAG,KAAIC,qBAAQ,EAACF,OAAO,CAACG,OAAO,CAAC,YAAY,CAAC,CAAC;QAC7D,OAAO;UACLF;QACF,CAAC;MACH,CAAC;MACDG,WAAW,EAAE,MAAM;QACjB,OAAO;UACLH,SAAS,EAAE,KAAIC,qBAAQ,EAACG,MAAM,CAACC,SAAS,CAACL,SAAS;QACpD,CAAC;MACH,CAAC;MACDM,YAAY,EAAEC;IAChB,CAAC,CAAC;IAEF,OAAOX,WAAW;EACpB;AACF;AAAC;AAAA,gCA3BYH,WAAW,WACP,EAAE;AAAA,gCADNA,WAAW,kBAGA,CAACe,cAAQ,CAAC;AAAA,gCAHrBf,WAAW,aAKLgB,eAAS;AAwB5B,SAASF,qBAAqB,CAAC;EAAEG,QAAQ;EAAEC;AAAmE,CAAC,EAAE;EAC/G,oBAAO,+BAAC,wCAAiB;IAAC,KAAK,EAAEA,SAAS,aAATA,SAAS,uBAATA,SAAS,CAAEX;EAAU,GAAEU,QAAQ,CAAqB;AACvF;AAEAE,4BAAe,CAACC,UAAU,CAACpB,WAAW,CAAC"}