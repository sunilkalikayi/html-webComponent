{"version":3,"names":["GlobalConfigMain","get","key","getSync","list","listSync","set","val","setSync","del","delSync","getGlobalCapsulesBaseDir","CFG_CAPSULES_ROOT_BASE_DIR","GLOBALS_DEFAULT_CAPSULES","getKnownGlobalDirs","CACHE_ROOT","DEBUG_LOG","GLOBAL_SCOPE","GLOBAL_CONFIG","provider","cli","globalConfig","register","GlobalsCmd","MainRuntime","CLIAspect","GlobalConfigAspect","addRuntime"],"sources":["global-config.main.runtime.ts"],"sourcesContent":["import { CLIAspect, CLIMain, MainRuntime } from '@teambit/cli';\nimport {\n  CACHE_ROOT,\n  DEBUG_LOG,\n  GLOBAL_SCOPE,\n  GLOBAL_CONFIG,\n  CFG_CAPSULES_ROOT_BASE_DIR,\n  GLOBALS_DEFAULT_CAPSULES,\n} from '@teambit/legacy/dist/constants';\nimport {\n  del,\n  delSync,\n  get,\n  getSync,\n  list,\n  listSync,\n  set,\n  setSync,\n} from '@teambit/legacy/dist/api/consumer/lib/global-config';\nimport { GlobalConfig } from '@teambit/legacy/dist/global-config';\nimport { GlobalConfigAspect } from './global-config.aspect';\nimport { GlobalsCmd } from './globals.cmd';\n\nexport class GlobalConfigMain {\n  static runtime = MainRuntime;\n  static dependencies = [CLIAspect];\n  static slots = [];\n\n  async get(key: string): Promise<string | undefined> {\n    return get(key);\n  }\n\n  getSync(key: string): string | undefined {\n    return getSync(key);\n  }\n\n  list(): Promise<Record<string, string>> {\n    return list();\n  }\n  listSync(): Record<string, string> {\n    return listSync();\n  }\n\n  async set(key: string, val: string): Promise<GlobalConfig> {\n    return set(key, val);\n  }\n  setSync(key: string, val: string): GlobalConfig {\n    return setSync(key, val);\n  }\n\n  async del(key: string): Promise<GlobalConfig> {\n    return del(key);\n  }\n\n  delSync(key: string): GlobalConfig {\n    return delSync(key);\n  }\n\n  getGlobalCapsulesBaseDir() {\n    return this.getSync(CFG_CAPSULES_ROOT_BASE_DIR) || GLOBALS_DEFAULT_CAPSULES;\n  }\n\n  getKnownGlobalDirs() {\n    return {\n      'Global Dir': CACHE_ROOT,\n      'Log file': DEBUG_LOG,\n      'Global Scope Dir': GLOBAL_SCOPE,\n      'Config Dir': GLOBAL_CONFIG,\n      'Capsules Dir': this.getGlobalCapsulesBaseDir(),\n    };\n  }\n\n  static async provider([cli]: [CLIMain]) {\n    const globalConfig = new GlobalConfigMain();\n    cli.register(new GlobalsCmd(globalConfig));\n    return globalConfig;\n  }\n}\n\nGlobalConfigAspect.addRuntime(GlobalConfigMain);\n"],"mappings":";;;;;;;;;;;;;;;;AAAA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AACA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AAQA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AAWA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AACA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AAEO,MAAMA,gBAAgB,CAAC;EAK5B,MAAMC,GAAG,CAACC,GAAW,EAA+B;IAClD,OAAO,IAAAD,mBAAG,EAACC,GAAG,CAAC;EACjB;EAEAC,OAAO,CAACD,GAAW,EAAsB;IACvC,OAAO,IAAAC,uBAAO,EAACD,GAAG,CAAC;EACrB;EAEAE,IAAI,GAAoC;IACtC,OAAO,IAAAA,oBAAI,GAAE;EACf;EACAC,QAAQ,GAA2B;IACjC,OAAO,IAAAA,wBAAQ,GAAE;EACnB;EAEA,MAAMC,GAAG,CAACJ,GAAW,EAAEK,GAAW,EAAyB;IACzD,OAAO,IAAAD,mBAAG,EAACJ,GAAG,EAAEK,GAAG,CAAC;EACtB;EACAC,OAAO,CAACN,GAAW,EAAEK,GAAW,EAAgB;IAC9C,OAAO,IAAAC,uBAAO,EAACN,GAAG,EAAEK,GAAG,CAAC;EAC1B;EAEA,MAAME,GAAG,CAACP,GAAW,EAAyB;IAC5C,OAAO,IAAAO,mBAAG,EAACP,GAAG,CAAC;EACjB;EAEAQ,OAAO,CAACR,GAAW,EAAgB;IACjC,OAAO,IAAAQ,uBAAO,EAACR,GAAG,CAAC;EACrB;EAEAS,wBAAwB,GAAG;IACzB,OAAO,IAAI,CAACR,OAAO,CAACS,uCAA0B,CAAC,IAAIC,qCAAwB;EAC7E;EAEAC,kBAAkB,GAAG;IACnB,OAAO;MACL,YAAY,EAAEC,uBAAU;MACxB,UAAU,EAAEC,sBAAS;MACrB,kBAAkB,EAAEC,yBAAY;MAChC,YAAY,EAAEC,0BAAa;MAC3B,cAAc,EAAE,IAAI,CAACP,wBAAwB;IAC/C,CAAC;EACH;EAEA,aAAaQ,QAAQ,CAAC,CAACC,GAAG,CAAY,EAAE;IACtC,MAAMC,YAAY,GAAG,IAAIrB,gBAAgB,EAAE;IAC3CoB,GAAG,CAACE,QAAQ,CAAC,KAAIC,qBAAU,EAACF,YAAY,CAAC,CAAC;IAC1C,OAAOA,YAAY;EACrB;AACF;AAAC;AAAA,gCAtDYrB,gBAAgB,aACVwB,kBAAW;AAAA,gCADjBxB,gBAAgB,kBAEL,CAACyB,gBAAS,CAAC;AAAA,gCAFtBzB,gBAAgB,WAGZ,EAAE;AAqDnB0B,mCAAkB,CAACC,UAAU,CAAC3B,gBAAgB,CAAC"}