{"version":3,"names":["ClearCacheMain","constructor","workspace","clearCache","clearRemoteCache","remote","remoteObj","getRemoteByName","consumer","result","action","ClearCacheAction","name","provider","cli","scope","community","clearCacheMain","register","ClearCacheCmd","getDocsDomain","ExternalActions","externalActions","push","WorkspaceAspect","CLIAspect","ScopeAspect","CommunityAspect","MainRuntime","ClearCacheAspect","addRuntime"],"sources":["clear-cache.main.runtime.ts"],"sourcesContent":["import { CLIAspect, CLIMain, MainRuntime } from '@teambit/cli';\nimport WorkspaceAspect, { Workspace } from '@teambit/workspace';\nimport ScopeAspect, { ScopeMain } from '@teambit/scope';\nimport { clearCache } from '@teambit/legacy/dist/api/consumer';\nimport { ExternalActions } from '@teambit/legacy/dist/api/scope/lib/action';\nimport { CommunityAspect } from '@teambit/community';\nimport type { CommunityMain } from '@teambit/community';\n\nimport getRemoteByName from '@teambit/legacy/dist/remotes/get-remote-by-name';\nimport ClearCacheCmd from './clear-cache-cmd';\nimport { ClearCacheAspect } from './clear-cache.aspect';\nimport { ClearCacheAction } from './clear-cache-action';\n\nexport class ClearCacheMain {\n  constructor(private workspace?: Workspace) {}\n\n  async clearCache(): Promise<string[]> {\n    return clearCache();\n  }\n\n  async clearRemoteCache(remote: string) {\n    const remoteObj = await getRemoteByName(remote, this.workspace?.consumer);\n    const result = await remoteObj.action(ClearCacheAction.name, {});\n    return result;\n  }\n\n  static slots = [];\n  static dependencies = [WorkspaceAspect, CLIAspect, ScopeAspect, CommunityAspect];\n  static runtime = MainRuntime;\n  static async provider([workspace, cli, scope, community]: [Workspace, CLIMain, ScopeMain, CommunityMain]) {\n    const clearCacheMain = new ClearCacheMain(workspace);\n    cli.register(new ClearCacheCmd(clearCacheMain, community.getDocsDomain()));\n    ExternalActions.externalActions.push(new ClearCacheAction(scope));\n\n    return clearCacheMain;\n  }\n}\n\nClearCacheAspect.addRuntime(ClearCacheMain);\n"],"mappings":";;;;;;;;;;;;;;;;AAAA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AACA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AACA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AACA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AACA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AACA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AAGA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AACA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AACA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AACA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AAEO,MAAMA,cAAc,CAAC;EAC1BC,WAAW,CAASC,SAAqB,EAAE;IAAA,KAAvBA,SAAqB,GAArBA,SAAqB;EAAG;EAE5C,MAAMC,UAAU,GAAsB;IACpC,OAAO,IAAAA,sBAAU,GAAE;EACrB;EAEA,MAAMC,gBAAgB,CAACC,MAAc,EAAE;IAAA;IACrC,MAAMC,SAAS,GAAG,MAAM,IAAAC,0BAAe,EAACF,MAAM,qBAAE,IAAI,CAACH,SAAS,oDAAd,gBAAgBM,QAAQ,CAAC;IACzE,MAAMC,MAAM,GAAG,MAAMH,SAAS,CAACI,MAAM,CAACC,oCAAgB,CAACC,IAAI,EAAE,CAAC,CAAC,CAAC;IAChE,OAAOH,MAAM;EACf;EAKA,aAAaI,QAAQ,CAAC,CAACX,SAAS,EAAEY,GAAG,EAAEC,KAAK,EAAEC,SAAS,CAAiD,EAAE;IACxG,MAAMC,cAAc,GAAG,IAAIjB,cAAc,CAACE,SAAS,CAAC;IACpDY,GAAG,CAACI,QAAQ,CAAC,KAAIC,wBAAa,EAACF,cAAc,EAAED,SAAS,CAACI,aAAa,EAAE,CAAC,CAAC;IAC1EC,yBAAe,CAACC,eAAe,CAACC,IAAI,CAAC,KAAIZ,oCAAgB,EAACI,KAAK,CAAC,CAAC;IAEjE,OAAOE,cAAc;EACvB;AACF;AAAC;AAAA,gCAvBYjB,cAAc,WAaV,EAAE;AAAA,gCAbNA,cAAc,kBAcH,CAACwB,oBAAe,EAAEC,gBAAS,EAAEC,gBAAW,EAAEC,4BAAe,CAAC;AAAA,gCAdrE3B,cAAc,aAeR4B,kBAAW;AAU9BC,8BAAgB,CAACC,UAAU,CAAC9B,cAAc,CAAC"}