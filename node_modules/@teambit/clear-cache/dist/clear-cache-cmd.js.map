{"version":3,"names":["ClearCacheCmd","constructor","clearCache","docsDomain","extendedDescription","report","arg","remote","success","clearRemoteCache","chalk","green","red","cacheCleared","title","output","map","str","join","bold"],"sources":["clear-cache-cmd.ts"],"sourcesContent":["import { Command, CommandOptions } from '@teambit/cli';\nimport chalk from 'chalk';\nimport { ClearCacheMain } from './clear-cache.main.runtime';\n\nexport default class ClearCacheCmd implements Command {\n  name = 'clear-cache';\n  description = \"clears Bit's cache from current working machine\";\n  group = 'general';\n  extendedDescription: string;\n  alias = 'cc';\n  options = [['r', 'remote <remote-name>', 'clear memory cache from a remote scope']] as CommandOptions;\n  loader = false;\n  skipWorkspace = true;\n\n  constructor(private clearCache: ClearCacheMain, private docsDomain: string) {\n    this.extendedDescription = `The following gets removed by this command:\n1) V8 compiled code (generated the first time Bit is loaded by v8-compile-cache package)\n2) components cache on the filesystem (mainly the dependencies graph and docs)\n3) scope's index file, which maps the component-id:object-hash\nhttps://${docsDomain}/workspace/clearing-cache`;\n  }\n\n  async report(arg, { remote }: { remote?: string }): Promise<string> {\n    if (remote) {\n      const success = await this.clearCache.clearRemoteCache(remote);\n      if (success) {\n        return chalk.green(`successfully cleaned the cache of \"${remote}\"`);\n      }\n      return chalk.red(`failed cleaning the cache of \"${remote}\"`);\n    }\n    const cacheCleared = await this.clearCache.clearCache();\n    const title = 'the following cache(s) have been cleared:';\n    const output = cacheCleared.map((str) => `  âœ” ${str}`).join('\\n');\n    return chalk.green(`${chalk.bold(title)}\\n${output}`);\n  }\n}\n"],"mappings":";;;;;;;;;;;;;;;AACA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AAGe,MAAMA,aAAa,CAAoB;EAUpDC,WAAW,CAASC,UAA0B,EAAUC,UAAkB,EAAE;IAAA,KAAxDD,UAA0B,GAA1BA,UAA0B;IAAA,KAAUC,UAAkB,GAAlBA,UAAkB;IAAA,8CATnE,aAAa;IAAA,qDACN,iDAAiD;IAAA,+CACvD,SAAS;IAAA;IAAA,+CAET,IAAI;IAAA,iDACF,CAAC,CAAC,GAAG,EAAE,sBAAsB,EAAE,wCAAwC,CAAC,CAAC;IAAA,gDAC1E,KAAK;IAAA,uDACE,IAAI;IAGlB,IAAI,CAACC,mBAAmB,GAAI;AAChC;AACA;AACA;AACA,UAAUD,UAAW,2BAA0B;EAC7C;EAEA,MAAME,MAAM,CAACC,GAAG,EAAE;IAAEC;EAA4B,CAAC,EAAmB;IAClE,IAAIA,MAAM,EAAE;MACV,MAAMC,OAAO,GAAG,MAAM,IAAI,CAACN,UAAU,CAACO,gBAAgB,CAACF,MAAM,CAAC;MAC9D,IAAIC,OAAO,EAAE;QACX,OAAOE,gBAAK,CAACC,KAAK,CAAE,sCAAqCJ,MAAO,GAAE,CAAC;MACrE;MACA,OAAOG,gBAAK,CAACE,GAAG,CAAE,iCAAgCL,MAAO,GAAE,CAAC;IAC9D;IACA,MAAMM,YAAY,GAAG,MAAM,IAAI,CAACX,UAAU,CAACA,UAAU,EAAE;IACvD,MAAMY,KAAK,GAAG,2CAA2C;IACzD,MAAMC,MAAM,GAAGF,YAAY,CAACG,GAAG,CAAEC,GAAG,IAAM,OAAMA,GAAI,EAAC,CAAC,CAACC,IAAI,CAAC,IAAI,CAAC;IACjE,OAAOR,gBAAK,CAACC,KAAK,CAAE,GAAED,gBAAK,CAACS,IAAI,CAACL,KAAK,CAAE,KAAIC,MAAO,EAAC,CAAC;EACvD;AACF;AAAC"}