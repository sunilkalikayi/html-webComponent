{"version":3,"names":["LogCmd","constructor","componentLog","docsDomain","name","description","extendedDescription","report","id","remote","parents","logs","getLogsWithParents","join","getLogs","reverse","map","paintLog","json"],"sources":["log-cmd.ts"],"sourcesContent":["import { Command, CommandOptions } from '@teambit/cli';\nimport { paintLog } from '@teambit/legacy/dist/cli/chalk-box';\nimport { ComponentLogMain } from './component-log.main.runtime';\n\nexport default class LogCmd implements Command {\n  name = 'log <id>';\n  description = 'show components(s) version history';\n  extendedDescription: string;\n  group = 'info';\n  alias = '';\n  options = [\n    ['r', 'remote', 'show log of a remote component'],\n    ['', 'parents', 'EXPERIMENTAL. show parents and lanes data'],\n    ['j', 'json', 'json format'],\n  ] as CommandOptions;\n  migration = true;\n  remoteOp = true; // should support log against remote\n  skipWorkspace = true;\n  arguments = [{ name: 'id', description: 'component-id or component-name' }];\n\n  constructor(private componentLog: ComponentLogMain, docsDomain: string) {\n    this.extendedDescription = `https://${docsDomain}/reference/cli-reference#log`;\n  }\n\n  async report([id]: [string], { remote = false, parents = false }: { remote: boolean; parents: boolean }) {\n    if (parents) {\n      const logs = await this.componentLog.getLogsWithParents(id);\n      return logs.join('\\n');\n    }\n    const logs = await this.componentLog.getLogs(id, remote);\n    // reverse to show from the latest to earliest\n    return logs.reverse().map(paintLog).join('\\n');\n  }\n\n  async json([id]: [string], { remote = false, parents = false }: { remote: boolean; parents: boolean }) {\n    if (parents) {\n      return this.componentLog.getLogsWithParents(id);\n    }\n    return this.componentLog.getLogs(id, remote);\n  }\n}\n"],"mappings":";;;;;;;;;;;;;;;;AACA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AAGe,MAAMA,MAAM,CAAoB;EAY5B;;EAIjBC,WAAW,CAASC,YAA8B,EAAEC,UAAkB,EAAE;IAAA,KAApDD,YAA8B,GAA9BA,YAA8B;IAAA,8CAf3C,UAAU;IAAA,qDACH,oCAAoC;IAAA;IAAA,+CAE1C,MAAM;IAAA,+CACN,EAAE;IAAA,iDACA,CACR,CAAC,GAAG,EAAE,QAAQ,EAAE,gCAAgC,CAAC,EACjD,CAAC,EAAE,EAAE,SAAS,EAAE,2CAA2C,CAAC,EAC5D,CAAC,GAAG,EAAE,MAAM,EAAE,aAAa,CAAC,CAC7B;IAAA,mDACW,IAAI;IAAA,kDACL,IAAI;IAAA,uDACC,IAAI;IAAA,mDACR,CAAC;MAAEE,IAAI,EAAE,IAAI;MAAEC,WAAW,EAAE;IAAiC,CAAC,CAAC;IAGzE,IAAI,CAACC,mBAAmB,GAAI,WAAUH,UAAW,8BAA6B;EAChF;EAEA,MAAMI,MAAM,CAAC,CAACC,EAAE,CAAW,EAAE;IAAEC,MAAM,GAAG,KAAK;IAAEC,OAAO,GAAG;EAA6C,CAAC,EAAE;IACvG,IAAIA,OAAO,EAAE;MACX,MAAMC,IAAI,GAAG,MAAM,IAAI,CAACT,YAAY,CAACU,kBAAkB,CAACJ,EAAE,CAAC;MAC3D,OAAOG,IAAI,CAACE,IAAI,CAAC,IAAI,CAAC;IACxB;IACA,MAAMF,IAAI,GAAG,MAAM,IAAI,CAACT,YAAY,CAACY,OAAO,CAACN,EAAE,EAAEC,MAAM,CAAC;IACxD;IACA,OAAOE,IAAI,CAACI,OAAO,EAAE,CAACC,GAAG,CAACC,oBAAQ,CAAC,CAACJ,IAAI,CAAC,IAAI,CAAC;EAChD;EAEA,MAAMK,IAAI,CAAC,CAACV,EAAE,CAAW,EAAE;IAAEC,MAAM,GAAG,KAAK;IAAEC,OAAO,GAAG;EAA6C,CAAC,EAAE;IACrG,IAAIA,OAAO,EAAE;MACX,OAAO,IAAI,CAACR,YAAY,CAACU,kBAAkB,CAACJ,EAAE,CAAC;IACjD;IACA,OAAO,IAAI,CAACN,YAAY,CAACY,OAAO,CAACN,EAAE,EAAEC,MAAM,CAAC;EAC9C;AACF;AAAC"}