{"version":3,"names":["EnvMain","constructor","envEnv","envs","compose","transformers","targetEnv","merge","provider","aspectAspect","EnvEnv","registerEnv","AspectAspect","EnvsAspect","MainRuntime","EnvAspect","addRuntime"],"sources":["env.main.runtime.ts"],"sourcesContent":["import AspectAspect, { AspectMain } from '@teambit/aspect';\nimport { MainRuntime } from '@teambit/cli';\nimport EnvsAspect, { Environment, EnvsMain, EnvTransformer } from '@teambit/envs';\nimport { EnvAspect } from './env.aspect';\nimport { EnvEnv } from './env.env';\n\nexport class EnvMain {\n  constructor(readonly envEnv: EnvEnv, private envs: EnvsMain) {}\n\n  /**\n   * compose your own aspect environment.\n   */\n  compose(transformers: EnvTransformer[] = [], targetEnv: Environment = {}) {\n    return this.envs.compose(this.envs.merge(targetEnv, this.envEnv), transformers);\n  }\n\n  static slots = [];\n  static dependencies = [AspectAspect, EnvsAspect];\n  static runtime = MainRuntime;\n  static async provider([aspectAspect, envs]: [AspectMain, EnvsMain]) {\n    const envEnv = aspectAspect.compose([], new EnvEnv());\n\n    envs.registerEnv(envEnv);\n    return new EnvMain(envEnv as EnvEnv, envs);\n  }\n}\n\nEnvAspect.addRuntime(EnvMain);\n"],"mappings":";;;;;;;;;;;;;;;;AAAA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AACA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AACA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AACA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AACA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AAEO,MAAMA,OAAO,CAAC;EACnBC,WAAW,CAAUC,MAAc,EAAUC,IAAc,EAAE;IAAA,KAAxCD,MAAc,GAAdA,MAAc;IAAA,KAAUC,IAAc,GAAdA,IAAc;EAAG;;EAE9D;AACF;AACA;EACEC,OAAO,CAACC,YAA8B,GAAG,EAAE,EAAEC,SAAsB,GAAG,CAAC,CAAC,EAAE;IACxE,OAAO,IAAI,CAACH,IAAI,CAACC,OAAO,CAAC,IAAI,CAACD,IAAI,CAACI,KAAK,CAACD,SAAS,EAAE,IAAI,CAACJ,MAAM,CAAC,EAAEG,YAAY,CAAC;EACjF;EAKA,aAAaG,QAAQ,CAAC,CAACC,YAAY,EAAEN,IAAI,CAAyB,EAAE;IAClE,MAAMD,MAAM,GAAGO,YAAY,CAACL,OAAO,CAAC,EAAE,EAAE,KAAIM,cAAM,GAAE,CAAC;IAErDP,IAAI,CAACQ,WAAW,CAACT,MAAM,CAAC;IACxB,OAAO,IAAIF,OAAO,CAACE,MAAM,EAAYC,IAAI,CAAC;EAC5C;AACF;AAAC;AAAA,gCAnBYH,OAAO,WAUH,EAAE;AAAA,gCAVNA,OAAO,kBAWI,CAACY,iBAAY,EAAEC,eAAU,CAAC;AAAA,gCAXrCb,OAAO,aAYDc,kBAAW;AAS9BC,gBAAS,CAACC,UAAU,CAAChB,OAAO,CAAC"}