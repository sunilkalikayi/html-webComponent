"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
require("core-js/modules/es.array.iterator.js");
require("core-js/modules/es.promise.js");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.EnvMain = void 0;
function _defineProperty2() {
  const data = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));
  _defineProperty2 = function () {
    return data;
  };
  return data;
}
function _aspect() {
  const data = _interopRequireDefault(require("@teambit/aspect"));
  _aspect = function () {
    return data;
  };
  return data;
}
function _cli() {
  const data = require("@teambit/cli");
  _cli = function () {
    return data;
  };
  return data;
}
function _envs() {
  const data = _interopRequireDefault(require("@teambit/envs"));
  _envs = function () {
    return data;
  };
  return data;
}
function _env() {
  const data = require("./env.aspect");
  _env = function () {
    return data;
  };
  return data;
}
function _env2() {
  const data = require("./env.env");
  _env2 = function () {
    return data;
  };
  return data;
}
class EnvMain {
  constructor(envEnv, envs) {
    this.envEnv = envEnv;
    this.envs = envs;
  }

  /**
   * compose your own aspect environment.
   */
  compose(transformers = [], targetEnv = {}) {
    return this.envs.compose(this.envs.merge(targetEnv, this.envEnv), transformers);
  }
  static async provider([aspectAspect, envs]) {
    const envEnv = aspectAspect.compose([], new (_env2().EnvEnv)());
    envs.registerEnv(envEnv);
    return new EnvMain(envEnv, envs);
  }
}
exports.EnvMain = EnvMain;
(0, _defineProperty2().default)(EnvMain, "slots", []);
(0, _defineProperty2().default)(EnvMain, "dependencies", [_aspect().default, _envs().default]);
(0, _defineProperty2().default)(EnvMain, "runtime", _cli().MainRuntime);
_env().EnvAspect.addRuntime(EnvMain);

//# sourceMappingURL=env.main.runtime.js.map