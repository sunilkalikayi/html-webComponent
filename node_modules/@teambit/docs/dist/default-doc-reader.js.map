{"version":3,"names":["DefaultDocReader","constructor","pkg","compiler","workspace","read","path","contents","component","packageName","getPackageName","distPath","getDistPathBySrcPath","docsModule","require","resolve","Doc","from","labels","default","description","abstract","displayName","componentDisplayName","isFormatSupported","format","supportedExtensions","includes"],"sources":["default-doc-reader.ts"],"sourcesContent":["import { resolve } from 'path';\nimport type { PkgMain } from '@teambit/pkg';\nimport type { Component } from '@teambit/component';\nimport type { CompilerMain } from '@teambit/compiler';\nimport type { Workspace } from '@teambit/workspace';\nimport { Doc } from '@teambit/docs.entities.doc';\nimport { DocReader } from './doc-reader';\n\nexport class DefaultDocReader implements DocReader {\n  constructor(private pkg: PkgMain, private compiler: CompilerMain, private workspace: Workspace) {}\n\n  async read(path: string, contents: Buffer, component: Component) {\n    const packageName = this.pkg.getPackageName(component);\n    const distPath = this.compiler.getDistPathBySrcPath(component, path);\n    // eslint-disable-next-line\n    const docsModule = require(resolve(`${this.workspace.path}/node_modules/${packageName}/${distPath}`));\n    return Doc.from(path, {\n      labels: docsModule.labels || docsModule.default?.labels,\n      description: docsModule.abstract || docsModule.default?.abstract || docsModule.description,\n      displayName: docsModule.displayName || docsModule.default?.componentDisplayName,\n    });\n  }\n\n  readonly supportedExtensions = ['.ts', '.js', '.jsx', '.tsx'];\n\n  isFormatSupported(format: string) {\n    return this.supportedExtensions.includes(format);\n  }\n}\n"],"mappings":";;;;;;;;;;;;;;;;AAAA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AAKA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AAGO,MAAMA,gBAAgB,CAAsB;EACjDC,WAAW,CAASC,GAAY,EAAUC,QAAsB,EAAUC,SAAoB,EAAE;IAAA,KAA5EF,GAAY,GAAZA,GAAY;IAAA,KAAUC,QAAsB,GAAtBA,QAAsB;IAAA,KAAUC,SAAoB,GAApBA,SAAoB;IAAA,6DAc/D,CAAC,KAAK,EAAE,KAAK,EAAE,MAAM,EAAE,MAAM,CAAC;EAdoC;EAEjG,MAAMC,IAAI,CAACC,IAAY,EAAEC,QAAgB,EAAEC,SAAoB,EAAE;IAAA;IAC/D,MAAMC,WAAW,GAAG,IAAI,CAACP,GAAG,CAACQ,cAAc,CAACF,SAAS,CAAC;IACtD,MAAMG,QAAQ,GAAG,IAAI,CAACR,QAAQ,CAACS,oBAAoB,CAACJ,SAAS,EAAEF,IAAI,CAAC;IACpE;IACA,MAAMO,UAAU,GAAGC,OAAO,CAAC,IAAAC,eAAO,EAAE,GAAE,IAAI,CAACX,SAAS,CAACE,IAAK,iBAAgBG,WAAY,IAAGE,QAAS,EAAC,CAAC,CAAC;IACrG,OAAOK,mBAAG,CAACC,IAAI,CAACX,IAAI,EAAE;MACpBY,MAAM,EAAEL,UAAU,CAACK,MAAM,4BAAIL,UAAU,CAACM,OAAO,wDAAlB,oBAAoBD,MAAM;MACvDE,WAAW,EAAEP,UAAU,CAACQ,QAAQ,6BAAIR,UAAU,CAACM,OAAO,yDAAlB,qBAAoBE,QAAQ,KAAIR,UAAU,CAACO,WAAW;MAC1FE,WAAW,EAAET,UAAU,CAACS,WAAW,6BAAIT,UAAU,CAACM,OAAO,yDAAlB,qBAAoBI,oBAAoB;IACjF,CAAC,CAAC;EACJ;EAIAC,iBAAiB,CAACC,MAAc,EAAE;IAChC,OAAO,IAAI,CAACC,mBAAmB,CAACC,QAAQ,CAACF,MAAM,CAAC;EAClD;AACF;AAAC"}