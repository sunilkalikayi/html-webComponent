{"version":3,"names":["GraphUI","getDependenciesGraph","DependenciesGraph","registerComponentWidget","value","componentWidgetSlot","register","constructor","provider","componentUI","componentCompare","config","graphUI","section","GraphSection","graphSection","GraphCompareSection","componentTab","registerNavigation","navigationLink","order","registerRoute","route","props","registerRoutes","ComponentAspect","ComponentCompareAspect","UIRuntime","Slot","withType","GraphAspect","addRuntime"],"sources":["graph.ui.runtime.tsx"],"sourcesContent":["import { ComponentType } from 'react';\nimport { UIRuntime } from '@teambit/ui';\nimport { Slot, SlotRegistry } from '@teambit/harmony';\nimport { ComponentCompareUI, ComponentCompareAspect } from '@teambit/component-compare';\nimport { ComponentAspect, ComponentUI, ComponentModel } from '@teambit/component';\nimport { GraphAspect } from './graph.aspect';\nimport { GraphSection } from './ui/graph.section';\nimport { GraphCompareSection } from './graph.compare.section';\nimport { DependenciesGraph } from './ui/dependencies-graph';\n\nexport interface ComponentWidgetProps extends React.HTMLAttributes<HTMLDivElement> {\n  component: ComponentModel;\n}\nexport type ComponentWidget = ComponentType<ComponentWidgetProps>;\nexport type ComponentWidgetSlot = SlotRegistry<ComponentWidget>;\n\nexport type GraphUIConfig = {\n  componentTab: boolean;\n};\n\n/**\n * Presents dependencies graph in the component page\n */\nexport class GraphUI {\n  getDependenciesGraph() {\n    return DependenciesGraph;\n  }\n\n  /**\n   * adds plugins to component nodes\n   * @param value\n   */\n  registerComponentWidget(value: ComponentWidget) {\n    this.componentWidgetSlot.register(value);\n  }\n\n  constructor(private componentWidgetSlot: ComponentWidgetSlot) {}\n  static dependencies = [ComponentAspect, ComponentCompareAspect];\n  static runtime = UIRuntime;\n  static slots = [Slot.withType<ComponentWidget>()];\n  static defaultConfig = {\n    componentTab: true,\n  };\n\n  static async provider(\n    [componentUI, componentCompare]: [ComponentUI, ComponentCompareUI],\n    config: GraphUIConfig,\n    [componentWidgetSlot]: [ComponentWidgetSlot]\n  ) {\n    const graphUI = new GraphUI(componentWidgetSlot);\n    const section = new GraphSection(componentWidgetSlot);\n    const graphSection = new GraphCompareSection();\n    if (config.componentTab) componentUI.registerNavigation(section.navigationLink, section.order);\n    componentUI.registerRoute(section.route);\n    componentCompare.registerNavigation({\n      props: graphSection.navigationLink,\n      order: graphSection.navigationLink.order,\n    });\n    componentCompare.registerRoutes([graphSection.route]);\n    return graphUI;\n  }\n}\n\nGraphAspect.addRuntime(GraphUI);\n"],"mappings":";;;;;;;;;;;;;;;;AACA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AACA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AACA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AACA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AACA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AACA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AACA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AACA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AAYA;AACA;AACA;AACO,MAAMA,OAAO,CAAC;EACnBC,oBAAoB,GAAG;IACrB,OAAOC,sCAAiB;EAC1B;;EAEA;AACF;AACA;AACA;EACEC,uBAAuB,CAACC,KAAsB,EAAE;IAC9C,IAAI,CAACC,mBAAmB,CAACC,QAAQ,CAACF,KAAK,CAAC;EAC1C;EAEAG,WAAW,CAASF,mBAAwC,EAAE;IAAA,KAA1CA,mBAAwC,GAAxCA,mBAAwC;EAAG;EAQ/D,aAAaG,QAAQ,CACnB,CAACC,WAAW,EAAEC,gBAAgB,CAAoC,EAClEC,MAAqB,EACrB,CAACN,mBAAmB,CAAwB,EAC5C;IACA,MAAMO,OAAO,GAAG,IAAIZ,OAAO,CAACK,mBAAmB,CAAC;IAChD,MAAMQ,OAAO,GAAG,KAAIC,sBAAY,EAACT,mBAAmB,CAAC;IACrD,MAAMU,YAAY,GAAG,KAAIC,mCAAmB,GAAE;IAC9C,IAAIL,MAAM,CAACM,YAAY,EAAER,WAAW,CAACS,kBAAkB,CAACL,OAAO,CAACM,cAAc,EAAEN,OAAO,CAACO,KAAK,CAAC;IAC9FX,WAAW,CAACY,aAAa,CAACR,OAAO,CAACS,KAAK,CAAC;IACxCZ,gBAAgB,CAACQ,kBAAkB,CAAC;MAClCK,KAAK,EAAER,YAAY,CAACI,cAAc;MAClCC,KAAK,EAAEL,YAAY,CAACI,cAAc,CAACC;IACrC,CAAC,CAAC;IACFV,gBAAgB,CAACc,cAAc,CAAC,CAACT,YAAY,CAACO,KAAK,CAAC,CAAC;IACrD,OAAOV,OAAO;EAChB;AACF;AAAC;AAAA,gCAtCYZ,OAAO,kBAcI,CAACyB,4BAAe,EAAEC,0CAAsB,CAAC;AAAA,gCAdpD1B,OAAO,aAeD2B,eAAS;AAAA,gCAff3B,OAAO,WAgBH,CAAC4B,eAAI,CAACC,QAAQ,EAAmB,CAAC;AAAA,gCAhBtC7B,OAAO,mBAiBK;EACrBiB,YAAY,EAAE;AAChB,CAAC;AAqBHa,oBAAW,CAACC,UAAU,CAAC/B,OAAO,CAAC"}