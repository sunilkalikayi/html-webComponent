{"version":3,"names":["calcElements","graph","rootNode","useMemo","positions","calcLayout","nodes","Array","from","values","map","x","id","type","data","node","component","isEqual","ignoreVersion","undefined","position","get","y","edges","e","sourceId","targetId","source","target","label","depTypeToLabel","dependencyLifecycleType","labelBgPadding","className","depTypeToClass","arrowHeadType","ArrowHeadType","Arrow"],"sources":["calc-elements.tsx"],"sourcesContent":["import { useMemo } from 'react';\nimport { ArrowHeadType, Edge, Node } from 'react-flow-renderer';\nimport { ComponentID } from '@teambit/component';\nimport { calcLayout } from './calc-layout';\nimport { EdgeModel, GraphModel, NodeModel } from '../query';\n\nimport { depTypeToClass, depTypeToLabel } from './dep-edge';\n\ntype ElementsOptions = {\n  rootNode?: ComponentID;\n};\n\n/**\n * generate Nodes and Edges for the ReactFlowRenderer graph renderer\n */\nexport function calcElements(graph: GraphModel<NodeModel, EdgeModel> | undefined, { rootNode }: ElementsOptions) {\n  return useMemo(() => {\n    if (!graph) return [];\n\n    const positions = calcLayout(graph);\n\n    const nodes: Node[] = Array.from(graph.nodes.values()).map((x) => {\n      return {\n        id: x.id,\n        type: 'ComponentNode',\n        data: {\n          node: x,\n          type: rootNode && x.component.id.isEqual(rootNode, { ignoreVersion: true }) ? 'root' : undefined,\n        },\n        position: positions.get(x.id) || { x: 0, y: 0 },\n      };\n    });\n\n    const edges: Edge[] = graph.edges.map((e) => ({\n      id: `_${e.sourceId}__${e.targetId}`,\n      source: e.sourceId,\n      target: e.targetId,\n      label: depTypeToLabel(e.dependencyLifecycleType),\n      labelBgPadding: [4, 4],\n      type: 'smoothstep',\n      className: depTypeToClass(e.dependencyLifecycleType),\n      arrowHeadType: ArrowHeadType.Arrow,\n    }));\n\n    return [...nodes, ...edges];\n  }, [graph]);\n}\n"],"mappings":";;;;;;;AAAA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AACA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AAEA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AAGA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AAMA;AACA;AACA;AACO,SAASA,YAAY,CAACC,KAAmD,EAAE;EAAEC;AAA0B,CAAC,EAAE;EAC/G,OAAO,IAAAC,gBAAO,EAAC,MAAM;IACnB,IAAI,CAACF,KAAK,EAAE,OAAO,EAAE;IAErB,MAAMG,SAAS,GAAG,IAAAC,wBAAU,EAACJ,KAAK,CAAC;IAEnC,MAAMK,KAAa,GAAGC,KAAK,CAACC,IAAI,CAACP,KAAK,CAACK,KAAK,CAACG,MAAM,EAAE,CAAC,CAACC,GAAG,CAAEC,CAAC,IAAK;MAChE,OAAO;QACLC,EAAE,EAAED,CAAC,CAACC,EAAE;QACRC,IAAI,EAAE,eAAe;QACrBC,IAAI,EAAE;UACJC,IAAI,EAAEJ,CAAC;UACPE,IAAI,EAAEX,QAAQ,IAAIS,CAAC,CAACK,SAAS,CAACJ,EAAE,CAACK,OAAO,CAACf,QAAQ,EAAE;YAAEgB,aAAa,EAAE;UAAK,CAAC,CAAC,GAAG,MAAM,GAAGC;QACzF,CAAC;QACDC,QAAQ,EAAEhB,SAAS,CAACiB,GAAG,CAACV,CAAC,CAACC,EAAE,CAAC,IAAI;UAAED,CAAC,EAAE,CAAC;UAAEW,CAAC,EAAE;QAAE;MAChD,CAAC;IACH,CAAC,CAAC;IAEF,MAAMC,KAAa,GAAGtB,KAAK,CAACsB,KAAK,CAACb,GAAG,CAAEc,CAAC,KAAM;MAC5CZ,EAAE,EAAG,IAAGY,CAAC,CAACC,QAAS,KAAID,CAAC,CAACE,QAAS,EAAC;MACnCC,MAAM,EAAEH,CAAC,CAACC,QAAQ;MAClBG,MAAM,EAAEJ,CAAC,CAACE,QAAQ;MAClBG,KAAK,EAAE,IAAAC,yBAAc,EAACN,CAAC,CAACO,uBAAuB,CAAC;MAChDC,cAAc,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;MACtBnB,IAAI,EAAE,YAAY;MAClBoB,SAAS,EAAE,IAAAC,yBAAc,EAACV,CAAC,CAACO,uBAAuB,CAAC;MACpDI,aAAa,EAAEC,kCAAa,CAACC;IAC/B,CAAC,CAAC,CAAC;IAEH,OAAO,CAAC,GAAG/B,KAAK,EAAE,GAAGiB,KAAK,CAAC;EAC7B,CAAC,EAAE,CAACtB,KAAK,CAAC,CAAC;AACb"}