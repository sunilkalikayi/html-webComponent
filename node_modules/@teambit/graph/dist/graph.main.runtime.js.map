{"version":3,"names":["GraphMain","constructor","componentAspect","logger","getGraph","ids","opts","graphBuilder","GraphBuilder","provider","graphql","cli","loggerMain","createLogger","GraphAspect","id","register","graphSchema","graphMain","GraphCmd","GraphqlAspect","ComponentAspect","CLIAspect","LoggerAspect","MainRuntime","addRuntime"],"sources":["graph.main.runtime.ts"],"sourcesContent":["import { CLIAspect, CLIMain, MainRuntime } from '@teambit/cli';\nimport { ComponentMain, ComponentAspect, ComponentID } from '@teambit/component';\nimport { GraphqlAspect, GraphqlMain } from '@teambit/graphql';\nimport { Logger, LoggerAspect, LoggerMain } from '@teambit/logger';\nimport { GetGraphOpts, GraphBuilder } from './graph-builder';\nimport { graphSchema } from './graph.graphql';\nimport { GraphAspect } from './graph.aspect';\nimport { GraphCmd } from './graph-cmd';\nimport { ComponentGraph } from './component-graph';\n\nexport class GraphMain {\n  constructor(private componentAspect: ComponentMain, private logger: Logger) {}\n\n  async getGraph(ids?: ComponentID[], opts: GetGraphOpts = {}): Promise<ComponentGraph> {\n    const graphBuilder = new GraphBuilder(this.componentAspect);\n    return graphBuilder.getGraph(ids, opts);\n  }\n\n  static slots = [];\n  static dependencies = [GraphqlAspect, ComponentAspect, CLIAspect, LoggerAspect];\n  static runtime = MainRuntime;\n  static async provider([graphql, componentAspect, cli, loggerMain]: [\n    GraphqlMain,\n    ComponentMain,\n    CLIMain,\n    LoggerMain\n  ]) {\n    const logger = loggerMain.createLogger(GraphAspect.id);\n\n    const graphBuilder = new GraphBuilder(componentAspect);\n    graphql.register(graphSchema(graphBuilder, componentAspect));\n\n    const graphMain = new GraphMain(componentAspect, logger);\n    cli.register(new GraphCmd());\n\n    return graphMain;\n  }\n}\n\nGraphAspect.addRuntime(GraphMain);\n"],"mappings":";;;;;;;;;;;;;;;;AAAA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AACA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AACA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AACA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AACA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AACA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AACA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AACA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AAGO,MAAMA,SAAS,CAAC;EACrBC,WAAW,CAASC,eAA8B,EAAUC,MAAc,EAAE;IAAA,KAAxDD,eAA8B,GAA9BA,eAA8B;IAAA,KAAUC,MAAc,GAAdA,MAAc;EAAG;EAE7E,MAAMC,QAAQ,CAACC,GAAmB,EAAEC,IAAkB,GAAG,CAAC,CAAC,EAA2B;IACpF,MAAMC,YAAY,GAAG,KAAIC,4BAAY,EAAC,IAAI,CAACN,eAAe,CAAC;IAC3D,OAAOK,YAAY,CAACH,QAAQ,CAACC,GAAG,EAAEC,IAAI,CAAC;EACzC;EAKA,aAAaG,QAAQ,CAAC,CAACC,OAAO,EAAER,eAAe,EAAES,GAAG,EAAEC,UAAU,CAK/D,EAAE;IACD,MAAMT,MAAM,GAAGS,UAAU,CAACC,YAAY,CAACC,qBAAW,CAACC,EAAE,CAAC;IAEtD,MAAMR,YAAY,GAAG,KAAIC,4BAAY,EAACN,eAAe,CAAC;IACtDQ,OAAO,CAACM,QAAQ,CAAC,IAAAC,oBAAW,EAACV,YAAY,EAAEL,eAAe,CAAC,CAAC;IAE5D,MAAMgB,SAAS,GAAG,IAAIlB,SAAS,CAACE,eAAe,EAAEC,MAAM,CAAC;IACxDQ,GAAG,CAACK,QAAQ,CAAC,KAAIG,oBAAQ,GAAE,CAAC;IAE5B,OAAOD,SAAS;EAClB;AACF;AAAC;AAAA,gCA3BYlB,SAAS,WAQL,EAAE;AAAA,gCARNA,SAAS,kBASE,CAACoB,wBAAa,EAAEC,4BAAe,EAAEC,gBAAS,EAAEC,sBAAY,CAAC;AAAA,gCATpEvB,SAAS,aAUHwB,kBAAW;AAmB9BV,qBAAW,CAACW,UAAU,CAACzB,SAAS,CAAC"}