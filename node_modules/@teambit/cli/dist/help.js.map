{"version":3,"names":["SPACE","TITLE_LEFT_SPACES_NUMBER","COMMAND_LEFT_SPACES_NUMBER","NAME_WITH_SPACES_LENGTH","formatHelp","commands","groups","docsDomain","helpProps","groupCommands","commandsStr","formatCommandsHelp","getHeader","getFooter","help","filter","command","private","description","reduce","partialHelp","groupName","group","capitalize","cmdId","getCommandId","name","Object","keys","map","commandsSectionTemplate","join","section","titleSpace","repeat","title","chalk","underline","bold","blue","cmdName","commandTemplate","res","nameSpace","nameWithRightSpace","rightpad","green","yellow"],"sources":["help.ts"],"sourcesContent":["import chalk from 'chalk';\nimport rightpad from 'pad-right';\nimport { capitalize } from 'lodash';\nimport { GroupsType } from '@teambit/legacy/dist/cli/command-groups';\nimport { CommandList } from './cli.main.runtime';\nimport { getCommandId } from './get-command-id';\n\nconst SPACE = ' ';\nconst TITLE_LEFT_SPACES_NUMBER = 2;\nconst COMMAND_LEFT_SPACES_NUMBER = 4;\nconst NAME_WITH_SPACES_LENGTH = 15;\n\ntype HelpProps = {\n  [groupName: string]: GroupContent;\n};\n\ntype GroupContent = {\n  commands: { [cmdName: string]: string };\n  description: string;\n};\n\nexport function formatHelp(commands: CommandList, groups: GroupsType, docsDomain: string) {\n  const helpProps = groupCommands(commands, groups);\n  const commandsStr = formatCommandsHelp(helpProps);\n\n  return `${getHeader(docsDomain)}\n\n${commandsStr}\n\n${getFooter()}`;\n}\n\nfunction groupCommands(commands: CommandList, groups: GroupsType): HelpProps {\n  const help: HelpProps = commands\n    .filter((command) => !command.private && command.description)\n    .reduce(function (partialHelp, command) {\n      const groupName = command.group as string; // at this stage, it must be set\n      partialHelp[groupName] = partialHelp[groupName] || {\n        commands: {},\n        description: groups[groupName] || capitalize(command.group),\n      };\n      const cmdId = getCommandId(command.name);\n      partialHelp[groupName].commands[cmdId] = command.description;\n      return partialHelp;\n    }, {});\n  return help;\n}\n\nfunction formatCommandsHelp(helpProps: HelpProps): string {\n  return Object.keys(helpProps)\n    .map((groupName) => commandsSectionTemplate(helpProps[groupName]))\n    .join('\\n\\n');\n}\n\nfunction commandsSectionTemplate(section: GroupContent): string {\n  const titleSpace = SPACE.repeat(TITLE_LEFT_SPACES_NUMBER);\n  const title = `${titleSpace}${chalk.underline.bold.blue(section.description)}`;\n  const commands = Object.keys(section.commands)\n    .map((cmdName) => commandTemplate(cmdName, section.commands[cmdName]))\n    .join('\\n');\n  const res = `${title}\\n${commands}`;\n  return res;\n}\n\nfunction commandTemplate(name: string, description: string): string {\n  const nameSpace = SPACE.repeat(COMMAND_LEFT_SPACES_NUMBER);\n  const nameWithRightSpace = rightpad(name, NAME_WITH_SPACES_LENGTH, SPACE);\n  const res = `${nameSpace}${chalk.green(nameWithRightSpace)}${description}`;\n  return res;\n}\n\nfunction getHeader(docsDomain: string): string {\n  return `${chalk.bold('usage: bit [--version] [--help] <command> [<args>]')}\n\n${chalk.yellow(`bit documentation: https://${docsDomain}`)}`;\n}\n\nfunction getFooter(): string {\n  return `${chalk.yellow(\"please use 'bit <command> --help' for more information and guides on specific commands.\")}`;\n}\n"],"mappings":"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"}