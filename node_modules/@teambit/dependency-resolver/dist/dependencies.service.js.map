{"version":3,"names":["DependenciesService","render","env","descriptor","getDescriptor","id","config","highlight","language","ignoreIllegals","getDependencies","undefined","dependencies","name","JSON","stringify","displayName"],"sources":["dependencies.service.tsx"],"sourcesContent":["import React from 'react';\nimport { Text, Newline } from 'ink';\nimport { EnvService, EnvDefinition } from '@teambit/envs';\nimport highlight from 'cli-highlight';\n\nexport type DependenciesDescriptor = {\n  id: string;\n  displayName: string;\n  config?: string;\n};\n\nexport class DependenciesService implements EnvService<{}, DependenciesDescriptor> {\n  name = 'Dependencies';\n\n  async render(env: EnvDefinition) {\n    const descriptor = await this.getDescriptor(env);\n\n    return (\n      <Text key={descriptor?.id}>\n        <Text color=\"cyan\">configured dependencies: </Text>\n        <Newline />\n        <Text>\n          {descriptor?.config && highlight(descriptor?.config, { language: 'javascript', ignoreIllegals: true })}\n        </Text>\n        <Newline />\n      </Text>\n    );\n  }\n\n  async getDescriptor(env: EnvDefinition): Promise<DependenciesDescriptor | undefined> {\n    if (!env.env.getDependencies) return undefined;\n    const dependencies = await env.env.getDependencies();\n    return {\n      id: this.name,\n      config: dependencies ? JSON.stringify(dependencies, null, 2) : undefined,\n      displayName: this.name,\n    };\n  }\n}\n"],"mappings":";;;;;;;;;;;;;;;AAAA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AACA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AAEA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AAQO,MAAMA,mBAAmB,CAAmD;EAAA;IAAA,8CAC1E,cAAc;EAAA;EAErB,MAAMC,MAAM,CAACC,GAAkB,EAAE;IAC/B,MAAMC,UAAU,GAAG,MAAM,IAAI,CAACC,aAAa,CAACF,GAAG,CAAC;IAEhD,oBACE,+BAAC,WAAI;MAAC,GAAG,EAAEC,UAAU,aAAVA,UAAU,uBAAVA,UAAU,CAAEE;IAAG,gBACxB,+BAAC,WAAI;MAAC,KAAK,EAAC;IAAM,+BAAiC,eACnD,+BAAC,cAAO,OAAG,eACX,+BAAC,WAAI,QACF,CAAAF,UAAU,aAAVA,UAAU,uBAAVA,UAAU,CAAEG,MAAM,KAAI,IAAAC,uBAAS,EAACJ,UAAU,aAAVA,UAAU,uBAAVA,UAAU,CAAEG,MAAM,EAAE;MAAEE,QAAQ,EAAE,YAAY;MAAEC,cAAc,EAAE;IAAK,CAAC,CAAC,CACjG,eACP,+BAAC,cAAO,OAAG,CACN;EAEX;EAEA,MAAML,aAAa,CAACF,GAAkB,EAA+C;IACnF,IAAI,CAACA,GAAG,CAACA,GAAG,CAACQ,eAAe,EAAE,OAAOC,SAAS;IAC9C,MAAMC,YAAY,GAAG,MAAMV,GAAG,CAACA,GAAG,CAACQ,eAAe,EAAE;IACpD,OAAO;MACLL,EAAE,EAAE,IAAI,CAACQ,IAAI;MACbP,MAAM,EAAEM,YAAY,GAAGE,IAAI,CAACC,SAAS,CAACH,YAAY,EAAE,IAAI,EAAE,CAAC,CAAC,GAAGD,SAAS;MACxEK,WAAW,EAAE,IAAI,CAACH;IACpB,CAAC;EACH;AACF;AAAC"}