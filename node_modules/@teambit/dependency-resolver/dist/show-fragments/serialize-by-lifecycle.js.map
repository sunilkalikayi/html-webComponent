{"version":3,"names":["serializeByLifecycle","deps","lifecycle","filteredByLifecycle","filter","dep","sort","longestLength","getLongestDepName","paddedNames","dependencies","map","paddedName","getNameWithVersion","padEnd","type","join","longestDep","maxBy","length","nameWithVersion","getPackageName","version","id"],"sources":["serialize-by-lifecycle.ts"],"sourcesContent":["import { maxBy } from 'lodash';\nimport type { DependencyList, DependencyLifecycleType, Dependency } from '../dependencies';\n\nexport function serializeByLifecycle(deps: DependencyList, lifecycle: DependencyLifecycleType) {\n  const filteredByLifecycle = deps.filter((dep) => dep.lifecycle === lifecycle).sort();\n  const longestLength = getLongestDepName(filteredByLifecycle);\n  const paddedNames = filteredByLifecycle.dependencies.map((dep) => {\n    const paddedName = getNameWithVersion(dep).padEnd(longestLength + 1, '-');\n    return `${paddedName} (${dep.type})`;\n  });\n  return paddedNames.join('\\n');\n}\n\nfunction getLongestDepName(deps: DependencyList): number {\n  const longestDep = maxBy(deps.dependencies, (dep) => getNameWithVersion(dep).length);\n  if (!longestDep) return 50;\n  return getNameWithVersion(longestDep).length;\n}\n\nfunction getNameWithVersion(dep: Dependency) {\n  const nameWithVersion = dep.getPackageName?.()\n    ? `${dep.getPackageName?.()}@${dep.version}`\n    : `${dep.id}@${dep.version}`;\n  return nameWithVersion;\n}\n"],"mappings":";;;;;;;AAAA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AAGO,SAASA,oBAAoB,CAACC,IAAoB,EAAEC,SAAkC,EAAE;EAC7F,MAAMC,mBAAmB,GAAGF,IAAI,CAACG,MAAM,CAAEC,GAAG,IAAKA,GAAG,CAACH,SAAS,KAAKA,SAAS,CAAC,CAACI,IAAI,EAAE;EACpF,MAAMC,aAAa,GAAGC,iBAAiB,CAACL,mBAAmB,CAAC;EAC5D,MAAMM,WAAW,GAAGN,mBAAmB,CAACO,YAAY,CAACC,GAAG,CAAEN,GAAG,IAAK;IAChE,MAAMO,UAAU,GAAGC,kBAAkB,CAACR,GAAG,CAAC,CAACS,MAAM,CAACP,aAAa,GAAG,CAAC,EAAE,GAAG,CAAC;IACzE,OAAQ,GAAEK,UAAW,KAAIP,GAAG,CAACU,IAAK,GAAE;EACtC,CAAC,CAAC;EACF,OAAON,WAAW,CAACO,IAAI,CAAC,IAAI,CAAC;AAC/B;AAEA,SAASR,iBAAiB,CAACP,IAAoB,EAAU;EACvD,MAAMgB,UAAU,GAAG,IAAAC,eAAK,EAACjB,IAAI,CAACS,YAAY,EAAGL,GAAG,IAAKQ,kBAAkB,CAACR,GAAG,CAAC,CAACc,MAAM,CAAC;EACpF,IAAI,CAACF,UAAU,EAAE,OAAO,EAAE;EAC1B,OAAOJ,kBAAkB,CAACI,UAAU,CAAC,CAACE,MAAM;AAC9C;AAEA,SAASN,kBAAkB,CAACR,GAAe,EAAE;EAAA;EAC3C,MAAMe,eAAe,GAAG,uBAAAf,GAAG,CAACgB,cAAc,gDAAlB,yBAAAhB,GAAG,CAAmB,GACzC,2BAAEA,GAAG,CAACgB,cAAc,yDAAlB,0BAAAhB,GAAG,CAAoB,IAAGA,GAAG,CAACiB,OAAQ,EAAC,GACzC,GAAEjB,GAAG,CAACkB,EAAG,IAAGlB,GAAG,CAACiB,OAAQ,EAAC;EAC9B,OAAOF,eAAe;AACxB"}