{"version":3,"names":["describe","it","dependency","getPackageName","lifecycle","version","setVersion","jest","fn","rootPolicy","getValidSemverDepVersion","pkgName","undefined","variationPolicy","getDepVersion","updateDependencyVersion","expect","toHaveBeenCalledWith"],"sources":["update-dependency-version.spec.ts"],"sourcesContent":["import { updateDependencyVersion } from './update-dependency-version';\nimport { DependencyLifecycleType } from '../dependencies';\n\ndescribe('updateDependencyVersion()', function () {\n  it('should pick version from root policy, when no variation policy is present', function () {\n    const dependency = {\n      getPackageName: () => 'foo',\n      lifecycle: 'dev',\n      version: '1.0.0',\n      // @ts-ignore\n      setVersion: jest.fn(),\n    } as any; // eslint-disable-line\n    const rootPolicy = {\n      // @ts-ignore\n      getValidSemverDepVersion: jest.fn((pkgName: string, lifecycle: DependencyLifecycleType) =>\n        lifecycle === 'runtime' ? '2.0.0' : undefined\n      ),\n    } as any; // eslint-disable-line\n    const variationPolicy = {\n      getDepVersion: () => undefined,\n    } as any; // eslint-disable-line\n    updateDependencyVersion(dependency, rootPolicy, variationPolicy);\n    // The lifecycle type is changed to runtime\n    // root policies don't have a separate property for dev dependencies\n    // both runtime and dev dependencies are specified through \"dependencies\"\n    expect(rootPolicy.getValidSemverDepVersion).toHaveBeenCalledWith('foo', 'runtime');\n    expect(dependency.setVersion).toHaveBeenCalledWith('2.0.0');\n  });\n});\n"],"mappings":";;AAAA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AAGAA,QAAQ,CAAC,2BAA2B,EAAE,YAAY;EAChDC,EAAE,CAAC,2EAA2E,EAAE,YAAY;IAC1F,MAAMC,UAAU,GAAG;MACjBC,cAAc,EAAE,MAAM,KAAK;MAC3BC,SAAS,EAAE,KAAK;MAChBC,OAAO,EAAE,OAAO;MAChB;MACAC,UAAU,EAAEC,IAAI,CAACC,EAAE;IACrB,CAAQ,CAAC,CAAC;IACV,MAAMC,UAAU,GAAG;MACjB;MACAC,wBAAwB,EAAEH,IAAI,CAACC,EAAE,CAAC,CAACG,OAAe,EAAEP,SAAkC,KACpFA,SAAS,KAAK,SAAS,GAAG,OAAO,GAAGQ,SAAS;IAEjD,CAAQ,CAAC,CAAC;IACV,MAAMC,eAAe,GAAG;MACtBC,aAAa,EAAE,MAAMF;IACvB,CAAQ,CAAC,CAAC;IACV,IAAAG,kDAAuB,EAACb,UAAU,EAAEO,UAAU,EAAEI,eAAe,CAAC;IAChE;IACA;IACA;IACAG,MAAM,CAACP,UAAU,CAACC,wBAAwB,CAAC,CAACO,oBAAoB,CAAC,KAAK,EAAE,SAAS,CAAC;IAClFD,MAAM,CAACd,UAAU,CAACI,UAAU,CAAC,CAACW,oBAAoB,CAAC,OAAO,CAAC;EAC7D,CAAC,CAAC;AACJ,CAAC,CAAC"}