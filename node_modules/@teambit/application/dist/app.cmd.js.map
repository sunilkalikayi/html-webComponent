{"version":3,"names":["AppListCmd","constructor","applicationAspect","report","args","json","appComponents","mapApps","JSON","stringify","length","chalk","yellow","rows","flatMap","id","apps","map","app","name","table","CLITable","render","AppCmd"],"sources":["app.cmd.ts"],"sourcesContent":["// eslint-disable-next-line max-classes-per-file\nimport { Command, CommandOptions } from '@teambit/cli';\n// import { Logger } from '@teambit/logger';\nimport chalk from 'chalk';\nimport { CLITable } from '@teambit/cli-table';\nimport { ApplicationMain } from './application.main.runtime';\n\nexport class AppListCmd implements Command {\n  name = 'list';\n  description = 'list all registered apps';\n  alias = '';\n  group = 'apps';\n  options = [['j', 'json', 'return the component data in json format']] as CommandOptions;\n\n  constructor(private applicationAspect: ApplicationMain) {}\n\n  async report(args: [string], { json }: { json: boolean }) {\n    const appComponents = this.applicationAspect.mapApps();\n    if (json) return JSON.stringify(appComponents, null, 2);\n    if (!appComponents.length) return chalk.yellow('no apps found');\n\n    const rows = appComponents.flatMap(([id, apps]) => {\n      return apps.map((app) => [id, app.name]);\n    });\n\n    const table = new CLITable(['id', 'name'], rows);\n    return table.render();\n  }\n}\n\nexport class AppCmd implements Command {\n  name = 'app <sub-command>';\n  description = 'Manages apps';\n  alias = '';\n  group = 'apps';\n  commands: Command[] = [];\n  options = [] as CommandOptions;\n\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  async report(args: [string]) {\n    // it should never be here. Yargs throws an error before reaching this method.\n    return `Please specify a sub-command`;\n  }\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;AAGA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AACA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AAJA;;AAEA;;AAKO,MAAMA,UAAU,CAAoB;EAOzCC,WAAW,CAASC,iBAAkC,EAAE;IAAA,KAApCA,iBAAkC,GAAlCA,iBAAkC;IAAA,8CAN/C,MAAM;IAAA,qDACC,0BAA0B;IAAA,+CAChC,EAAE;IAAA,+CACF,MAAM;IAAA,iDACJ,CAAC,CAAC,GAAG,EAAE,MAAM,EAAE,0CAA0C,CAAC,CAAC;EAEZ;EAEzD,MAAMC,MAAM,CAACC,IAAc,EAAE;IAAEC;EAAwB,CAAC,EAAE;IACxD,MAAMC,aAAa,GAAG,IAAI,CAACJ,iBAAiB,CAACK,OAAO,EAAE;IACtD,IAAIF,IAAI,EAAE,OAAOG,IAAI,CAACC,SAAS,CAACH,aAAa,EAAE,IAAI,EAAE,CAAC,CAAC;IACvD,IAAI,CAACA,aAAa,CAACI,MAAM,EAAE,OAAOC,gBAAK,CAACC,MAAM,CAAC,eAAe,CAAC;IAE/D,MAAMC,IAAI,GAAGP,aAAa,CAACQ,OAAO,CAAC,CAAC,CAACC,EAAE,EAAEC,IAAI,CAAC,KAAK;MACjD,OAAOA,IAAI,CAACC,GAAG,CAAEC,GAAG,IAAK,CAACH,EAAE,EAAEG,GAAG,CAACC,IAAI,CAAC,CAAC;IAC1C,CAAC,CAAC;IAEF,MAAMC,KAAK,GAAG,KAAIC,oBAAQ,EAAC,CAAC,IAAI,EAAE,MAAM,CAAC,EAAER,IAAI,CAAC;IAChD,OAAOO,KAAK,CAACE,MAAM,EAAE;EACvB;AACF;AAAC;AAEM,MAAMC,MAAM,CAAoB;EAAA;IAAA,8CAC9B,mBAAmB;IAAA,qDACZ,cAAc;IAAA,+CACpB,EAAE;IAAA,+CACF,MAAM;IAAA,kDACQ,EAAE;IAAA,iDACd,EAAE;EAAA;EAEZ;EACA,MAAMpB,MAAM,CAACC,IAAc,EAAE;IAC3B;IACA,OAAQ,8BAA6B;EACvC;AACF;AAAC"}