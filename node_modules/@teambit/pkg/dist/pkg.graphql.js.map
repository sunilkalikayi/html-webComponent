{"version":3,"names":["pkgSchema","pkg","typeDefs","gql","resolvers","Component","packageName","component","getPackageName","packageManifest","getManifest","PackageManifest","versions","parent","version","filter","v"],"sources":["pkg.graphql.ts"],"sourcesContent":["import { Component } from '@teambit/component';\nimport { Schema } from '@teambit/graphql';\nimport gql from 'graphql-tag';\n\nimport { PkgMain } from './pkg.main.runtime';\n\nexport function pkgSchema(pkg: PkgMain): Schema {\n  return {\n    typeDefs: gql`\n      extend type Component {\n        packageManifest: PackageManifest\n\n        # package name of the component.\n        packageName: String!\n      }\n\n      type TarDist {\n        tarball: String\n        shasum: String\n      }\n\n      type VersionsPackageManifest {\n        name: String\n        version: String\n        main: String\n        dependencies: JSONObject\n        devDependencies: JSONObject\n        peerDependencies: JSONObject\n        scripts: JSONObject\n        dist: TarDist\n      }\n\n      type PackageManifest {\n        name: String\n        distTags: JSONObject\n        externalRegistry: Boolean\n        versions(version: String): [VersionsPackageManifest]\n      }\n    `,\n    resolvers: {\n      Component: {\n        packageName: (component: Component) => {\n          return pkg.getPackageName(component);\n        },\n        packageManifest: (component: Component) => {\n          return pkg.getManifest(component);\n        },\n      },\n      PackageManifest: {\n        versions: (parent, { version }) => {\n          if (version) {\n            return parent.versions.filter((v) => v.version === version);\n          }\n          return parent.versions;\n        },\n      },\n    },\n  };\n}\n"],"mappings":";;;;;;;AAEA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AAIO,SAASA,SAAS,CAACC,GAAY,EAAU;EAC9C,OAAO;IACLC,QAAQ,EAAE,IAAAC,qBAAG,CAAC;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;IACDC,SAAS,EAAE;MACTC,SAAS,EAAE;QACTC,WAAW,EAAGC,SAAoB,IAAK;UACrC,OAAON,GAAG,CAACO,cAAc,CAACD,SAAS,CAAC;QACtC,CAAC;QACDE,eAAe,EAAGF,SAAoB,IAAK;UACzC,OAAON,GAAG,CAACS,WAAW,CAACH,SAAS,CAAC;QACnC;MACF,CAAC;MACDI,eAAe,EAAE;QACfC,QAAQ,EAAE,CAACC,MAAM,EAAE;UAAEC;QAAQ,CAAC,KAAK;UACjC,IAAIA,OAAO,EAAE;YACX,OAAOD,MAAM,CAACD,QAAQ,CAACG,MAAM,CAAEC,CAAC,IAAKA,CAAC,CAACF,OAAO,KAAKA,OAAO,CAAC;UAC7D;UACA,OAAOD,MAAM,CAACD,QAAQ;QACxB;MACF;IACF;EACF,CAAC;AACH"}