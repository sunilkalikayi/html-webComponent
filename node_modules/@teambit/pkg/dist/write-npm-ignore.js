"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
require("core-js/modules/es.promise.js");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.writeNpmIgnore = writeNpmIgnore;
function _path() {
  const data = require("path");
  _path = function () {
    return data;
  };
  return data;
}
function _fsExtra() {
  const data = _interopRequireDefault(require("fs-extra"));
  _fsExtra = function () {
    return data;
  };
  return data;
}
async function writeNpmIgnore(capsule, envs) {
  var _env$getNpmIgnore;
  const env = envs.getEnv(capsule.component).env;
  const npmIgnoreEntries = (_env$getNpmIgnore = env.getNpmIgnore) === null || _env$getNpmIgnore === void 0 ? void 0 : _env$getNpmIgnore.call(env, {
    component: capsule.component,
    capsule
  });
  if (!npmIgnoreEntries || !npmIgnoreEntries.length) {
    return;
  }
  const NPM_IGNORE_FILE = '.npmignore';
  const npmIgnorePath = (0, _path().join)(capsule.path, NPM_IGNORE_FILE);
  const npmIgnoreEntriesStr = `\n${npmIgnoreEntries.join('\n')}`;
  await _fsExtra().default.appendFile(npmIgnorePath, npmIgnoreEntriesStr);
}

//# sourceMappingURL=write-npm-ignore.js.map