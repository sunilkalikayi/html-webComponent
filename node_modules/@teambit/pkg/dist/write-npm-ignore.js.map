{"version":3,"names":["writeNpmIgnore","capsule","envs","env","getEnv","component","npmIgnoreEntries","getNpmIgnore","length","NPM_IGNORE_FILE","npmIgnorePath","join","path","npmIgnoreEntriesStr","fs","appendFile"],"sources":["write-npm-ignore.ts"],"sourcesContent":["import { join } from 'path';\nimport fs from 'fs-extra';\nimport { EnvsMain, PackageEnv } from '@teambit/envs';\nimport { Capsule } from '@teambit/isolator';\n\nexport async function writeNpmIgnore(capsule: Capsule, envs: EnvsMain): Promise<void> {\n  const env = envs.getEnv(capsule.component).env as PackageEnv;\n  const npmIgnoreEntries = env.getNpmIgnore?.({ component: capsule.component, capsule });\n  if (!npmIgnoreEntries || !npmIgnoreEntries.length) {\n    return;\n  }\n  const NPM_IGNORE_FILE = '.npmignore';\n  const npmIgnorePath = join(capsule.path, NPM_IGNORE_FILE);\n  const npmIgnoreEntriesStr = `\\n${npmIgnoreEntries.join('\\n')}`;\n  await fs.appendFile(npmIgnorePath, npmIgnoreEntriesStr);\n}\n"],"mappings":";;;;;;;;AAAA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AACA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AAIO,eAAeA,cAAc,CAACC,OAAgB,EAAEC,IAAc,EAAiB;EAAA;EACpF,MAAMC,GAAG,GAAGD,IAAI,CAACE,MAAM,CAACH,OAAO,CAACI,SAAS,CAAC,CAACF,GAAiB;EAC5D,MAAMG,gBAAgB,wBAAGH,GAAG,CAACI,YAAY,sDAAhB,uBAAAJ,GAAG,EAAgB;IAAEE,SAAS,EAAEJ,OAAO,CAACI,SAAS;IAAEJ;EAAQ,CAAC,CAAC;EACtF,IAAI,CAACK,gBAAgB,IAAI,CAACA,gBAAgB,CAACE,MAAM,EAAE;IACjD;EACF;EACA,MAAMC,eAAe,GAAG,YAAY;EACpC,MAAMC,aAAa,GAAG,IAAAC,YAAI,EAACV,OAAO,CAACW,IAAI,EAAEH,eAAe,CAAC;EACzD,MAAMI,mBAAmB,GAAI,KAAIP,gBAAgB,CAACK,IAAI,CAAC,IAAI,CAAE,EAAC;EAC9D,MAAMG,kBAAE,CAACC,UAAU,CAACL,aAAa,EAAEG,mBAAmB,CAAC;AACzD"}