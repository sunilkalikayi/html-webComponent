{"version":3,"names":["EnvsSetCmd","constructor","workspace","name","description","COMPONENT_PATTERN_HELP","cmd","report","pattern","env","envId","resolveComponentId","componentIds","idsByPattern","setEnvToComponents","chalk","bold","toString","map","compId","join"],"sources":["envs-set.cmd.ts"],"sourcesContent":["import { Command } from '@teambit/cli';\nimport chalk from 'chalk';\nimport { COMPONENT_PATTERN_HELP } from '@teambit/legacy/dist/constants';\nimport { Workspace } from '../workspace';\n\nexport class EnvsSetCmd implements Command {\n  name = 'set <component-pattern> <env>';\n  description = 'Sets one or more components with a development environment (env)';\n  arguments = [\n    {\n      name: 'component-pattern',\n      description: COMPONENT_PATTERN_HELP,\n    },\n    {\n      name: 'env',\n      description:\n        \"the env's component id (include version for non-core envs. e.g, `teambit.community/envs/community-react@1.95.13`)\",\n    },\n  ];\n  examples = [\n    {\n      cmd: 'set ui/button teambit.react/react',\n      description: \"configures 'ui/button' to use the 'teambit.react/react' env\",\n    },\n    {\n      cmd: 'set ui/button teambit.community/envs/community-mdx@1.95.16',\n      description: \"configures 'ui/button' to use the (non-core) 'teambit.community/envs/community-mdx@1.95.16' env\",\n    },\n    {\n      cmd: 'set \"ui/**\" teambit.react/react',\n      description: \"configures all components that have the 'ui' namespace to use the teambit.react/react env\",\n    },\n  ];\n  options = [];\n  group = 'development';\n\n  constructor(private workspace: Workspace) {}\n\n  async report([pattern, env]: [string, string]) {\n    const envId = await this.workspace.resolveComponentId(env);\n    const componentIds = await this.workspace.idsByPattern(pattern);\n    await this.workspace.setEnvToComponents(envId, componentIds);\n    return `added ${chalk.bold(envId.toString())} env to the following component(s):\n${componentIds.map((compId) => compId.toString()).join('\\n')}`;\n  }\n}\n"],"mappings":";;;;;;;;;;;;;;;;AACA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AACA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AAGO,MAAMA,UAAU,CAAoB;EA+BzCC,WAAW,CAASC,SAAoB,EAAE;IAAA,KAAtBA,SAAoB,GAApBA,SAAoB;IAAA,8CA9BjC,+BAA+B;IAAA,qDACxB,kEAAkE;IAAA,mDACpE,CACV;MACEC,IAAI,EAAE,mBAAmB;MACzBC,WAAW,EAAEC;IACf,CAAC,EACD;MACEF,IAAI,EAAE,KAAK;MACXC,WAAW,EACT;IACJ,CAAC,CACF;IAAA,kDACU,CACT;MACEE,GAAG,EAAE,mCAAmC;MACxCF,WAAW,EAAE;IACf,CAAC,EACD;MACEE,GAAG,EAAE,4DAA4D;MACjEF,WAAW,EAAE;IACf,CAAC,EACD;MACEE,GAAG,EAAE,iCAAiC;MACtCF,WAAW,EAAE;IACf,CAAC,CACF;IAAA,iDACS,EAAE;IAAA,+CACJ,aAAa;EAEsB;EAE3C,MAAMG,MAAM,CAAC,CAACC,OAAO,EAAEC,GAAG,CAAmB,EAAE;IAC7C,MAAMC,KAAK,GAAG,MAAM,IAAI,CAACR,SAAS,CAACS,kBAAkB,CAACF,GAAG,CAAC;IAC1D,MAAMG,YAAY,GAAG,MAAM,IAAI,CAACV,SAAS,CAACW,YAAY,CAACL,OAAO,CAAC;IAC/D,MAAM,IAAI,CAACN,SAAS,CAACY,kBAAkB,CAACJ,KAAK,EAAEE,YAAY,CAAC;IAC5D,OAAQ,SAAQG,gBAAK,CAACC,IAAI,CAACN,KAAK,CAACO,QAAQ,EAAE,CAAE;AACjD,EAAEL,YAAY,CAACM,GAAG,CAAEC,MAAM,IAAKA,MAAM,CAACF,QAAQ,EAAE,CAAC,CAACG,IAAI,CAAC,IAAI,CAAE,EAAC;EAC5D;AACF;AAAC"}