{"version":3,"names":["EnvsReplaceCmd","constructor","workspace","name","description","cmd","report","oldEnv","env","envId","resolveComponentId","components","getComponentsUsingEnv","componentIds","map","comp","id","setEnvToComponents","chalk","bold","toString","compId","join"],"sources":["envs-replace.cmd.ts"],"sourcesContent":["import { Command } from '@teambit/cli';\nimport chalk from 'chalk';\nimport { Workspace } from '../workspace';\n\nexport class EnvsReplaceCmd implements Command {\n  name = 'replace <current-env> <new-env>';\n  description = 'replace an existing env with another env for all components using the old env';\n  options = [];\n  group = 'development';\n  arguments = [\n    { name: 'current-env', description: 'the component id of the current env' },\n    { name: 'new-env', description: 'the component id of the new env' },\n  ];\n  examples = [\n    {\n      cmd: 'replace teambit.harmony/aspect teambit.harmony/node',\n      description: \"components configured to use the 'aspect' env will be configured to use the 'node' env, instead\",\n    },\n  ];\n\n  constructor(private workspace: Workspace) {}\n\n  async report([oldEnv, env]: [string, string]) {\n    const envId = await this.workspace.resolveComponentId(env);\n    const components = await this.workspace.getComponentsUsingEnv(oldEnv, true, true);\n    const componentIds = components.map((comp) => comp.id);\n    await this.workspace.setEnvToComponents(envId, componentIds);\n    return `added ${chalk.bold(envId.toString())} env to the following component(s):\n${componentIds.map((compId) => compId.toString()).join('\\n')}`;\n  }\n}\n"],"mappings":";;;;;;;;;;;;;;;;AACA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AAGO,MAAMA,cAAc,CAAoB;EAgB7CC,WAAW,CAASC,SAAoB,EAAE;IAAA,KAAtBA,SAAoB,GAApBA,SAAoB;IAAA,8CAfjC,iCAAiC;IAAA,qDAC1B,+EAA+E;IAAA,iDACnF,EAAE;IAAA,+CACJ,aAAa;IAAA,mDACT,CACV;MAAEC,IAAI,EAAE,aAAa;MAAEC,WAAW,EAAE;IAAsC,CAAC,EAC3E;MAAED,IAAI,EAAE,SAAS;MAAEC,WAAW,EAAE;IAAkC,CAAC,CACpE;IAAA,kDACU,CACT;MACEC,GAAG,EAAE,qDAAqD;MAC1DD,WAAW,EAAE;IACf,CAAC,CACF;EAE0C;EAE3C,MAAME,MAAM,CAAC,CAACC,MAAM,EAAEC,GAAG,CAAmB,EAAE;IAC5C,MAAMC,KAAK,GAAG,MAAM,IAAI,CAACP,SAAS,CAACQ,kBAAkB,CAACF,GAAG,CAAC;IAC1D,MAAMG,UAAU,GAAG,MAAM,IAAI,CAACT,SAAS,CAACU,qBAAqB,CAACL,MAAM,EAAE,IAAI,EAAE,IAAI,CAAC;IACjF,MAAMM,YAAY,GAAGF,UAAU,CAACG,GAAG,CAAEC,IAAI,IAAKA,IAAI,CAACC,EAAE,CAAC;IACtD,MAAM,IAAI,CAACd,SAAS,CAACe,kBAAkB,CAACR,KAAK,EAAEI,YAAY,CAAC;IAC5D,OAAQ,SAAQK,gBAAK,CAACC,IAAI,CAACV,KAAK,CAACW,QAAQ,EAAE,CAAE;AACjD,EAAEP,YAAY,CAACC,GAAG,CAAEO,MAAM,IAAKA,MAAM,CAACD,QAAQ,EAAE,CAAC,CAACE,IAAI,CAAC,IAAI,CAAE,EAAC;EAC5D;AACF;AAAC"}