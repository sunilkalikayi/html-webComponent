{"version":3,"names":["WatchQueue","constructor","concurrency","queue","PQueue","autoStart","getQueue","add","fn","priority","onIdle"],"sources":["watch-queue.ts"],"sourcesContent":["import PQueue from 'p-queue';\n\nexport class WatchQueue {\n  private queue: PQueue;\n  constructor(concurrency = 1) {\n    this.queue = new PQueue({ concurrency, autoStart: true });\n  }\n  getQueue() {\n    return this.queue;\n  }\n  add<T>(fn: () => T, priority?: number): Promise<T> {\n    return this.queue.add(fn, { priority });\n  }\n  onIdle(): Promise<void> {\n    return this.queue.onIdle();\n  }\n}\n"],"mappings":";;;;;;;;;;;;;;AAAA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AAEO,MAAMA,UAAU,CAAC;EAEtBC,WAAW,CAACC,WAAW,GAAG,CAAC,EAAE;IAAA;IAC3B,IAAI,CAACC,KAAK,GAAG,KAAIC,iBAAM,EAAC;MAAEF,WAAW;MAAEG,SAAS,EAAE;IAAK,CAAC,CAAC;EAC3D;EACAC,QAAQ,GAAG;IACT,OAAO,IAAI,CAACH,KAAK;EACnB;EACAI,GAAG,CAAIC,EAAW,EAAEC,QAAiB,EAAc;IACjD,OAAO,IAAI,CAACN,KAAK,CAACI,GAAG,CAACC,EAAE,EAAE;MAAEC;IAAS,CAAC,CAAC;EACzC;EACAC,MAAM,GAAkB;IACtB,OAAO,IAAI,CAACP,KAAK,CAACO,MAAM,EAAE;EAC5B;AACF;AAAC"}