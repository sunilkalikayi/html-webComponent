{"version":3,"names":["ScopeUI","constructor","routeSlot","componentUi","menuSlot","sidebar","sidebarSlot","commandBarUI","scopeBadgeSlot","menuWidgetSlot","sidebarItemSlot","menuItemSlot","cornerSlot","overviewSlot","contextSlot","drawerWidgetSlot","drawerComponentsFiltersSlot","routes","register","menuItems","componentTreeNodes","map","componentTreeNode","links","drawer","registerDrawer","filters","widgets","components","updateComponents","category","title","keyChar","handler","run","registerBadge","badges","getScope","options","TargetScopeOverview","scopeClassName","Corner","listSidebarLinks","useScope","getContext","setSidebarToggle","paneClassName","PaneWrapper","registerOverviewLine","lines","registerRoutes","applyMenuRoutes","registerMenuRoutes","path","routePath","element","getMenu","ScopeAspect","id","getScopeMenu","registerExplicitRoutes","getComponentUI","registerMenuWidget","registerCorner","corner","registerComponentUrl","func","componentUrlFunc","replaceOverview","replaceDescription","replaceMetadataSection","registerMetadataItem","replaceComponentGrid","registerMetadata","addContext","context","contexts","values","ComponentUrlFuncProvider","children","flatten","concat","registerDefaultDrawers","assumeScopeInUrl","overrideUseComponents","scopeDrawer","treeWidgets","filtersSlot","uiRoot","setKeyBindHandler","addCommand","action","displayName","keybinding","sorted","sort","a","b","aWeight","weight","bWeight","compact","link","component","provider","ui","config","componentFiltersSlot","scopeUi","registerDrawerComponentFilters","DeprecateFilter","EnvsFilter","ShowMainFilter","registerDrawerWidgets","registerRoot","bind","registerMenuItem","showGallery","registerSidebarLink","Gallery","UIAspect","ComponentAspect","SidebarAspect","CommandBarAspect","UIRuntime","Slot","withType","addRuntime"],"sources":["scope.ui.runtime.tsx"],"sourcesContent":["import type { ComponentUI, ComponentModel } from '@teambit/component';\nimport { compact, flatten } from 'lodash';\nimport { ComponentAspect } from '@teambit/component';\nimport { Slot, SlotRegistry } from '@teambit/harmony';\nimport { RouteSlot } from '@teambit/ui-foundation.ui.react-router.slot-router';\nimport { SidebarAspect, SidebarUI, SidebarItem, SidebarItemSlot } from '@teambit/sidebar';\nimport { ComponentTreeNode } from '@teambit/component-tree';\nimport { UIAspect, UIRootUI as UIRoot, UIRuntime, UiUI } from '@teambit/ui';\nimport React, { ComponentType, ReactNode } from 'react';\nimport { MenuItemSlot, MenuItem } from '@teambit/ui-foundation.ui.main-dropdown';\nimport { RouteProps } from 'react-router-dom';\nimport { MenuWidget, MenuWidgetSlot } from '@teambit/ui-foundation.ui.menu';\nimport { MenuLinkItem } from '@teambit/design.ui.surfaces.menu.link-item';\nimport CommandBarAspect, { CommandBarUI, CommandHandler } from '@teambit/command-bar';\nimport { ScopeModel } from '@teambit/scope.models.scope-model';\nimport { DrawerType } from '@teambit/ui-foundation.ui.tree.drawer';\nimport {\n  DrawerWidgetSlot,\n  FilterWidget,\n  TreeToggleWidget,\n  ComponentFiltersSlot,\n} from '@teambit/component.ui.component-drawer';\nimport { ComponentFilters } from '@teambit/component.ui.component-filters.component-filter-context';\nimport { DeprecateFilter } from '@teambit/component.ui.component-filters.deprecate-filter';\nimport { EnvsFilter } from '@teambit/component.ui.component-filters.env-filter';\nimport { ComponentUrlResolver, ComponentUrlProvider } from '@teambit/component.modules.component-url';\nimport { ShowMainFilter } from '@teambit/component.ui.component-filters.show-main-filter';\nimport { ScopeMenu, ScopeUseBox } from './ui/menu';\nimport { ScopeAspect } from './scope.aspect';\nimport { Scope } from './ui/scope';\nimport { scopeDrawer } from './scope.ui.drawer';\nimport { GetScopeOptions } from './get-scope-options';\n\nexport type ScopeBadge = ComponentType;\n\nexport type ScopeBadgeSlot = SlotRegistry<ScopeBadge[]>;\n\nexport type ContextSlot = SlotRegistry<ScopeContextType[]>;\n\nexport type ScopeContextType = ComponentType<{ scope: ScopeModel; children: ReactNode }>;\n\nexport type SidebarSlot = SlotRegistry<ComponentTreeNode>;\n\nexport type ScopeOverview = ComponentType;\n\nexport type ScopeOverviewSlot = SlotRegistry<ScopeOverview>;\n\nexport type Corner = ComponentType;\n\nexport type CornerSlot = SlotRegistry<Corner>;\n\nexport type OverviewLine = ComponentType;\n\nexport type OverviewLineSlot = SlotRegistry<OverviewLine[]>;\n\nexport type ScopeUIConfig = {\n  showGallery: boolean;\n};\n\nexport class ScopeUI {\n  constructor(\n    /**\n     * route slot.\n     */\n    private routeSlot: RouteSlot,\n\n    /**\n     * component ui extension.\n     */\n    private componentUi: ComponentUI,\n    /**\n     * menu slot\n     */\n    private menuSlot: RouteSlot,\n\n    private sidebar: SidebarUI,\n\n    private sidebarSlot: SidebarSlot,\n\n    private commandBarUI: CommandBarUI,\n\n    private scopeBadgeSlot: ScopeBadgeSlot,\n\n    private menuWidgetSlot: MenuWidgetSlot,\n\n    /**\n     * sidebar link slot\n     */\n    private sidebarItemSlot: SidebarItemSlot,\n\n    /**\n     * main dropdown item slot\n     */\n    private menuItemSlot: MenuItemSlot,\n\n    /**\n     * corner slot\n     */\n    private cornerSlot: CornerSlot,\n\n    /**\n     * overview line slot to add new lines beneath the overview section\n     */\n    private overviewSlot: OverviewLineSlot,\n\n    /**\n     * add a new context to ui\n     */\n    private contextSlot: ContextSlot,\n    private drawerWidgetSlot: DrawerWidgetSlot,\n    private drawerComponentsFiltersSlot: ComponentFiltersSlot\n  ) {}\n\n  private setSidebarToggle: (updated: CommandHandler) => void = () => {};\n\n  /**\n   * register a new badge into the scope overview.\n   */\n  registerBadge(...badges: ScopeBadge[]) {\n    this.scopeBadgeSlot.register(badges);\n    return this;\n  }\n\n  getScope(options: GetScopeOptions) {\n    return (\n      <Scope\n        TargetScopeOverview={options.TargetScopeOverview}\n        scopeClassName={options.scopeClassName}\n        TargetCorner={options.Corner}\n        routeSlot={this.routeSlot}\n        menuSlot={this.menuSlot}\n        sidebar={<this.sidebar.render items={this.listSidebarLinks()} />}\n        scopeUi={this}\n        userUseScopeQuery={options.useScope}\n        badgeSlot={this.scopeBadgeSlot}\n        overviewLineSlot={this.overviewSlot}\n        context={this.getContext()}\n        onSidebarTogglerChange={this.setSidebarToggle}\n        cornerSlot={this.cornerSlot}\n        paneClassName={options.paneClassName}\n        PaneWrapper={options.PaneWrapper}\n      />\n    );\n  }\n\n  /**\n   * register a new line beneath the scope overview section.\n   */\n  registerOverviewLine(...lines: OverviewLine[]) {\n    this.overviewSlot.register(lines);\n    return this;\n  }\n\n  /**\n   * register a route to the scope.\n   */\n  registerRoutes(routes: RouteProps[]) {\n    this.routeSlot.register(routes);\n    return this;\n  }\n\n  registerMenuRoutes = (routes: RouteProps[]) => {\n    this.menuSlot.register(routes);\n    return this;\n  };\n\n  private applyMenuRoutes() {\n    this.registerMenuRoutes([\n      {\n        path: this.componentUi.routePath,\n        element: this.componentUi.getMenu(ScopeAspect.id),\n      },\n      {\n        path: '/',\n        element: this.getScopeMenu(),\n      },\n    ]);\n  }\n\n  getScopeMenu() {\n    return <ScopeMenu widgetSlot={this.menuWidgetSlot} menuItemSlot={this.menuItemSlot} />;\n  }\n\n  private registerExplicitRoutes() {\n    this.applyMenuRoutes();\n    this.registerRoutes([\n      {\n        path: this.componentUi.routePath,\n        element: this.componentUi.getComponentUI(ScopeAspect.id),\n      },\n    ]);\n  }\n\n  registerMenuWidget(...menuItems: MenuWidget[]) {\n    this.menuWidgetSlot.register(menuItems);\n  }\n\n  registerCorner(corner: Corner) {\n    this.cornerSlot.register(corner);\n  }\n\n  private componentUrlFunc: ComponentUrlResolver | undefined;\n  registerComponentUrl(func: ComponentUrlResolver) {\n    this.componentUrlFunc = func;\n  }\n\n  /**\n   * register a scope overview.\n   */\n  replaceOverview() {}\n\n  /**\n   * register description.\n   */\n  replaceDescription() {}\n\n  /**\n   * register metadata section.\n   */\n  replaceMetadataSection() {}\n\n  /**\n   * register a metadata item.\n   */\n  registerMetadataItem() {}\n\n  replaceComponentGrid() {}\n\n  /**\n   * register metadata.\n   */\n  registerMetadata() {}\n\n  /**\n   * add a new context to the scope.\n   */\n  addContext(...context: ScopeContextType[]) {\n    this.contextSlot.register(context);\n    return this;\n  }\n\n  private getContext() {\n    const contexts = this.contextSlot.values();\n    // eslint-disable-next-line react/prop-types\n    const ComponentUrlFuncProvider: ScopeContextType = ({ children }) => (\n      <ComponentUrlProvider value={this.componentUrlFunc}>{children}</ComponentUrlProvider>\n    );\n\n    return flatten(contexts).concat(ComponentUrlFuncProvider);\n  }\n\n  registerMenuItem = (menuItems: MenuItem[]) => {\n    this.menuItemSlot.register(menuItems);\n  };\n\n  /**\n   * register a sidebar Widget for the scope\n   */\n  registerSidebarWidget = (componentTreeNodes: ComponentTreeNode[]) => {\n    componentTreeNodes.map((componentTreeNode) => this.sidebarSlot.register(componentTreeNode));\n    return this;\n  };\n\n  /**\n   * register a sidebar link to the section above the drawers\n   */\n  registerSidebarLink = (...links: SidebarItem[]) => {\n    this.sidebarItemSlot.register(links);\n  };\n\n  registerDrawers = (...drawer: DrawerType[]) => {\n    this.sidebar.registerDrawer(...drawer);\n    return this;\n  };\n\n  /**\n   * register component filters\n   */\n  registerDrawerComponentFilters = (filters: ComponentFilters) => {\n    this.drawerComponentsFiltersSlot.register(filters);\n  };\n\n  registerDrawerWidgets = (widgets: ReactNode[]) => {\n    this.drawerWidgetSlot.register(widgets);\n  };\n\n  registerDefaultDrawers(assumeScopeInUrl = false, overrideUseComponents?: () => { components: ComponentModel[] }) {\n    this.sidebar.registerDrawer(\n      scopeDrawer({\n        treeWidgets: this.sidebarSlot,\n        filtersSlot: this.drawerComponentsFiltersSlot,\n        drawerWidgetSlot: this.drawerWidgetSlot,\n        assumeScopeInUrl,\n        overrideUseComponents,\n      })\n    );\n  }\n\n  uiRoot(): UIRoot {\n    this.registerDefaultDrawers();\n    const [setKeyBindHandler] = this.commandBarUI.addCommand({\n      id: 'sidebar.toggle', // TODO - extract to a component!\n      action: () => {},\n      displayName: 'Toggle component list',\n      keybinding: 'alt+s',\n    });\n    this.setSidebarToggle = setKeyBindHandler;\n\n    return {\n      routes: [\n        {\n          path: '/*',\n          element: (\n            <Scope\n              routeSlot={this.routeSlot}\n              menuSlot={this.menuSlot}\n              sidebar={<this.sidebar.render items={this.listSidebarLinks()} />}\n              scopeUi={this}\n              badgeSlot={this.scopeBadgeSlot}\n              overviewLineSlot={this.overviewSlot}\n              context={this.getContext()}\n              onSidebarTogglerChange={this.setSidebarToggle}\n              cornerSlot={this.cornerSlot}\n            />\n          ),\n        },\n      ],\n    };\n  }\n\n  listSidebarLinks() {\n    const links = flatten(this.sidebarItemSlot.values());\n    const sorted = links.sort((a, b) => {\n      const aWeight = a?.weight || 0;\n      const bWeight = b?.weight || 0;\n      return aWeight - bWeight;\n    });\n\n    return compact(\n      sorted.map((link) => {\n        return link.component;\n      })\n    );\n  }\n\n  /** registers available components */\n  setComponents = (components: ComponentModel[]) => {\n    this.componentUi.updateComponents(components);\n  };\n\n  private menuItems: MenuItem[] = [\n    {\n      category: 'general',\n      title: 'Open command bar',\n      keyChar: 'mod+k',\n      handler: () => this.commandBarUI?.run('command-bar.open'),\n    },\n    {\n      category: 'general',\n      title: 'Toggle component list',\n      keyChar: 'alt+s',\n      handler: () => this.commandBarUI?.run('sidebar.toggle'),\n    },\n  ];\n\n  static dependencies = [UIAspect, ComponentAspect, SidebarAspect, CommandBarAspect];\n  static runtime = UIRuntime;\n  static slots = [\n    Slot.withType<RouteProps>(),\n    Slot.withType<RouteProps>(),\n    Slot.withType<ComponentTreeNode>(),\n    Slot.withType<ScopeBadge>(),\n    Slot.withType<ScopeOverview>(),\n    Slot.withType<MenuWidget[]>(),\n    Slot.withType<MenuItemSlot>(),\n    Slot.withType<CornerSlot>(),\n    Slot.withType<OverviewLineSlot>(),\n    Slot.withType<SidebarItemSlot>(),\n    Slot.withType<ContextSlot>(),\n    Slot.withType<DrawerWidgetSlot>(),\n    Slot.withType<ComponentFiltersSlot>(),\n  ];\n\n  static defaultConfig = {\n    showGallery: true,\n  };\n\n  static async provider(\n    [ui, componentUi, sidebar, commandBarUI]: [UiUI, ComponentUI, SidebarUI, CommandBarUI],\n    config: ScopeUIConfig,\n    [\n      routeSlot,\n      menuSlot,\n      sidebarSlot,\n      scopeBadgeSlot,\n      menuWidgetSlot,\n      menuItemSlot,\n      sidebarItemSlot,\n      cornerSlot,\n      overviewSlot,\n      contextSlot,\n      drawerWidgetSlot,\n      componentFiltersSlot,\n    ]: [\n      RouteSlot,\n      RouteSlot,\n      SidebarSlot,\n      ScopeBadgeSlot,\n      MenuWidgetSlot,\n      MenuItemSlot,\n      SidebarItemSlot,\n      CornerSlot,\n      OverviewLineSlot,\n      ContextSlot,\n      DrawerWidgetSlot,\n      ComponentFiltersSlot\n    ]\n  ) {\n    const scopeUi = new ScopeUI(\n      routeSlot,\n      componentUi,\n      menuSlot,\n      sidebar,\n      sidebarSlot,\n      commandBarUI,\n      scopeBadgeSlot,\n      menuWidgetSlot,\n      sidebarItemSlot,\n      menuItemSlot,\n      cornerSlot,\n      overviewSlot,\n      contextSlot,\n      drawerWidgetSlot,\n      componentFiltersSlot\n    );\n    scopeUi.registerDrawerComponentFilters([DeprecateFilter, EnvsFilter, ShowMainFilter(false)]);\n    scopeUi.registerDrawerWidgets([\n      <FilterWidget key={'workspace-filter-widget'} />,\n      <TreeToggleWidget key={'workspace-tree-toggle-widget'} />,\n    ]);\n    if (ui) ui.registerRoot(scopeUi.uiRoot.bind(scopeUi));\n    scopeUi.registerMenuItem(scopeUi.menuItems);\n    scopeUi.registerMenuWidget(() => <ScopeUseBox />);\n    if (config.showGallery)\n      scopeUi.registerSidebarLink({\n        component: function Gallery() {\n          return (\n            <MenuLinkItem exact href=\"/\" icon=\"comps\">\n              Overview\n            </MenuLinkItem>\n          );\n        },\n      });\n    if (ui) scopeUi.registerExplicitRoutes();\n\n    return scopeUi;\n  }\n}\n\nexport default ScopeUI;\n\nScopeAspect.addRuntime(ScopeUI);\n"],"mappings":"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"}