{"version":3,"names":["deprecationSchema","deprecation","typeDefs","gql","resolvers","Component","component","getDeprecationInfo"],"sources":["deprecation.graphql.ts"],"sourcesContent":["import { Component } from '@teambit/component';\nimport { Schema } from '@teambit/graphql';\nimport gql from 'graphql-tag';\n\nimport { DeprecationMain } from './deprecation.main.runtime';\n\nexport function deprecationSchema(deprecation: DeprecationMain): Schema {\n  return {\n    typeDefs: gql`\n      extend type Component {\n        deprecation: DeprecationInfo\n      }\n\n      type DeprecationInfo {\n        isDeprecate: Boolean\n        newId: String\n      }\n\n      type DeprecationResult {\n        bitIds: [String]\n        missingComponents: [String]\n      }\n\n      type Mutation {\n        # deprecate components\n        deprecate(bitIds: [String!]!): DeprecationResult\n\n        # undo deprecate to components\n        undeprecate(bitIds: [String!]!): DeprecationResult\n      }\n    `,\n    resolvers: {\n      // Mutation: {\n      //   deprecate: (req: any, { bitIds }: { bitIds: string[] }, context: { verb: string }) => {\n      //     if (context.verb !== 'write') throw new Error('You are not authorized');\n      //     return deprecation.deprecate(bitIds);\n      //   },\n\n      //   undeprecate: (req: any, { bitIds }: { bitIds: string[] }, context: { verb: string }) => {\n      //     if (context.verb !== 'write') throw new Error('You are not authorized');\n      //     return deprecation.unDeprecate(bitIds);\n      //   },\n      // },\n      Component: {\n        deprecation: (component: Component) => {\n          return deprecation.getDeprecationInfo(component);\n        },\n      },\n    },\n  };\n}\n"],"mappings":";;;;;;;AAEA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AAIO,SAASA,iBAAiB,CAACC,WAA4B,EAAU;EACtE,OAAO;IACLC,QAAQ,EAAE,IAAAC,qBAAG,CAAC;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;IACDC,SAAS,EAAE;MACT;MACA;MACA;MACA;MACA;;MAEA;MACA;MACA;MACA;MACA;MACAC,SAAS,EAAE;QACTJ,WAAW,EAAGK,SAAoB,IAAK;UACrC,OAAOL,WAAW,CAACM,kBAAkB,CAACD,SAAS,CAAC;QAClD;MACF;IACF;EACF,CAAC;AACH"}