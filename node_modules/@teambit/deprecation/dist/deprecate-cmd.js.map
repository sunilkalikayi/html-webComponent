{"version":3,"names":["DeprecateCmd","constructor","deprecation","workspace","name","description","report","id","newId","result","deprecate","chalk","green","bold","componentId","resolveComponentId","newComponentId","undefined"],"sources":["deprecate-cmd.ts"],"sourcesContent":["import chalk from 'chalk';\nimport { Workspace } from '@teambit/workspace';\nimport { Command, CommandOptions } from '@teambit/cli';\nimport { DeprecationMain } from './deprecation.main.runtime';\n\nexport class DeprecateCmd implements Command {\n  name = 'deprecate <component-name>';\n  arguments = [{ name: 'component-name', description: 'component name or component id' }];\n  description = 'deprecate a component';\n  group = 'collaborate';\n  skipWorkspace = true;\n  alias = 'd';\n  options = [['', 'new-id <string>', 'if replaced by another component, enter the new component id']] as CommandOptions;\n  loader = true;\n  migration = true;\n  remoteOp = true;\n\n  constructor(private deprecation: DeprecationMain, private workspace: Workspace) {}\n\n  async report([id]: [string], { newId }: { newId?: string }): Promise<string> {\n    const result = await this.deprecate(id, newId);\n    if (result) {\n      return chalk.green(`the component \"${id}\" has been deprecated successfully`);\n    }\n    return chalk.bold(`the component \"${id}\" is already deprecated. no changes have been made`);\n  }\n\n  private async deprecate(id: string, newId?: string): Promise<boolean> {\n    const componentId = await this.workspace.resolveComponentId(id);\n    const newComponentId = newId ? await this.workspace.resolveComponentId(newId) : undefined;\n    return this.deprecation.deprecate(componentId, newComponentId);\n  }\n}\n"],"mappings":";;;;;;;;;;;;;;;;AAAA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AAKO,MAAMA,YAAY,CAAoB;EAY3CC,WAAW,CAASC,WAA4B,EAAUC,SAAoB,EAAE;IAAA,KAA5DD,WAA4B,GAA5BA,WAA4B;IAAA,KAAUC,SAAoB,GAApBA,SAAoB;IAAA,8CAXvE,4BAA4B;IAAA,mDACvB,CAAC;MAAEC,IAAI,EAAE,gBAAgB;MAAEC,WAAW,EAAE;IAAiC,CAAC,CAAC;IAAA,qDACzE,uBAAuB;IAAA,+CAC7B,aAAa;IAAA,uDACL,IAAI;IAAA,+CACZ,GAAG;IAAA,iDACD,CAAC,CAAC,EAAE,EAAE,iBAAiB,EAAE,8DAA8D,CAAC,CAAC;IAAA,gDAC1F,IAAI;IAAA,mDACD,IAAI;IAAA,kDACL,IAAI;EAEkE;EAEjF,MAAMC,MAAM,CAAC,CAACC,EAAE,CAAW,EAAE;IAAEC;EAA0B,CAAC,EAAmB;IAC3E,MAAMC,MAAM,GAAG,MAAM,IAAI,CAACC,SAAS,CAACH,EAAE,EAAEC,KAAK,CAAC;IAC9C,IAAIC,MAAM,EAAE;MACV,OAAOE,gBAAK,CAACC,KAAK,CAAE,kBAAiBL,EAAG,oCAAmC,CAAC;IAC9E;IACA,OAAOI,gBAAK,CAACE,IAAI,CAAE,kBAAiBN,EAAG,oDAAmD,CAAC;EAC7F;EAEA,MAAcG,SAAS,CAACH,EAAU,EAAEC,KAAc,EAAoB;IACpE,MAAMM,WAAW,GAAG,MAAM,IAAI,CAACX,SAAS,CAACY,kBAAkB,CAACR,EAAE,CAAC;IAC/D,MAAMS,cAAc,GAAGR,KAAK,GAAG,MAAM,IAAI,CAACL,SAAS,CAACY,kBAAkB,CAACP,KAAK,CAAC,GAAGS,SAAS;IACzF,OAAO,IAAI,CAACf,WAAW,CAACQ,SAAS,CAACI,WAAW,EAAEE,cAAc,CAAC;EAChE;AACF;AAAC"}