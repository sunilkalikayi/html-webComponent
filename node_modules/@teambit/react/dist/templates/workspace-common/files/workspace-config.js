"use strict";

require("core-js/modules/es.promise.js");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.workspaceConfig = workspaceConfig;
function _config() {
  const data = require("@teambit/config");
  _config = function () {
    return data;
  };
  return data;
}
function _commentJson() {
  const data = require("comment-json");
  _commentJson = function () {
    return data;
  };
  return data;
}
function _constants() {
  const data = require("../constants");
  _constants = function () {
    return data;
  };
  return data;
}
async function workspaceConfig({
  name,
  defaultScope
}, extraConfig) {
  const scope = defaultScope || _constants().DEFAULT_SCOPE_NAME;
  const configParsed = await (0, _config().getWorkspaceConfigTemplateParsed)();
  configParsed['teambit.workspace/workspace'].name = name;
  configParsed['teambit.workspace/workspace'].defaultScope = scope;
  configParsed['teambit.dependencies/dependency-resolver'].packageManager = 'teambit.dependencies/pnpm';
  configParsed['teambit.dependencies/dependency-resolver'].policy = {
    dependencies: {
      '@teambit/eslint-config-bit-react': '~0.0.367',
      '@typescript-eslint/eslint-plugin': '4.29.3',
      'eslint-import-resolver-node': '0.3.6',
      'eslint-plugin-import': '2.22.1',
      'eslint-plugin-jest': '24.4.0',
      'eslint-plugin-jsx-a11y': '6.4.1',
      'eslint-plugin-mdx': '1.15.0',
      'eslint-plugin-react': '7.25.1'
    },
    peerDependencies: {
      '@testing-library/react': '^12.1.5',
      react: '17.0.2',
      'react-dom': '17.0.2'
    }
  };
  const variants = {
    'teambit.workspace/variants': (0, _commentJson().parse)(`{}`)
  };
  let configMerged = (0, _commentJson().assign)(configParsed, variants);
  if (extraConfig) {
    configMerged = (0, _commentJson().assign)(configMerged, extraConfig);
  }
  return (0, _config().stringifyWorkspaceConfig)(configMerged);
}

//# sourceMappingURL=workspace-config.js.map