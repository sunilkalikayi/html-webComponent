{"version":3,"names":["workspaceConfig","name","defaultScope","extraConfig","scope","DEFAULT_SCOPE_NAME","configParsed","getWorkspaceConfigTemplateParsed","packageManager","policy","dependencies","peerDependencies","react","variants","parse","configMerged","assign","stringifyWorkspaceConfig"],"sources":["workspace-config.ts"],"sourcesContent":["import { WorkspaceContext } from '@teambit/generator';\nimport { getWorkspaceConfigTemplateParsed, stringifyWorkspaceConfig } from '@teambit/config';\nimport { parse, assign } from 'comment-json';\nimport { DEFAULT_SCOPE_NAME } from '../constants';\n\nexport async function workspaceConfig({ name, defaultScope }: WorkspaceContext, extraConfig?: Record<string, any>) {\n  const scope = defaultScope || DEFAULT_SCOPE_NAME;\n  const configParsed = await getWorkspaceConfigTemplateParsed();\n  configParsed['teambit.workspace/workspace'].name = name;\n  configParsed['teambit.workspace/workspace'].defaultScope = scope;\n  configParsed['teambit.dependencies/dependency-resolver'].packageManager = 'teambit.dependencies/pnpm';\n  configParsed['teambit.dependencies/dependency-resolver'].policy = {\n    dependencies: {\n      '@teambit/eslint-config-bit-react': '~0.0.367',\n      '@typescript-eslint/eslint-plugin': '4.29.3',\n      'eslint-import-resolver-node': '0.3.6',\n      'eslint-plugin-import': '2.22.1',\n      'eslint-plugin-jest': '24.4.0',\n      'eslint-plugin-jsx-a11y': '6.4.1',\n      'eslint-plugin-mdx': '1.15.0',\n      'eslint-plugin-react': '7.25.1',\n    },\n    peerDependencies: {\n      '@testing-library/react': '^12.1.5',\n      react: '17.0.2',\n      'react-dom': '17.0.2',\n    },\n  };\n\n  const variants = {\n    'teambit.workspace/variants': parse(`{}`),\n  };\n\n  let configMerged = assign(configParsed, variants);\n\n  if (extraConfig) {\n    configMerged = assign(configMerged, extraConfig);\n  }\n\n  return stringifyWorkspaceConfig(configMerged);\n}\n"],"mappings":";;;;;;;AACA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AACA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AACA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AAEO,eAAeA,eAAe,CAAC;EAAEC,IAAI;EAAEC;AAA+B,CAAC,EAAEC,WAAiC,EAAE;EACjH,MAAMC,KAAK,GAAGF,YAAY,IAAIG,+BAAkB;EAChD,MAAMC,YAAY,GAAG,MAAM,IAAAC,0CAAgC,GAAE;EAC7DD,YAAY,CAAC,6BAA6B,CAAC,CAACL,IAAI,GAAGA,IAAI;EACvDK,YAAY,CAAC,6BAA6B,CAAC,CAACJ,YAAY,GAAGE,KAAK;EAChEE,YAAY,CAAC,0CAA0C,CAAC,CAACE,cAAc,GAAG,2BAA2B;EACrGF,YAAY,CAAC,0CAA0C,CAAC,CAACG,MAAM,GAAG;IAChEC,YAAY,EAAE;MACZ,kCAAkC,EAAE,UAAU;MAC9C,kCAAkC,EAAE,QAAQ;MAC5C,6BAA6B,EAAE,OAAO;MACtC,sBAAsB,EAAE,QAAQ;MAChC,oBAAoB,EAAE,QAAQ;MAC9B,wBAAwB,EAAE,OAAO;MACjC,mBAAmB,EAAE,QAAQ;MAC7B,qBAAqB,EAAE;IACzB,CAAC;IACDC,gBAAgB,EAAE;MAChB,wBAAwB,EAAE,SAAS;MACnCC,KAAK,EAAE,QAAQ;MACf,WAAW,EAAE;IACf;EACF,CAAC;EAED,MAAMC,QAAQ,GAAG;IACf,4BAA4B,EAAE,IAAAC,oBAAK,EAAE,IAAG;EAC1C,CAAC;EAED,IAAIC,YAAY,GAAG,IAAAC,qBAAM,EAACV,YAAY,EAAEO,QAAQ,CAAC;EAEjD,IAAIV,WAAW,EAAE;IACfY,YAAY,GAAG,IAAAC,qBAAM,EAACD,YAAY,EAAEZ,WAAW,CAAC;EAClD;EAEA,OAAO,IAAAc,kCAAwB,EAACF,YAAY,CAAC;AAC/C"}