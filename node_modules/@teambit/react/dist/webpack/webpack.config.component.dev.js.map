{"version":3,"names":["matchNothingRegex","workDir","envId","module","rules","test","enforce","include","path","join","descriptionData","componentId","value","use","require","resolve","ComponentID","isValidObject","loader","options","babelrc","configFile","plugins","compact","minified","presets","ReactRefreshWebpackPlugin","overlay","sockPath","entry"],"sources":["webpack.config.component.dev.ts"],"sourcesContent":["import path from 'path';\nimport { Configuration } from 'webpack';\nimport { ComponentID } from '@teambit/component-id';\n// Make sure the bit-react-transformer is a dependency\n// TODO: remove it once we can set policy from component to component then set it via the component.json\nimport '@teambit/react.babel.bit-react-transformer';\nimport ReactRefreshWebpackPlugin from '@pmmmwh/react-refresh-webpack-plugin';\n\nconst matchNothingRegex = 'a^';\n\n// This is the production and development configuration.\n// It is focused on developer experience, fast rebuilds, and a minimal bundle.\n// eslint-disable-next-line complexity\n// export default function (workDir: string, envId: string): Configuration {\nexport default function (workDir: string, envId: string): Configuration {\n  return {\n    module: {\n      rules: [\n        {\n          test: /\\.js$/,\n          enforce: 'pre',\n          // limit loader to files in the current project,\n          // to skip any files linked from other projects (like Bit itself)\n          include: path.join(workDir, 'node_modules'),\n          // only apply to packages with componentId in their package.json (ie. bit components)\n          descriptionData: { componentId: (value) => !!value },\n          use: [require.resolve('source-map-loader')],\n        },\n        {\n          test: /\\.js$/,\n          // limit loader to files in the current project,\n          // to skip any files linked from other projects (like Bit itself)\n          include: path.join(workDir, 'node_modules'),\n          // only apply to packages with componentId in their package.json (ie. bit components)\n          descriptionData: { componentId: ComponentID.isValidObject },\n          use: [\n            require.resolve('@pmmmwh/react-refresh-webpack-plugin/loader'),\n            {\n              loader: require.resolve('babel-loader'),\n              options: {\n                babelrc: false,\n                configFile: false,\n                plugins: [\n                  require.resolve('react-refresh/babel'),\n                  // for component highlighting in preview.\n                  [require.resolve('@teambit/react.babel.bit-react-transformer')],\n                ],\n                // turn off all optimizations (only slow down for node_modules)\n                compact: false,\n                minified: false,\n              },\n            },\n          ],\n        },\n        // MDX support (move to the mdx aspect and extend from there)\n        {\n          test: /\\.mdx?$/,\n          // to skip any files linked from other projects (like Bit itself)\n          include: path.join(workDir, 'node_modules'),\n          // only apply to packages with componentId in their package.json (ie. bit components)\n          descriptionData: { componentId: (value) => !!value },\n          use: [\n            require.resolve('@pmmmwh/react-refresh-webpack-plugin/loader'),\n            {\n              loader: require.resolve('babel-loader'),\n              options: {\n                babelrc: false,\n                configFile: false,\n                presets: [require.resolve('@babel/preset-react'), require.resolve('@babel/preset-env')],\n                plugins: [require.resolve('react-refresh/babel')],\n              },\n            },\n            {\n              loader: require.resolve('@teambit/mdx.modules.mdx-loader'),\n            },\n          ],\n        },\n      ],\n    },\n    plugins: [\n      // No need here as we have `hot: true` in the dev server\n      // new webpack.HotModuleReplacementPlugin({}),\n      new ReactRefreshWebpackPlugin({\n        overlay: {\n          sockPath: `_hmr/${envId}`,\n          // TODO - react-error-overlay not showing runtime errors - https://github.com/teambit/bit/issues/5452\n          entry: require.resolve('./overlay/webpackHotDevClient'),\n          module: require.resolve('./overlay/refreshOverlayInterop'),\n        },\n\n        // we use '@pmmmwh/react-refresh-webpack-plugin/loader' directly where relevant.\n        // FYI, original defaults of the plugin are:\n        // include: /\\.([cm]js|[jt]sx?|flow)$/i, exclude: /node_modules/,\n        include: matchNothingRegex,\n      }),\n    ],\n  };\n}\n"],"mappings":";;;;;;;AAAA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AAEA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AAGA;AACA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AAHA;AACA;;AAIA,MAAMA,iBAAiB,GAAG,IAAI;;AAE9B;AACA;AACA;AACA;AACe,kBAAUC,OAAe,EAAEC,KAAa,EAAiB;EACtE,OAAO;IACLC,MAAM,EAAE;MACNC,KAAK,EAAE,CACL;QACEC,IAAI,EAAE,OAAO;QACbC,OAAO,EAAE,KAAK;QACd;QACA;QACAC,OAAO,EAAEC,eAAI,CAACC,IAAI,CAACR,OAAO,EAAE,cAAc,CAAC;QAC3C;QACAS,eAAe,EAAE;UAAEC,WAAW,EAAGC,KAAK,IAAK,CAAC,CAACA;QAAM,CAAC;QACpDC,GAAG,EAAE,CAACC,OAAO,CAACC,OAAO,CAAC,mBAAmB,CAAC;MAC5C,CAAC,EACD;QACEV,IAAI,EAAE,OAAO;QACb;QACA;QACAE,OAAO,EAAEC,eAAI,CAACC,IAAI,CAACR,OAAO,EAAE,cAAc,CAAC;QAC3C;QACAS,eAAe,EAAE;UAAEC,WAAW,EAAEK,0BAAW,CAACC;QAAc,CAAC;QAC3DJ,GAAG,EAAE,CACHC,OAAO,CAACC,OAAO,CAAC,6CAA6C,CAAC,EAC9D;UACEG,MAAM,EAAEJ,OAAO,CAACC,OAAO,CAAC,cAAc,CAAC;UACvCI,OAAO,EAAE;YACPC,OAAO,EAAE,KAAK;YACdC,UAAU,EAAE,KAAK;YACjBC,OAAO,EAAE,CACPR,OAAO,CAACC,OAAO,CAAC,qBAAqB,CAAC;YACtC;YACA,CAACD,OAAO,CAACC,OAAO,CAAC,4CAA4C,CAAC,CAAC,CAChE;YACD;YACAQ,OAAO,EAAE,KAAK;YACdC,QAAQ,EAAE;UACZ;QACF,CAAC;MAEL,CAAC;MACD;MACA;QACEnB,IAAI,EAAE,SAAS;QACf;QACAE,OAAO,EAAEC,eAAI,CAACC,IAAI,CAACR,OAAO,EAAE,cAAc,CAAC;QAC3C;QACAS,eAAe,EAAE;UAAEC,WAAW,EAAGC,KAAK,IAAK,CAAC,CAACA;QAAM,CAAC;QACpDC,GAAG,EAAE,CACHC,OAAO,CAACC,OAAO,CAAC,6CAA6C,CAAC,EAC9D;UACEG,MAAM,EAAEJ,OAAO,CAACC,OAAO,CAAC,cAAc,CAAC;UACvCI,OAAO,EAAE;YACPC,OAAO,EAAE,KAAK;YACdC,UAAU,EAAE,KAAK;YACjBI,OAAO,EAAE,CAACX,OAAO,CAACC,OAAO,CAAC,qBAAqB,CAAC,EAAED,OAAO,CAACC,OAAO,CAAC,mBAAmB,CAAC,CAAC;YACvFO,OAAO,EAAE,CAACR,OAAO,CAACC,OAAO,CAAC,qBAAqB,CAAC;UAClD;QACF,CAAC,EACD;UACEG,MAAM,EAAEJ,OAAO,CAACC,OAAO,CAAC,iCAAiC;QAC3D,CAAC;MAEL,CAAC;IAEL,CAAC;IACDO,OAAO,EAAE;IACP;IACA;IACA,KAAII,oCAAyB,EAAC;MAC5BC,OAAO,EAAE;QACPC,QAAQ,EAAG,QAAO1B,KAAM,EAAC;QACzB;QACA2B,KAAK,EAAEf,OAAO,CAACC,OAAO,CAAC,+BAA+B,CAAC;QACvDZ,MAAM,EAAEW,OAAO,CAACC,OAAO,CAAC,iCAAiC;MAC3D,CAAC;MAED;MACA;MACA;MACAR,OAAO,EAAEP;IACX,CAAC,CAAC;EAEN,CAAC;AACH"}