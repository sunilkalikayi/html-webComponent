{"version":3,"names":["createWebpackConfig","workspaceDir","entryFiles","publicDir","baseConfig","createBaseConfig","ssrConfig","createSsrConfig","combined","merge","target","devtool","output","path","resolve","publicPath","libraryTarget","filename"],"sources":["webpack.ssr.config.ts"],"sourcesContent":["import { Configuration } from 'webpack';\nimport path from 'path';\nimport { merge } from 'webpack-merge';\n\nimport createBaseConfig from './webpack.base.config';\n\nexport default function createWebpackConfig(\n  workspaceDir: string,\n  entryFiles: string[],\n  publicDir: string\n): Configuration {\n  const baseConfig = createBaseConfig(workspaceDir, entryFiles);\n  const ssrConfig = createSsrConfig(workspaceDir, publicDir);\n\n  const combined = merge(baseConfig, ssrConfig);\n\n  return combined;\n}\n\nfunction createSsrConfig(workspaceDir: string, publicDir: string) {\n  const ssrConfig: Configuration = {\n    target: 'node',\n    devtool: 'eval-cheap-source-map', // TODO\n\n    output: {\n      path: path.resolve(workspaceDir, publicDir, 'ssr'),\n      publicPath: '/public/ssr/',\n      libraryTarget: 'commonjs',\n      filename: 'index.js',\n    },\n\n    // // no optimizations for ssr at this point,\n    // // especially no chunks.\n    // optimization: { },\n  };\n\n  return ssrConfig;\n}\n"],"mappings":";;;;;;;AACA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AACA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AAEA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AAEe,SAASA,mBAAmB,CACzCC,YAAoB,EACpBC,UAAoB,EACpBC,SAAiB,EACF;EACf,MAAMC,UAAU,GAAG,IAAAC,sBAAgB,EAACJ,YAAY,EAAEC,UAAU,CAAC;EAC7D,MAAMI,SAAS,GAAGC,eAAe,CAACN,YAAY,EAAEE,SAAS,CAAC;EAE1D,MAAMK,QAAQ,GAAG,IAAAC,qBAAK,EAACL,UAAU,EAAEE,SAAS,CAAC;EAE7C,OAAOE,QAAQ;AACjB;AAEA,SAASD,eAAe,CAACN,YAAoB,EAAEE,SAAiB,EAAE;EAChE,MAAMG,SAAwB,GAAG;IAC/BI,MAAM,EAAE,MAAM;IACdC,OAAO,EAAE,uBAAuB;IAAE;;IAElCC,MAAM,EAAE;MACNC,IAAI,EAAEA,eAAI,CAACC,OAAO,CAACb,YAAY,EAAEE,SAAS,EAAE,KAAK,CAAC;MAClDY,UAAU,EAAE,cAAc;MAC1BC,aAAa,EAAE,UAAU;MACzBC,QAAQ,EAAE;IACZ;;IAEA;IACA;IACA;EACF,CAAC;;EAED,OAAOX,SAAS;AAClB"}