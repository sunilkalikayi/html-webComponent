{"version":3,"names":["SideBar","drawerSlot","items","rest","drawers","flatten","values","filter","drawer","isHidden","sort","sortFn","openDrawerList","onToggleDrawer","useState","map","id","handleDrawerToggle","isDrawerOpen","includes","list","concat","styles","sidebar","name","isOpen","classNames","sidebarDrawer","open","widgets","Context","first","second","order"],"sources":["side-bar.tsx"],"sourcesContent":["import React, { useState, ComponentType } from 'react';\nimport { flatten } from 'lodash';\nimport classNames from 'classnames';\nimport { MenuSection } from '@teambit/design.ui.surfaces.menu.section';\nimport { DrawerType, DrawerUI } from '@teambit/ui-foundation.ui.tree.drawer';\nimport { DrawerSlot } from '../../sidebar.ui.runtime';\nimport styles from './side-bar.module.scss';\n\nexport type SideBarProps = {\n  /**\n   * slot of registered drawers.\n   */\n  drawerSlot: DrawerSlot;\n  /**\n   * slot of registered items to the main section at the top.\n   */\n  items?: ComponentType[];\n} & React.HTMLAttributes<HTMLDivElement>;\n\n/**\n * side bar component.\n */\nexport function SideBar({ drawerSlot, items = [], ...rest }: SideBarProps) {\n  const drawers = flatten(drawerSlot.values())\n    .filter((drawer) => !drawer?.isHidden?.())\n    .sort(sortFn);\n\n  const [openDrawerList, onToggleDrawer] = useState<(string | undefined)[]>(drawers.map((drawer) => drawer.id));\n\n  const handleDrawerToggle = (id: string) => {\n    const isDrawerOpen = openDrawerList.includes(id);\n    if (isDrawerOpen) {\n      onToggleDrawer((list) => list.filter((drawer) => drawer !== id));\n      return;\n    }\n    onToggleDrawer((list) => list.concat(id));\n  };\n\n  return (\n    <div {...rest} className={styles.sidebar}>\n      <MenuSection items={items} />\n      {drawers.map((drawer) => {\n        if (!drawer || !drawer.name) return null;\n        // consider passing collapse all as a prop so each drawer collapses itself\n        const isOpen = openDrawerList.includes(drawer.id);\n\n        return (\n          <DrawerUI\n            className={classNames(styles.sidebarDrawer, isOpen && styles.open)}\n            isOpen={isOpen}\n            onToggle={() => handleDrawerToggle(drawer.id)}\n            key={drawer.id}\n            name={drawer.name}\n            Widgets={drawer.widgets}\n            Context={drawer.Context}\n          >\n            <drawer.render />\n          </DrawerUI>\n        );\n      })}\n    </div>\n  );\n}\nfunction sortFn(first: DrawerType, second: DrawerType) {\n  // 0  - equal\n  // <0 - first < second\n  // >0 - first > second\n\n  return (first.order ?? 0) - (second.order ?? 0);\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAAA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AACA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AACA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AACA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AACA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AAEA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AAA4C;AAAA;AAa5C;AACA;AACA;AACO,SAASA,OAAO,OAAoD;EAAA,IAAnD;MAAEC,UAAU;MAAEC,KAAK,GAAG;IAA0B,CAAC;IAApBC,IAAI;EACvD,MAAMC,OAAO,GAAG,IAAAC,iBAAO,EAACJ,UAAU,CAACK,MAAM,EAAE,CAAC,CACzCC,MAAM,CAAEC,MAAM;IAAA;IAAA,OAAK,EAACA,MAAM,aAANA,MAAM,mCAANA,MAAM,CAAEC,QAAQ,6CAAhB,sBAAAD,MAAM,CAAc;EAAA,EAAC,CACzCE,IAAI,CAACC,MAAM,CAAC;EAEf,MAAM,CAACC,cAAc,EAAEC,cAAc,CAAC,GAAG,IAAAC,iBAAQ,EAAyBV,OAAO,CAACW,GAAG,CAAEP,MAAM,IAAKA,MAAM,CAACQ,EAAE,CAAC,CAAC;EAE7G,MAAMC,kBAAkB,GAAID,EAAU,IAAK;IACzC,MAAME,YAAY,GAAGN,cAAc,CAACO,QAAQ,CAACH,EAAE,CAAC;IAChD,IAAIE,YAAY,EAAE;MAChBL,cAAc,CAAEO,IAAI,IAAKA,IAAI,CAACb,MAAM,CAAEC,MAAM,IAAKA,MAAM,KAAKQ,EAAE,CAAC,CAAC;MAChE;IACF;IACAH,cAAc,CAAEO,IAAI,IAAKA,IAAI,CAACC,MAAM,CAACL,EAAE,CAAC,CAAC;EAC3C,CAAC;EAED,oBACE,mEAASb,IAAI;IAAE,SAAS,EAAEmB,wBAAM,CAACC;EAAQ,iBACvC,+BAAC,mCAAW;IAAC,KAAK,EAAErB;EAAM,EAAG,EAC5BE,OAAO,CAACW,GAAG,CAAEP,MAAM,IAAK;IACvB,IAAI,CAACA,MAAM,IAAI,CAACA,MAAM,CAACgB,IAAI,EAAE,OAAO,IAAI;IACxC;IACA,MAAMC,MAAM,GAAGb,cAAc,CAACO,QAAQ,CAACX,MAAM,CAACQ,EAAE,CAAC;IAEjD,oBACE,+BAAC,8BAAQ;MACP,SAAS,EAAE,IAAAU,qBAAU,EAACJ,wBAAM,CAACK,aAAa,EAAEF,MAAM,IAAIH,wBAAM,CAACM,IAAI,CAAE;MACnE,MAAM,EAAEH,MAAO;MACf,QAAQ,EAAE,MAAMR,kBAAkB,CAACT,MAAM,CAACQ,EAAE,CAAE;MAC9C,GAAG,EAAER,MAAM,CAACQ,EAAG;MACf,IAAI,EAAER,MAAM,CAACgB,IAAK;MAClB,OAAO,EAAEhB,MAAM,CAACqB,OAAQ;MACxB,OAAO,EAAErB,MAAM,CAACsB;IAAQ,gBAExB,+BAAC,MAAM,CAAC,MAAM,OAAG,CACR;EAEf,CAAC,CAAC,CACE;AAEV;AACA,SAASnB,MAAM,CAACoB,KAAiB,EAAEC,MAAkB,EAAE;EAAA;EACrD;EACA;EACA;;EAEA,OAAO,iBAACD,KAAK,CAACE,KAAK,uDAAI,CAAC,sBAAKD,MAAM,CAACC,KAAK,yDAAI,CAAC,CAAC;AACjD"}