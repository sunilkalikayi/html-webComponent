{"version":3,"names":["LintTask","constructor","aspectId","name","execute","context","linter","env","getLinter","linterContext","rootDir","capsuleNetwork","capsulesRootDir","results","lint","componentsResults","map","lintResult","component","metadata","output","errors"],"sources":["lint.task.ts"],"sourcesContent":["import { BuildTask, BuiltTaskResult, BuildContext, ComponentResult } from '@teambit/builder';\nimport { Linter } from './linter';\nimport { LinterContext } from './linter-context';\n\nexport class LintTask implements BuildTask {\n  constructor(readonly aspectId: string, readonly name = 'lint') {}\n\n  async execute(context: BuildContext): Promise<BuiltTaskResult> {\n    const linter: Linter = context.env.getLinter();\n    // @ts-ignore TODO: fix this\n    const linterContext: LinterContext = {\n      rootDir: context.capsuleNetwork.capsulesRootDir,\n      ...context,\n    };\n    const results = await linter.lint(linterContext);\n    const componentsResults = results.results.map((lintResult): ComponentResult => {\n      return {\n        component: lintResult.component,\n        metadata: {\n          output: lintResult.output,\n          results: lintResult.results,\n        },\n        errors: [],\n      };\n    });\n\n    return {\n      componentsResults,\n    };\n  }\n}\n"],"mappings":";;;;;;;;;;;;;;;;;AAIO,MAAMA,QAAQ,CAAsB;EACzCC,WAAW,CAAUC,QAAgB,EAAWC,IAAI,GAAG,MAAM,EAAE;IAAA,KAA1CD,QAAgB,GAAhBA,QAAgB;IAAA,KAAWC,IAAI,GAAJA,IAAI;EAAY;EAEhE,MAAMC,OAAO,CAACC,OAAqB,EAA4B;IAC7D,MAAMC,MAAc,GAAGD,OAAO,CAACE,GAAG,CAACC,SAAS,EAAE;IAC9C;IACA,MAAMC,aAA4B;MAChCC,OAAO,EAAEL,OAAO,CAACM,cAAc,CAACC;IAAe,GAC5CP,OAAO,CACX;IACD,MAAMQ,OAAO,GAAG,MAAMP,MAAM,CAACQ,IAAI,CAACL,aAAa,CAAC;IAChD,MAAMM,iBAAiB,GAAGF,OAAO,CAACA,OAAO,CAACG,GAAG,CAAEC,UAAU,IAAsB;MAC7E,OAAO;QACLC,SAAS,EAAED,UAAU,CAACC,SAAS;QAC/BC,QAAQ,EAAE;UACRC,MAAM,EAAEH,UAAU,CAACG,MAAM;UACzBP,OAAO,EAAEI,UAAU,CAACJ;QACtB,CAAC;QACDQ,MAAM,EAAE;MACV,CAAC;IACH,CAAC,CAAC;IAEF,OAAO;MACLN;IACF,CAAC;EACH;AACF;AAAC"}