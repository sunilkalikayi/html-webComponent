{"version":3,"names":["removeExposedReactNative","config","raw","module","rules","filter","rule","loader","includes","test","removeReactNativePeerEntry","peersImports","get","set","name"],"sources":["webpack-template-transformers.ts"],"sourcesContent":["import { WebpackConfigMutator } from '@teambit/webpack';\nimport { get, set } from 'lodash';\n// import { filter, remove } from 'lodash';\n\n// type ModuleOpts = Exclude<WebpackConfigMutator['raw']['module'], undefined>;\n// type Rules = Exclude<ModuleOpts['rules'], undefined>;\n// type ArrayElement<ArrayType extends readonly unknown[]> = ArrayType extends readonly (infer ElementType)[]\n//   ? ElementType\n//   : never;\n\n// type Rule = ArrayElement<Rules>;\n\nexport function removeExposedReactNative(config: WebpackConfigMutator) {\n  if (config?.raw?.module?.rules) {\n    config.raw.module.rules = config.raw.module.rules.filter((rule) => {\n      // prettier-ignore\n\n      return !(\n        (\n          // @ts-ignore\n          rule.loader?.includes('expose-loader') &&\n          // @ts-ignore\n          typeof rule.test &&\n          // @ts-ignore\n          typeof rule.test === 'string' &&\n          // @ts-ignore\n          rule.test?.includes('/react-native/')\n        )\n      );\n    });\n  }\n  return config;\n}\n\nexport function removeReactNativePeerEntry(config: WebpackConfigMutator) {\n  const peersImports = get(config.raw, 'entry.peers.import');\n  if (peersImports) {\n    set(\n      config.raw,\n      'entry.peers.import',\n      peersImports.filter((name) => name !== 'react-native')\n    );\n  }\n  return config;\n}\n"],"mappings":";;;;;;;AACA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEO,SAASA,wBAAwB,CAACC,MAA4B,EAAE;EAAA;EACrE,IAAIA,MAAM,aAANA,MAAM,8BAANA,MAAM,CAAEC,GAAG,8DAAX,YAAaC,MAAM,+CAAnB,mBAAqBC,KAAK,EAAE;IAC9BH,MAAM,CAACC,GAAG,CAACC,MAAM,CAACC,KAAK,GAAGH,MAAM,CAACC,GAAG,CAACC,MAAM,CAACC,KAAK,CAACC,MAAM,CAAEC,IAAI,IAAK;MAAA;MACjE;;MAEA,OAAO;MAEH;MACA,gBAAAA,IAAI,CAACC,MAAM,yCAAX,aAAaC,QAAQ,CAAC,eAAe,CAAC;MACtC;MACA,OAAOF,IAAI,CAACG,IAAI;MAChB;MACA,OAAOH,IAAI,CAACG,IAAI,KAAK,QAAQ,IAC7B;MAAA,cACAH,IAAI,CAACG,IAAI,uCAAT,WAAWD,QAAQ,CAAC,gBAAgB,CAAC,CAExC;IACH,CAAC,CAAC;EACJ;EACA,OAAOP,MAAM;AACf;AAEO,SAASS,0BAA0B,CAACT,MAA4B,EAAE;EACvE,MAAMU,YAAY,GAAG,IAAAC,aAAG,EAACX,MAAM,CAACC,GAAG,EAAE,oBAAoB,CAAC;EAC1D,IAAIS,YAAY,EAAE;IAChB,IAAAE,aAAG,EACDZ,MAAM,CAACC,GAAG,EACV,oBAAoB,EACpBS,YAAY,CAACN,MAAM,CAAES,IAAI,IAAKA,IAAI,KAAK,cAAc,CAAC,CACvD;EACH;EACA,OAAOb,MAAM;AACf"}