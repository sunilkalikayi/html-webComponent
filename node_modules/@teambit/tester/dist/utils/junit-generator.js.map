{"version":3,"names":["testsResultsToJUnitFormat","components","builder","junitReportBuilder","newBuilder","forEach","compResult","suite","testSuite","name","componentId","toString","results","start","timestamp","Date","toISOString","testFiles","testFile","error","testCase","className","file","stripAnsi","message","tests","test","failure","status","skipped","duration","time","build"],"sources":["junit-generator.ts"],"sourcesContent":["import junitReportBuilder from 'junit-report-builder';\nimport stripAnsi from 'strip-ansi';\nimport { ComponentsResults } from '../tester';\n\nexport function testsResultsToJUnitFormat(components: ComponentsResults[]): string {\n  const builder = junitReportBuilder.newBuilder();\n  components.forEach((compResult) => {\n    const suite = builder.testSuite().name(compResult.componentId.toString());\n    if (compResult.results?.start) {\n      suite.timestamp(new Date(compResult.results?.start).toISOString());\n    }\n    compResult.results?.testFiles.forEach((testFile) => {\n      if (testFile.error) {\n        const testCase = suite.testCase().className(testFile.file).name(testFile.file);\n        testCase.error(stripAnsi(testFile.error.message as string));\n      }\n      testFile.tests.forEach((test) => {\n        const testCase = suite.testCase().className(testFile.file).name(test.name);\n        if (test.error) {\n          testCase.error(stripAnsi(test.error));\n        }\n        if (test.failure) {\n          testCase.failure(stripAnsi(test.failure));\n        }\n        if (test.status === 'skipped' || test.status === 'pending') {\n          testCase.skipped();\n        }\n        if (test.duration) {\n          testCase.time(test.duration / 1000);\n        }\n      });\n    });\n  });\n  return builder.build();\n}\n"],"mappings":";;;;;;;AAAA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AACA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AAGO,SAASA,yBAAyB,CAACC,UAA+B,EAAU;EACjF,MAAMC,OAAO,GAAGC,6BAAkB,CAACC,UAAU,EAAE;EAC/CH,UAAU,CAACI,OAAO,CAAEC,UAAU,IAAK;IAAA;IACjC,MAAMC,KAAK,GAAGL,OAAO,CAACM,SAAS,EAAE,CAACC,IAAI,CAACH,UAAU,CAACI,WAAW,CAACC,QAAQ,EAAE,CAAC;IACzE,2BAAIL,UAAU,CAACM,OAAO,gDAAlB,oBAAoBC,KAAK,EAAE;MAAA;MAC7BN,KAAK,CAACO,SAAS,CAAC,IAAIC,IAAI,yBAACT,UAAU,CAACM,OAAO,yDAAlB,qBAAoBC,KAAK,CAAC,CAACG,WAAW,EAAE,CAAC;IACpE;IACA,wBAAAV,UAAU,CAACM,OAAO,yDAAlB,qBAAoBK,SAAS,CAACZ,OAAO,CAAEa,QAAQ,IAAK;MAClD,IAAIA,QAAQ,CAACC,KAAK,EAAE;QAClB,MAAMC,QAAQ,GAAGb,KAAK,CAACa,QAAQ,EAAE,CAACC,SAAS,CAACH,QAAQ,CAACI,IAAI,CAAC,CAACb,IAAI,CAACS,QAAQ,CAACI,IAAI,CAAC;QAC9EF,QAAQ,CAACD,KAAK,CAAC,IAAAI,oBAAS,EAACL,QAAQ,CAACC,KAAK,CAACK,OAAO,CAAW,CAAC;MAC7D;MACAN,QAAQ,CAACO,KAAK,CAACpB,OAAO,CAAEqB,IAAI,IAAK;QAC/B,MAAMN,QAAQ,GAAGb,KAAK,CAACa,QAAQ,EAAE,CAACC,SAAS,CAACH,QAAQ,CAACI,IAAI,CAAC,CAACb,IAAI,CAACiB,IAAI,CAACjB,IAAI,CAAC;QAC1E,IAAIiB,IAAI,CAACP,KAAK,EAAE;UACdC,QAAQ,CAACD,KAAK,CAAC,IAAAI,oBAAS,EAACG,IAAI,CAACP,KAAK,CAAC,CAAC;QACvC;QACA,IAAIO,IAAI,CAACC,OAAO,EAAE;UAChBP,QAAQ,CAACO,OAAO,CAAC,IAAAJ,oBAAS,EAACG,IAAI,CAACC,OAAO,CAAC,CAAC;QAC3C;QACA,IAAID,IAAI,CAACE,MAAM,KAAK,SAAS,IAAIF,IAAI,CAACE,MAAM,KAAK,SAAS,EAAE;UAC1DR,QAAQ,CAACS,OAAO,EAAE;QACpB;QACA,IAAIH,IAAI,CAACI,QAAQ,EAAE;UACjBV,QAAQ,CAACW,IAAI,CAACL,IAAI,CAACI,QAAQ,GAAG,IAAI,CAAC;QACrC;MACF,CAAC,CAAC;IACJ,CAAC,CAAC;EACJ,CAAC,CAAC;EACF,OAAO5B,OAAO,CAAC8B,KAAK,EAAE;AACxB"}